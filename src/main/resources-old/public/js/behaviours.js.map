{"version":3,"sources":["app/js/behaviours.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../dist/js/behaviours.js","sourcesContent":["\"use strict\";\n\n/**\r\n * Statement of rights to be used by the directive \"behavior\" or by \"workflow\" property to hide / display allowed behaviors like creating, updating, sharing, etc.\r\n * No use for share-panel Directive !\r\n *\r\n */\nvar diariesBehaviours = {\n\tresources: {\n\t\t//lessons\n\t\tshareSubmitLesson: {\n\t\t\tright: \"fr-openent-diary-controllers-LessonController|shareSubmit\"\n\t\t},\n\t\tgetLesson: {\n\t\t\tright: \"fr-openent-diary-controllers-LessonController|getLesson\"\n\t\t},\n\t\tpublishLesson: {\n\t\t\tright: \"fr-openent-diary-controllers-LessonController|publishLesson\"\n\t\t},\n\t\tmodifyLesson: {\n\t\t\tright: \"fr-openent-diary-controllers-LessonController|modifyLesson\"\n\t\t},\n\t\tdeleteLesson: {\n\t\t\tright: \"fr-openent-diary-controllers-LessonController|deleteLesson\"\n\t\t},\n\t\t// homeworks\n\t\tshareSubmitHomework: {\n\t\t\tright: \"fr-openent-diary-controllers-HomeworkController|shareSubmit\"\n\t\t},\n\t\tmodifyHomework: {\n\t\t\tright: \"fr-openent-diary-controllers-HomeworkController|modifyHomework\"\n\t\t},\n\t\tgetHomework: {\n\t\t\tright: \"fr-openent-diary-controllers-HomeworkController|getHomework\"\n\t\t},\n\t\tdeleteHomework: {\n\t\t\tright: \"fr-openent-diary-controllers-HomeworkController|deleteHomework\"\n\t\t}\n\t},\n\t//using by workflow property ($register.$workflow), ex on a button for creating lesson : workflow=\"diary.createLesson\"\n\tworkflow: {\n\t\tcreateLesson: \"fr.openent.diary.controllers.LessonController|createLesson\",\n\t\tcreateHomeworkForLesson: \"fr.openent.diary.controllers.HomeworkController|createHomeworkForLesson\",\n\t\tcreateFreeHomework: \"fr.openent.diary.controllers.HomeworkController|createFreeHomework\"\n\t}\n};\n\nBehaviours.register('diary', {\n\tbehaviours: diariesBehaviours,\n\t/**\r\n  * Allows to set rights for behaviours.\r\n  */\n\tresource: function resource(_resource) {\n\t\tvar rightsContainer = _resource;\n\t\tif (!_resource.myRights) {\n\t\t\t_resource.myRights = {};\n\t\t}\n\n\t\tfor (var behaviour in diariesBehaviours.resources) {\n\t\t\tif (model.me.hasRight(rightsContainer, diariesBehaviours.resources[behaviour]) || model.me.userId === _resource.owner.userId || model.me.userId === rightsContainer.owner.userId) {\n\t\t\t\tif (_resource.myRights[behaviour] !== undefined) {\n\t\t\t\t\t_resource.myRights[behaviour] = _resource.myRights[behaviour] && diariesBehaviours.resources[behaviour];\n\t\t\t\t} else {\n\t\t\t\t\t_resource.myRights[behaviour] = diariesBehaviours.resources[behaviour];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn _resource;\n\t},\n\n\t/**\r\n  * Allows to load workflow rights according to rights defined by the\r\n  * administrator for the current user in the console.\r\n  */\n\tworkflow: function workflow() {\n\t\tvar workflow = {};\n\n\t\tvar diariesWorkflow = diariesBehaviours.workflow;\n\t\tfor (var prop in diariesWorkflow) {\n\t\t\tif (model.me.hasWorkflow(diariesWorkflow[prop])) {\n\t\t\t\tworkflow[prop] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn workflow;\n\t},\n\n\t/**\r\n  * Allows to define all rights to display in the share windows. Names are\r\n  * defined in the server part with\r\n  * <code>@SecuredAction(value = \"xxxx.read\", type = ActionType.RESOURCE)</code>\r\n  * without the prefix <code>xxx</code>.\r\n  */\n\tresourceRights: function resourceRights() {\n\t\treturn ['read', 'publish', 'manager'];\n\t},\n\n\t/**\r\n  * Function required by the \"linker\" component to display the collaborative editor info\r\n  */\n\tloadResources: function loadResources(callback) {}\n});\n"]}