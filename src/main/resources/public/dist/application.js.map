{"version":3,"sources":["webpack:///webpack/bootstrap 8cdaba772d190c21238b","webpack:///./ts/app.ts","webpack:///external \"entcore\"","webpack:///./ts/controller.ts","webpack:///./ts/models/index.ts","webpack:///./ts/models/Attachment.model.ts","webpack:///./ts/models/Child.model.ts","webpack:///./ts/models/Homework.model.ts","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/minicast.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/eventer.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/selection.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.crud.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/crud.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/axios.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/utils.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/bind.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/Axios.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/defaults.js","webpack:///C:/CGI/dev/cahier-de-textes/~/process/browser.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/normalizeHeaderName.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/adapters/xhr.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/settle.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/createError.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/enhanceError.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/buildURL.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/parseHeaders.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/isURLSameOrigin.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/btoa.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/cookies.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/InterceptorManager.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/dispatchRequest.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/transformData.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/isCancel.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/isAbsoluteURL.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/combineURLs.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/Cancel.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/CancelToken.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/spread.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.collection.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/collection.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.model.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/model.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/provider.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/autosaver.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/axios.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/utils.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/bind.js","webpack:///C:/CGI/dev/cahier-de-textes/~/is-buffer/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/Axios.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/defaults.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/normalizeHeaderName.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/adapters/xhr.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/settle.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/createError.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/enhanceError.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/buildURL.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/parseHeaders.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/isURLSameOrigin.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/btoa.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/cookies.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/InterceptorManager.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/dispatchRequest.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/transformData.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/isCancel.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/isAbsoluteURL.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/combineURLs.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/Cancel.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/CancelToken.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/spread.js","webpack:///./ts/tools.ts","webpack:///./ts/models/PedagogicItem.model.ts","webpack:///./ts/models/PedagogicDay.model.ts","webpack:///./ts/models/SearchForm.model.ts","webpack:///./ts/models/Subject.model.ts","webpack:///./ts/models/Teacher.model.ts","webpack:///./ts/models/Lesson.model.ts","webpack:///./ts/model.ts","webpack:///./ts/services/courses.service.ts","webpack:///./ts/services/subject.service.ts","webpack:///./ts/services/utils.service.ts","webpack:///./ts/services/lessons.service.ts","webpack:///./ts/services/attachment.service.ts","webpack:///./ts/services/secure.service.ts","webpack:///./ts/services/audiences.service.ts","webpack:///./ts/controllers/index.ts","webpack:///./ts/controllers/calendar/main-calendar-page.controller.ts","webpack:///./ts/services/modelweek.service.ts","webpack:///./ts/controllers/calendar/calendar.controller.ts","webpack:///./ts/services/homework.service.ts","webpack:///./ts/controllers/calendar/calendar-daily-events.controller.ts","webpack:///./ts/controllers/calendar/calendar-list-view.controller.ts","webpack:///./ts/controllers/lesson/edit-lesson.controller.ts","webpack:///./ts/services/pedagogic-item.service.ts","webpack:///./ts/controllers/lesson/edit-progression-lesson.controller.ts","webpack:///./ts/services/progression.service.ts","webpack:///./ts/controllers/progression/progression-manager.controller.ts","webpack:///./ts/controllers/progression/progression-right-panel.controller.ts","webpack:///./ts/controllers/visa/habilitations.controller.ts","webpack:///./ts/services/visa.service.ts","webpack:///C:/CGI/dev/cahier-de-textes/~/file-saver/FileSaver.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./ts/controllers/visa/visa.controller.ts","webpack:///./ts/controllers/history.controller.ts","webpack:///./ts/services/history.service.ts","webpack:///./ts/directives/index.ts","webpack:///./ts/directives/calendar-daily-events.directive.ts","webpack:///./ts/directives/confirm.directive.ts","webpack:///./ts/directives/diary-drop-down.directive.ts","webpack:///./ts/directives/ent-drop-down.directive.ts","webpack:///./ts/directives/item-calendar.directive.ts","webpack:///./ts/directives/multi-calendar-filter.directive.ts","webpack:///./ts/directives/on-finish-render.directive.ts","webpack:///./ts/directives/right-panel.directive.ts","webpack:///./ts/directives/search-drop-down.directive.ts","webpack:///./ts/directives/secure.directive.ts","webpack:///./ts/directives/structure-selector.directive.ts","webpack:///./ts/directives/subject-picker.directive.ts","webpack:///./ts/directives/quick-search/diary-timeslot-item.directive.ts","webpack:///./ts/directives/quick-search/quick-search.directive.ts","webpack:///./ts/directives/quick-search/quick-search-item.directive.ts","webpack:///./ts/directives/attachment/attachment.directive.ts","webpack:///./ts/directives/attachment/attachmentsx.directive.ts","webpack:///./ts/filters/index.ts","webpack:///./ts/filters/array-to-string.filter.ts","webpack:///./ts/filters/format-hour.filter.ts","webpack:///./ts/filters/highlight.filter.ts","webpack:///./ts/filters/max-char.filter.ts","webpack:///./ts/filters/same-day.filter.ts","webpack:///./ts/filters/translate.filter.ts","webpack:///./ts/filters/trust-html.filter.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACtCA,wCAAiF;AACjF,2CAA+C;AAC/C,2CAAmD;AACnD,2CAAiD;AACjD,wCAA2C;AAC3C,uCAAkC;AAIlC,IAAG,CAAC,CAAC,IAAI,UAAU,IAAI,WAAW,CAAC,CAAC,CAAC;KACjC,YAAE,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;AACjD,EAAC;AAED,IAAG,CAAC,CAAC,IAAI,SAAS,IAAI,UAAU,CAAC,CAAC,CAAC;KAC/B,YAAE,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC;AAC9C,EAAC;AAED,IAAG,CAAC,CAAC,IAAI,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC;KACzB,YAAE,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AACrC,EAAC;AACD,gBAAK,CAAC,KAAK,GAAG,iBAAS,CAAC;AAExB,aAAE,CAAC,WAAW,CAAC,IAAI,CAAC,4BAAe,CAAC,CAAC;AAErC,iBAAM,CAAC,MAAM,CAAC,UAAC,cAAc;KACzB,cAAc;UAET,IAAI,CAAC,kBAAkB,EAAE;SACtB,MAAM,EAAE,iBAAiB;MAC5B,CAAC;UAED,IAAI,CAAC,4BAA4B,EAAE;SAChC,MAAM,EAAE,gBAAgB;MAC3B,CAAC;UAED,IAAI,CAAC,gDAAgD,EAAE;SACpD,MAAM,EAAE,wBAAwB;MACnC,CAAC;UACD,IAAI,CAAC,gEAAgE,EAAE;SACpE,MAAM,EAAE,gBAAgB;MAC3B,CAAC;UAED,IAAI,CAAC,qCAAqC,EAAE;SACzC,MAAM,EAAE,kBAAkB;MAC7B,CAAC;UAED,IAAI,CAAC,qBAAqB,EAAE;SACzB,MAAM,EAAE,oBAAoB;MAC/B,CAAC;UACD,IAAI,CAAC,2BAA2B,EAAE;SAC/B,MAAM,EAAE,gBAAgB;MAC3B,CAAC;UACD,IAAI,CAAC,2BAA2B,EAAE;SAC/B,MAAM,EAAE,gBAAgB;MAC3B,CAAC;UAED,IAAI,CAAC,uCAAuC,EAAE;SAC3C,MAAM,EAAE,gBAAgB;MAC3B,CAAC;UACD,IAAI,CAAC,+BAA+B,EAAE;SACnC,MAAM,EAAE,kBAAkB;MAC7B,CAAC;UACD,IAAI,CAAC,yCAAyC,EAAE;SAC7C,MAAM,EAAE,kBAAkB;MAC7B,CAAC;UACD,IAAI,CAAC,6BAA6B,EAAE;SACjC,MAAM,EAAE,cAAc;MACzB,CAAC;UACD,IAAI,CAAC,WAAW,EAAE;SACf,MAAM,EAAE,UAAU;MACrB,CAAC;UACD,IAAI,CAAC,WAAW,EAAE;SACf,MAAM,EAAE,UAAU;MACrB,CAAC;UAED,SAAS,CAAC;SACP,MAAM,EAAE,cAAc;MACzB,CAAC,CAAC;AACX,EAAC,CAAC,CAAC;;;;;;;AC9EH,0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,wCAA0E;AAI1E,iCAA4D;AAC5D,iDAA2D;AAC3D,iDAA2D;AAC3D,gDAA0D;AAC1D,qCAAiC;AACjC,mDAA6D;AAG7D;;;;;;;;IAQG;AAEQ,wBAAe,GAAG,YAAE,CAAC,UAAU,CAAC,iBAAiB,EAAE;KAC1D,QAAQ,EAAE,YAAY,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,SAAS,EAAE,MAAM;KACxE,UAAU,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI;SACpE,KAAK,CAAC,aAAa,GAAG,+BAAa,CAAC;SACpC,KAAK,CAAC,aAAa,GAAG,+BAAa,CAAC;SACpC,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;SACnC,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC;SACvC,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;SAEzB,UAAU,CAAC,wBAAwB,GAAG,SAAS,CAAE,YAAW;SAE5D,UAAU,CAAC,GAAG,CAAC,eAAe,EAAC,UAAC,CAAC,EAAC,IAAI;aAClC,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAC,2BAA2B,GAAG,IAAI,CAAC,EAAE,CAAC;aAClF,iCAAiC;SACrC,CAAC,CAAC,CAAC;SAGH,MAAM,CAAC,aAAa,GAAG,EAAE,CAAC;SAC1B,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,EAAC;aAChB,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;SACvB,CAAC;SACD,MAAM,CAAC,IAAI,GAAG;aACV,WAAW,EAAE,QAAQ;UACxB,CAAC;SAEF,MAAM,CAAC,IAAI,GAAG;aACV,YAAY,EAAE,QAAQ;UACzB,CAAC;SAEF,UAAU,CAAC,QAAQ,GAAG,UAAU,IAAI;aAChC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACzB,CAAC,CAAC;SAEF,UAAU,CAAC,SAAS,GAAG,UAAS,GAAG;aAC/B,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;SACjC,CAAC,CAAC;SAEF,UAAU,CAAC,eAAe,GAAG,UAAS,CAAC;aACnC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,WAAW,CAAC,CAAC,CAAC;iBAC3B,gBAAM,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;iBACtB,UAAU,CAAC,aAAa,GAAC,EAAE,CAAC;iBAC5B,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACjC,UAAU,CAAC,MAAM,EAAE,CAAC;aACxB,CAAC;SACL,CAAC,CAAC;SAEF,MAAM,CAAC,2BAA2B,GAAG,KAAK,CAAC;SAC3C,MAAM,CAAC,6BAA6B,GAAG,KAAK,CAAC;SAE7C,MAAM,CAAC,cAAc,GAAG,KAAK,CAAC;SAC9B;;;YAGG;SACH,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;SACvB;;;;YAIG;SACH,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC;SAC1B,4CAA4C;SAC5C,MAAM,CAAC,SAAS,GAAG,IAAI,SAAM,EAAE,CAAC;SAChC,MAAM,CAAC,WAAW,GAAG,IAAI,WAAQ,EAAE,CAAC;SACpC,MAAM,CAAC,gBAAgB,GAAG,IAAI,gBAAa,EAAE,CAAC;SAEjD,0BAA0B;SAC1B,MAAM,CAAC,wBAAwB,GAAI,IAAI,KAAK,EAAE,CAAC;SAC/C,MAAM,CAAC,0BAA0B,GAAI,IAAI,KAAK,EAAE,CAAC;SAE9C,MAAM,CAAC,aAAa,GAAG,UAAS,QAAQ;aACpC,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC;iBAClC,MAAM,CAAC,gBAAgB,CAAC,SAAS,GAAG,QAAQ,CAAC;iBAC7C,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAAC;aACnC,CAAC;aAAC,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC;iBAC/B,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC;aAC5B,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC;aAC9B,CAAC;SACL,CAAC,CAAC;SAEF,MAAM,CAAC,YAAY,GAAG;aAClB,IAAI,EAAE,SAAS;UAClB,CAAC;SAEF,MAAM,CAAC,OAAO,GAAG;aACb,SAAS,EAAE,KAAK;aAChB,oBAAoB,EAAE,KAAK;aAC3B,sBAAsB,EAAE,KAAK;aAC7B,QAAQ,EAAE,KAAK;aACf,iBAAiB,EAAE,KAAK;aACxB,YAAY,EAAG,KAAK;UACvB,CAAC;SAIF,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC;SAC/B,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;SACnC,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;SACjC,MAAM,CAAC,aAAa,GAAG,KAAK,CAAC,aAAa,CAAC;SAC3C,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;SACnC,MAAM,CAAC,aAAa,GAAG,KAAK,CAAC,aAAa,CAAC;SAC3C,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;SAC7B,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;SAC3B,MAAM,CAAC,aAAa,GAAG,KAAK,CAAC,aAAa,CAAC;SAE3C,8DAA8D;SAC9D,MAAM,CAAC,wBAAwB,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;SAElD,gDAAgD;SAChD,MAAM,CAAC,aAAa,GAAG,KAAK,CAAC,aAAa,EAAE,CAAC;SAE7C,+CAA+C;SAC/C,MAAM,CAAC,YAAY,GAAG,KAAK,CAAC,YAAY,EAAE,CAAC;SAE3C,MAAM,CAAC,UAAU,GAAG,KAAK,CAAC,UAAU,CAAC;SAErC,mEAAmE;SACnE,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC;SAEnB,MAAM,CAAC,eAAe,GAAG,SAAS,CAAC,CAAC,qFAAqF;SAEzH,KAAK,CAAC;aACF,eAAe,EAAC,UAAS,MAAM;iBAC3B,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;aAC1C,CAAC;aACD,cAAc,EAAE,UAAU,MAAM;iBAC5B,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;aAC1C,CAAC;aACD,qBAAqB,EAAC,UAAS,MAAM;iBACnC,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,yBAAyB,CAAC,CAAC;aACnD,CAAC;aACD,sBAAsB,EAAE,UAAU,MAAM;iBACpC,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,qBAAqB,CAAC,CAAC;aACjD,CAAC;aACD,gBAAgB,EAAE,UAAU,MAAM;iBAC1B,uBAAuB;iBACvB,MAAM,CAAC,2BAA2B,GAAG,KAAK,CAAC;iBAC3C,MAAM,CAAC,6BAA6B,GAAG,KAAK,CAAC;iBAC7C,sCAAsC;iBAEtC,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;iBAC9B,EAAE,CAAC,CAAC,8BAAa,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,EAAC;qBAChE,kBAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;iBAChD,CAAC;aACP,CAAC;aACD,kBAAkB,EAAE;iBAChB,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;iBACvB,MAAM,CAAC,6BAA6B,GAAG,KAAK,CAAC;iBAC7C,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;aAClC,CAAC;aACD,cAAc,EAAE,UAAS,MAAM;iBAC3B,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;iBAC9B,EAAE,CAAC,CAAC,8BAAa,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,EAAC;qBAChE,kBAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;iBAC9C,CAAC;iBAAA,IAAI,EAAC;qBACF,kBAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;iBAC9C,CAAC;aACL,CAAC;aACD,cAAc,EAAE,UAAS,MAAM;iBAC3B,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;iBAC9B,kBAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;aAC9C,CAAC;aACD,gBAAgB,EAAE,UAAS,MAAM;iBAC7B,qBAAqB,CAAC,MAAM,CAAC,CAAC;aAClC,CAAC;aACD,YAAY,EAAE,UAAU,MAAM;iBAC1B,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;iBAC9B,kBAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;iBACvC,kBAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,qBAAqB,CAAC,CAAC;iBAC5D,KAAK,CAAC,gBAAgB,GAAG,6DAA6D,CAAC;aAC3F,CAAC;aACD,QAAQ,EAAE;iBACN,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;iBAC9B,kBAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;iBACvC,KAAK,CAAC,gBAAgB,GAAG,yDAAyD,CAAC;aACvF,CAAC;aACD,QAAQ,EAAE;iBACN,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;qBAC1B,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;iBAC9B,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACJ,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;iBAClC,CAAC;aACL,CAAC;UACJ,CAAC,CAAC;SAGH,MAAM,CAAC,wBAAwB,GAAG,UAAS,UAAU;aACjD,EAAE,CAAC,CAAC,MAAM,CAAC,2BAA2B,CAAC,CAAC,CAAC;iBACrC,MAAM,CAAC,2BAA2B,GAAG,KAAK,CAAC;aAC/C,CAAC;aACD,IAAI,CAAC,CAAC;iBACF,MAAM,CAAC,2BAA2B,GAAG,IAAI,CAAC;aAC9C,CAAC;SACL,CAAC,CAAC;SAGL;;YAEM;SACN,MAAM,CAAC,6BAA6B,GAAG,UAAS,UAAU,EAAE,MAAM;aACjE,IAAI,MAAM,GAAG,CAAC,CAAC,QAAQ,GAAG,UAAU,CAAC,CAAC;aACtC,IAAI,EAAE,GAAG,CAAC,CAAC,SAAS,GAAG,UAAU,CAAC,CAAC;aACnC,IAAI,SAAS,GAAG,CAAC,CAAC,cAAc,GAAG,UAAU,CAAC,CAAC;aAC/C,IAAI,OAAO,GAAG,CAAC,CAAC,YAAY,GAAG,UAAU,CAAC,CAAC;aAE3C,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;iBACZ,MAAM,CAAC,IAAI,EAAE,CAAC;iBACd,SAAS,CAAC,IAAI,EAAE,CAAC;iBACjB,EAAE,CAAC,IAAI,EAAE,CAAC;iBACV,OAAO,CAAC,IAAI,EAAE,CAAC;aAChB,CAAC;aACD,IAAI,CAAC,CAAC;iBACL,EAAE,CAAC,IAAI,EAAE,CAAC;iBACV,OAAO,CAAC,IAAI,EAAE,CAAC;iBACf,MAAM,CAAC,IAAI,EAAE,CAAC;iBACd,SAAS,CAAC,IAAI,EAAE,CAAC;aAClB,CAAC;SACD,CAAC,CAAC;SAEA;;YAEG;SACH,MAAM,CAAC,wBAAwB,GAAG;aAC9B,EAAE,CAAC,CAAC,MAAM,CAAC,2BAA2B,CAAC,CAAC,CAAC;iBACrC,MAAM,CAAC,2BAA2B,GAAG,KAAK,CAAC;aAC/C,CAAC;aACD,IAAI,CAAC,CAAC;iBACF,MAAM,CAAC,2BAA2B,GAAG,IAAI,CAAC;aAC9C,CAAC;SACL,CAAC,CAAC;SAEF;;YAEG;SACH,MAAM,CAAC,0BAA0B,GAAG;aAChC,EAAE,CAAC,CAAC,MAAM,CAAC,6BAA6B,CAAC,CAAC,CAAC;iBACvC,MAAM,CAAC,6BAA6B,GAAG,KAAK,CAAC;aACjD,CAAC;aACD,IAAI,CAAC,CAAC;iBACF,MAAM,CAAC,6BAA6B,GAAG,IAAI,CAAC;aAChD,CAAC;SACL,CAAC,CAAC;SAGF,aAAa;SACb,MAAM,CAAC,QAAQ,GAAG;aACd,MAAM,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;aAC/B,EAAE,EAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC;iBACtB,KAAK,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC;aACtC,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,KAAK,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC;aACtC,CAAC;aAED,MAAM,CAAC,eAAe,GAAG,SAAS,CAAC;aACnC,KAAK,CAAC,aAAa,CAAC,kBAAkB,CAAC,MAAM,CAAC,YAAY,EAAE,UAAU,CAAC,eAAe,CAAC,CAAC;SAC5F,CAAC,CAAC;SAEF,MAAM,CAAC,YAAY,GAAG;aAClB,EAAE,EAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC;iBACvB,KAAK,CAAC,YAAY,EAAE,CAAC;aACzB,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,KAAK,CAAC,YAAY,EAAE,CAAC;aACzB,CAAC;aACD,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;aAC9B,kBAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;aACxC,MAAM,CAAC,MAAM,EAAE,CAAC;SACpB,CAAC,CAAC;SAGF;;;;YAIG;SACH,MAAM,CAAC,cAAc,GAAG,UAAS,aAAa,EAAE,SAAS;aACrD,IAAI,GAAG,GAAG,EAAE,CAAC;aAEb,EAAE,CAAC,CAAC,aAAa,CAAC,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC;iBAEvC,GAAG,GAAG,aAAa,CAAC,MAAM,GAAG,kBAAkB,GAAG,aAAa,CAAC,EAAE,GAAG,GAAG,GAAG,kBAAkB,GAAG,aAAa,CAAC,EAAE,GAAG,GAAG,CAAC;aAC3H,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,uDAAuD;iBACvD,EAAE,CAAC,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC;qBAC1B,kCAAkC;qBAClC,MAAM,CAAC,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;qBACvC,GAAG,GAAG,kBAAkB,GAAG,aAAa,CAAC,SAAS,GAAG,GAAG,GAAG,aAAa,CAAC,EAAE,CAAC;iBAChF,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACJ,GAAG,GAAG,oBAAoB,GAAG,aAAa,CAAC,EAAE,CAAC;iBAClD,CAAC;aACL,CAAC;aAED,EAAE,EAAC,SAAS,CAAC,EAAC;iBACV,OAAO,CAAC,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;aAClC,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;aACvB,CAAC;SAEL,CAAC,CAAC;SAEF,wBAAwB;SACxB,MAAM,CAAC,SAAS,GAAG,UAAS,GAAG;aAC3B,KAAK,CAAC,YAAY,EAAE,CAAC;aACrB,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC;aACpB,MAAM,CAAC,eAAe,GAAG,gBAAM,CAAC,GAAG,CAAC,OAAO,EAAE,mBAAmB,CAAC,CAAC;SACtE,CAAC,CAAC;SAEF,UAAU,CAAC,IAAI,GAAC;aACd,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;SACzB,CAAC,CAAC;SAEF,IAAI,qBAAqB,GAAG,UAAS,MAAM;aACvC,oDAAoD;aACpD,IAAI,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,EAAC,CAAC,CAAC;aAE7E,EAAE,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC;iBACnB,MAAM,CAAC,6BAA6B,GAAG,KAAK,CAAC;iBAC7C,MAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;aACtC,CAAC;aAED,IAAI,CAAC,CAAC;iBACF,QAAQ,GAAG,IAAI,WAAQ,EAAE,CAAC;iBAC1B,QAAQ,CAAC,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;iBAE1C,QAAQ,CAAC,IAAI,CAAC;qBACV,MAAM,CAAC,6BAA6B,GAAG,KAAK,CAAC;qBAC7C,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;iBAC9C,CAAC,EAAE,UAAS,GAAG;qBACX,gBAAM,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;iBAC9B,CAAC,CAAC,CAAC;aACP,CAAC;SACL,CAAC,CAAC;SAGF,MAAM,CAAC,gBAAgB,GAAG,UAAS,QAAQ,EAAE,MAAM;aAE/C,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;iBACX,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;qBACnB,MAAM,CAAC,QAAQ,GAAG,IAAI,WAAQ,EAAE,CAAC;iBACrC,CAAC;iBAED,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;iBACrC,MAAM,CAAC,OAAO,GAAG;qBACb,IAAI,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI;kBAC7B,CAAC;aACN,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,IAAI,OAAO,GAAG,MAAM,CAAC,uBAAuB,EAAE,CAAC;iBAC/C,YAAY,CAAC,OAAO,CAAC,CAAC;aAC1B,CAAC;aAED,MAAM,CAAC,iBAAiB,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;aAEhD,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;aAC9B,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,wBAAwB,CAAC,EAAC;iBAClC,kBAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;aAChD,CAAC;aACD,IAAI,EAAC;iBACD,kBAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC,CAAC;iBAC9C,kBAAQ,CAAC,IAAI,CAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;aACtD,CAAC;SAEL,CAAC,CAAC;SAEF;;;YAGG;SACH,MAAM,CAAC,YAAY,GAAG,UAAU,EAAE;aAC9B,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aAE5B,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;iBAC3B,EAAE,EAAE,CAAC;aACT,CAAC;SACL,CAAC,CAAC;SAEF;;;YAGG;SACH,MAAM,CAAC,YAAY,GAAG,UAAU,EAAE;aAC9B,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;aAC3B,MAAM,CAAC;aACP;2CAC8B;SAClC,CAAC,CAAC;SAEF;;;;YAIG;SACH,MAAM,CAAC,gBAAgB,GAAG,UAAU,WAAW,EAAE,EAAE;aAE/C,IAAI,gBAAgB,GAAG,eAAe,CAAC;aAEvC,EAAE,CAAC,CAAC,OAAO,WAAW,IAAI,WAAW,IAAI,WAAW,IAAI,IAAI,CAAC,CAAC,CAAC;iBAC3D,gBAAgB,IAAI,GAAG,GAAG,WAAW,CAAC;aAC1C,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;qBACxC,gBAAgB,IAAI,GAAG,GAAG,gBAAM,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;iBACrH,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACJ,gBAAgB,IAAI,GAAG,GAAG,gBAAM,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;iBAC3F,CAAC;aACL,CAAC;aAED,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;aAEjC,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;iBAC3B,EAAE,EAAE,CAAC;aACT,CAAC;SACL,CAAC,CAAC;SAEF;;;YAGG;SACH,MAAM,CAAC,mBAAmB,GAAG;aACzB,IAAI,eAAe,GAAG,MAAM,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC;aACjE,IAAI,iBAAiB,GAAG,MAAM,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC;aAErE,EAAE,CAAC,CAAC,CAAC,eAAe,CAAC,MAAM,GAAG,iBAAiB,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;iBAC5D,gBAAM,CAAC,KAAK,CAAC,mCAAmC,CAAC,CAAC;iBAClD,MAAM,CAAC;aACX,CAAC;aAED,IAAI,0BAA0B,GAAG,UAAU,iBAAiB,EAAE,iBAAiB;iBAC3E,MAAM,CAAC,iBAAiB,CAAC,MAAM,CAAC,UAAU,QAAQ;qBAC9C,MAAM,CAAC,QAAQ,CAAC,SAAS,IAAI,IAAI,IAAI,CAAC,WAAC,CAAC,QAAQ,CAAC,iBAAiB,EAAE,QAAQ,CAAC,SAAS,CAAC,CAAC;iBAC5F,CAAC,CAAC,CAAC;aACP,CAAC,CAAC;aAEF,IAAI,UAAU,GAAG;iBACb,gBAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;iBAC5B,MAAM,CAAC,iBAAiB,EAAE,CAAC;iBAC3B,UAAU,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;iBACtC,MAAM,CAAC,MAAM,EAAE,CAAC;aACpB,CAAC,CAAC;aAEF,IAAI,eAAe,GAAG;iBAClB,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,UAAU,CAAC,iBAAiB,EAAE,UAAU;iBACrE,yBAAyB;iBACzB,UAAU,GAAG,IAAG,gBAAM,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,GAAC,CAC7C,CAAC;aACN,CAAC,CAAC;aAEF,kCAAkC;aAClC,mDAAmD;aACnD,IAAI,SAAS,GAAG,KAAK,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;aACnD,IAAI,iBAAiB,GAAG,0BAA0B,CAAC,iBAAiB,EAAE,SAAS,CAAC,CAAC;aAEjF,uDAAuD;aACvD,qBAAqB;aACrB,EAAE,CAAC,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;iBAC7B,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,eAAe,EACrD;qBACI,EAAE,CAAC,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;yBAC/B,eAAe,EAAE,CAAC;qBACtB,CAAC;qBAAC,IAAI,CAAC,CAAC;yBACJ,UAAU,EAAE,CAAC;qBACjB,CAAC;iBACL,CAAC;iBACD,yBAAyB;iBACzB,UAAU,GAAG;qBACT,gBAAM,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC;iBAC7B,CAAC,CACJ,CAAC;aACN,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,eAAe,EAAE,CAAC;aACtB,CAAC;SACL,CAAC,CAAC;SAEF;;YAEG;SACH,MAAM,CAAC,gBAAgB,GAAG;aAEtB,IAAI,eAAe,GAAG,MAAM,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC;aACjE,IAAI,cAAc,GAAG,eAAe,CAAC,MAAM,GAAG,CAAC,GAAG,eAAe,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;aAE5E,IAAI,iBAAiB,GAAG,MAAM,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC;aACrE,IAAI,gBAAgB,GAAG,iBAAiB,CAAC,MAAM,GAAG,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;aAElF,EAAE,CAAC,CAAC,gBAAgB,IAAI,cAAc,CAAC,CAAC,CAAC;iBACrC,gBAAM,CAAC,KAAK,CAAC,8CAA8C,CAAC,CAAC;iBAC7D,MAAM,CAAC;aACX,CAAC;aAED,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;iBACjB,UAAU,CAAC,QAAQ,CAAC,kBAAkB,GAAG,cAAc,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC;aACtE,CAAC;aAAC,IAAI,CAAC,EAAE,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;iBAC1B,uDAAuD;iBACvD,EAAE,CAAC,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC;qBAC7B,kCAAkC;qBAClC,MAAM,CAAC,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;qBACvC,UAAU,CAAC,QAAQ,CAAC,kBAAkB,GAAG,gBAAgB,CAAC,SAAS,GAAG,GAAG,GAAG,gBAAgB,CAAC,EAAE,CAAC,CAAC;iBACrG,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACJ,UAAU,CAAC,QAAQ,CAAC,oBAAoB,GAAG,gBAAgB,CAAC,EAAE,CAAC,CAAC;iBACpE,CAAC;aACL,CAAC;SACL,CAAC,CAAC;SAEF;;;;;YAKG;SACH,MAAM,CAAC,wBAAwB,GAAG,UAAU,QAAQ,EAAE,SAAS,EAAE,UAAU;aACvE,MAAM,CAAC,sBAAsB,CAAC,KAAK,EAAE;iBACjC,MAAM,CAAC,gCAAgC,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;aACjE,CAAC,CAAC,CAAC;SACP,CAAC,CAAC;SAGF;;YAEG;SACH,MAAM,CAAC,sBAAsB,GAAG,UAAU,SAAS;aAC/C,MAAM,CAAC,aAAa,GAAG,EAAE,CAAC;aAC1B,IAAI,SAAS,GAAG,SAAS,GAAG,gBAAgB,GAAG,kBAAkB,CAAC;aAClE,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,yBAAyB,CAAC,QAAQ,CAAC,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;SACnG,CAAC,CAAC;SAEF;;;;YAIG;SACH,MAAM,CAAC,8BAA8B,GAAG,UAAU,MAAM,EAAE,SAAS;aAC/D,IAAI,OAAO,GAAG,EAAE,CAAC;aACjB,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACrB,IAAI,SAAS,GAAG,SAAS,GAAG,kBAAkB,GAAG,oBAAoB,CAAC;aACtE,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC;iBAC7D,MAAM,CAAC,YAAY,EAAE,CAAC;aAC1B,CAAC,CAAC,CAAC;SACP,CAAC,CAAC;SAEF,MAAM,CAAC,aAAa,GAAG,UAAU,MAAM,EAAE,SAAS;aAC9C,IAAI,OAAO,GAAG,EAAE,CAAC;aACjB,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACrB,IAAI,SAAS,GAAG,SAAS,GAAG,kBAAkB,GAAG,oBAAoB,CAAC;aACtE,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;SAChE,CAAC,CAAC;SAEF;;;;;;YAMG;SACH,MAAM,CAAC,cAAc,GAAG,UAAU,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,EAAE;aAC/D,MAAM,CAAC,aAAa,GAAG,EAAE,CAAC;aAC1B,MAAM,CAAC,cAAc,GAAG,IAAI,CAAC;aAE7B,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,EAAC,GAAG,EAAC,KAAK,CAAC,WAAW,CAAC,OAAO,CAAC,EAAC,EAAE,SAAS,EAAE,SAAS,CAAC,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,EAAE,CAAC,EAAE,UAAU,CAAC;iBAC9H,MAAM,CAAC,cAAc,GAAG,KAAK,CAAC;iBAC9B,UAAU,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;aAClC,CAAC,CAAC,CAAC;SACP,CAAC,CAAC;SAEF;;;;YAIG;SACH,MAAM,CAAC,gCAAgC,GAAG,UAAU,QAAQ,EAAE,SAAS;aACnE,IAAI,SAAS,GAAG,EAAE,CAAC;aACnB,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACzB,IAAI,SAAS,GAAG,SAAS,GAAG,gBAAgB,GAAG,kBAAkB,CAAC;aAClE,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC;iBAC1D,MAAM,CAAC,YAAY,EAAE,CAAC;aAC1B,CAAC,CAAC,CAAC;SACP,CAAC,CAAC;SAEF;;;;;YAKG;SACH,MAAM,CAAC,gBAAgB,GAAG,UAAU,SAAS,EAAE,SAAS,EAAE,EAAE;aACxD,MAAM,CAAC,aAAa,GAAG,EAAE,CAAC;aAC1B,MAAM,CAAC,cAAc,GAAG,IAAI,CAAC;aAE7B,IAAI,SAAS,GAAG,SAAS,GAAG,gBAAgB,GAAG,kBAAkB,CAAC;aAClE,MAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,EAAC,GAAG,EAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,EAAC,EAAE,SAAS,EAAE,SAAS,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,EAAE,CAAC,EAAE,UAAU,CAAC;iBACpI,MAAM,CAAC,cAAc,GAAG,KAAK,CAAC;iBAC9B,UAAU,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;aAClC,CAAC,CAAC,CAAC;SAEP,CAAC,CAAC;SAEF;;;;;;YAMG;SACH,IAAI,SAAS,GAAG,UAAU,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,EAAG;aACrD,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI;iBACvB,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;iBAC5B,IAAI,CAAC,QAAQ,GAAC,KAAK,CAAC;aACxB,CAAC,CAAC,CAAC;aAEH,MAAM,CAAC,OAAO,EAAE,CAAC;aACjB,MAAM,CAAC,iBAAiB,EAAE,CAAC;aAE3B,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,IAAI,CAAE,CAAC,EAAC;iBACtB,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,2DAA2D;iBAC/E,gBAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBACvB,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;qBAC3B,EAAE,EAAE,CAAC;iBACT,CAAC;aACL,CAAC;SACL,CAAC,CAAC;SAGF;;;YAGG;SACH,MAAM,CAAC,6BAA6B,GAAG,UAAU,EAAE;aAC/C,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;aAC3B,MAAM,CAAC;SACX,CAAC,CAAC;SAEF,iBAAiB;SACjB,MAAM,CAAC,UAAU,GAAG,UAAS,IAAI;aAC7B,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,gBAAM,CAAC,IAAI,CAAC,CAAC,CAAC;SAC7C,CAAC,CAAC;SAEF,MAAM,CAAC,YAAY,GAAG,UAAS,MAAM;aACjC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;SAClD,CAAC,CAAC;SAEF,MAAM,CAAC,UAAU,GAAG,UAAS,IAAI;aAC7B,MAAM,CAAC,gBAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;SAClD,CAAC,CAAC;SAEF;;YAEG;SACH,MAAM,CAAC,iBAAiB,GAAG;aAEvB,MAAM,CAAC,cAAc,GAAG,KAAK,CAAC;aAC9B,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC;aACjC,kBAAQ,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;SAC/B,CAAC,CAAC;SAEF;;;;YAIG;SACH,MAAM,CAAC,gBAAgB,GAAG,UAAU,YAAY,EAAE,IAAI;aAClD,kBAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;aACxC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;aAChC,MAAM,CAAC,YAAY,CAAC,IAAI,GAAG,IAAI,CAAC;SACpC,CAAC,CAAC;SAEF,UAAU,CAAC,gBAAgB,GAAG,MAAM,CAAC,gBAAgB,CAAC;SAGtD;;;;YAIG;SACH,MAAM,CAAC,oCAAoC,GAAG;aAC1C,MAAM,CAAC,CAAC,MAAM,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SAC1H,CAAC,CAAC;SAGF;;;YAGG;SACH,IAAI,2BAA2B,GAAG;aAE9B,IAAI,0BAA0B,GAAG,EAAE,CAAC;aACpC,IAAI,4BAA4B,GAAG,EAAE,CAAC;aACtC,IAAI,oBAAoB,GAAG,EAAE,CAAC;aAE9B,IAAI,4BAA4B,GAAG,EAAE,CAAC;aACtC,IAAI,8BAA8B,GAAG,EAAE,CAAC;aACxC,IAAI,sBAAsB,GAAG,EAAE,CAAC,CAAC,qCAAqC;aAEtE,MAAM,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,UAAU,MAAM;iBAC/D,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;qBAC7B,0BAA0B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBAC5C,CAAC;iBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;qBACrC,4BAA4B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBAC9C,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACJ,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBACtC,CAAC;aACL,CAAC,CAAC,CAAC;aAEH,mDAAmD;aACnD,MAAM,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,UAAU,QAAQ;iBACnE,EAAE,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;qBAC/B,4BAA4B,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAChD,CAAC;iBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;qBACvC,8BAA8B,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAClD,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACJ,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC1C,CAAC;aACL,CAAC,CAAC,CAAC;aAEH,MAAM,CAAC;iBACH,0BAA0B,EAAE,0BAA0B;iBACtD,4BAA4B,EAAE,4BAA4B;iBAC1D,oBAAoB,EAAE,oBAAoB;iBAC1C,4BAA4B,EAAE,4BAA4B;iBAC1D,8BAA8B,EAAE,8BAA8B;iBAC9D,sBAAsB,EAAE,sBAAsB;cACjD,CAAC;SACN,CAAC,CAAC;SAEF,MAAM,CAAC,oBAAoB,GAAG,UAAU,SAAS;aAE7C,IAAI,kBAAkB,GAAG,2BAA2B,EAAE,CAAC;aACvD,IAAI,SAAS,GAAG,SAAS,GAAG,kBAAkB,CAAC,4BAA4B,GAAG,kBAAkB,CAAC,8BAA8B,CAAC;aAChI,IAAI,OAAO,GAAG,SAAS,GAAG,kBAAkB,CAAC,0BAA0B,GAAG,kBAAkB,CAAC,4BAA4B,CAAC;aAE1H,IAAI,SAAS,GAAG,SAAS,GAAG,gBAAgB,GAAG,kBAAkB,CAAC;aAClE,MAAM,CAAC,cAAc,GAAG,IAAI,CAAC;aAC7B,IAAI,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;aAChF,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;aAEzB,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;iBACrB,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,EAAC,GAAG,EAAE,KAAK,CAAC,WAAW,CAAC,OAAO,CAAC,EAAC,EAAE,SAAS,EAAE,SAAS,CAAC,OAAO,EAAE,SAAS,EAAE,SAAS,CAAC,EAC9G,UAAU,GAAG;qBACT,gBAAM,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;iBAC9B,CAAC,CAAC;aACV,CAAC;aAED,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;iBACvB,MAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,EAAC,GAAG,EAAE,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,EAAC,EAAE,SAAS,EAAE,SAAS,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,EACpH,UAAU,GAAG;qBACT,gBAAM,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;iBAC9B,CAAC,CAAC;aACV,CAAC;SACL,CAAC,CAAC;SAEF,MAAM,CAAC,gCAAgC,GAAG,UAAU,SAAS;aAEzD,IAAI,aAAa,GAAG,2BAA2B,EAAE,CAAC;aAElD,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;iBACZ,MAAM,CAAC,aAAa,CAAC,0BAA0B,CAAC,MAAM,GAAG,aAAa,CAAC,4BAA4B,CAAC,MAAM,CAAC;aAC/G,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,MAAM,CAAC,aAAa,CAAC,4BAA4B,CAAC,MAAM,GAAG,aAAa,CAAC,8BAA8B,CAAC,MAAM,CAAC;aACnH,CAAC;SACL,CAAC,CAAC;SAEF;;;;;;YAMG;SACH,MAAM,CAAC,+BAA+B,GAAG,UAAU,SAAS;aACxD,IAAI,aAAa,GAAG,2BAA2B,EAAE,CAAC;aAElD,IAAI,kBAAkB,GAAG,aAAa,CAAC,0BAA0B,CAAC;aAClE,IAAI,oBAAoB,GAAG,aAAa,CAAC,4BAA4B,CAAC;aACtE,IAAI,oBAAoB,GAAG,aAAa,CAAC,oBAAoB,CAAC;aAE9D,IAAI,oBAAoB,GAAG,aAAa,CAAC,4BAA4B,CAAC;aACtE,IAAI,sBAAsB,GAAG,aAAa,CAAC,8BAA8B,CAAC;aAC1E,IAAI,sBAAsB,GAAG,aAAa,CAAC,sBAAsB,CAAC;aAElE,EAAE,CAAC,CAAC,oBAAoB,CAAC,MAAM,GAAG,CAAC,IAAI,sBAAsB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;iBACvE,MAAM,CAAC,KAAK,CAAC;aACjB,CAAC;aAED,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;iBACZ,mBAAmB;iBACnB,EAAE,CAAC,CAAC,kBAAkB,CAAC,MAAM,GAAG,oBAAoB,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;qBAC/D,MAAM,CAAC,KAAK,CAAC;iBACjB,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACJ,IAAI,oBAAoB,GAAG,sBAAsB,CAAC,MAAM,IAAI,CAAC,IAAI,oBAAoB,CAAC,MAAM,IAAI,CAAC,CAAC;qBAClG,MAAM,CAAC,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,CAAC,oBAAoB,CAAC,MAAM,GAAG,CAAC,IAAI,oBAAoB,CAAC,CAAC;iBAChI,CAAC;aACL,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,mBAAmB;iBACnB,EAAE,CAAC,CAAC,oBAAoB,CAAC,MAAM,GAAG,sBAAsB,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;qBACnE,MAAM,CAAC,KAAK,CAAC;iBACjB,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACJ,IAAI,kBAAkB,GAAG,kBAAkB,CAAC,MAAM,IAAI,CAAC,IAAI,oBAAoB,CAAC,MAAM,IAAI,CAAC,CAAC;qBAC5F,MAAM,CAAC,CAAC,oBAAoB,CAAC,MAAM,GAAG,CAAC,IAAI,kBAAkB,CAAC,IAAI,CAAC,sBAAsB,CAAC,MAAM,GAAG,CAAC,IAAI,kBAAkB,CAAC,CAAC;iBAChI,CAAC;aACL,CAAC;SACL,CAAC,CAAC;SAEF,IAAI,oBAAoB,GAAG;aACvB,EAAE,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,SAAS,IAAI,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC;iBACtD,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC;aACvC,MAAM,CAAC,EAAE,CAAC;SACd,CAAC,CAAC;SAEF,IAAI,kBAAkB,GAAG;aACrB,EAAE,EAAC,KAAK,IAAI,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC;iBACjD,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;aACrC,MAAM,CAAC,EAAE,CAAC;SACd,CAAC,CAAC;SAGF,MAAM,CAAC,0BAA0B,GAAG,UAAU,QAAQ;aAClD,QAAQ,CAAC,QAAQ,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC;SAC3C,CAAC,CAAC;SAGF,MAAM,CAAC,kCAAkC,GAAG,UAAU,QAAQ,EAAE,MAAM;aAClE,MAAM,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,EAAE;iBACpC,MAAM,CAAC,iBAAiB,EAAE,CAAC;aAC/B,CAAC,CAAC,CAAC;SACP,CAAC,CAAC;SAEF;;;;;YAKG;SACH,MAAM,CAAC,cAAc,GAAG,UAAU,QAAQ,EAAE,MAAM,EAAE,EAAE;aAElD,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE;iBACpB,gBAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;iBAChC,kBAAkB;iBAElB,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;qBAC3B,EAAE,EAAE,CAAC;iBACT,CAAC;aACL,CAAC,EAAE,UAAU,CAAC;iBACV,UAAU,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;aAClC,CAAC,CAAC,CAAC;SACP,CAAC,CAAC;SAEF,MAAM,CAAC,YAAY,GAAG;aAClB,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC;iBACpB,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;aACrB,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;SAC3B,CAAC,CAAC;SAEF,MAAM,CAAC,sBAAsB,GAAG,UAAgB,YAAY;;;;;;6BACxD,MAAM,CAAC,aAAa,GAAG,EAAE,CAAC;6BAC1B,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;iCACjB,MAAM,CAAC,QAAQ,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC;6BAClD,CAAC;;;;6BAEG,qBAAM,KAAK,CAAC,SAAS,CAAC,IAAI,EAAE;;6BAA5B,SAA4B,CAAC;6BAC7B,gBAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;6BAC9B,MAAM,CAAC,QAAQ,CAAC,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,EAAC,EAAE,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,EAAC,CAAC,CAAC;6BAExF,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;iCACf,UAAU,CAAC,IAAI,EAAE,CAAC;iCAClB,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;iCACrB,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;6BAC3B,CAAC;;;;6BAED,MAAM,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC;6BAClC,MAAM,GAAC,CAAC;;;;;UAEf,CAAC;SAIF;;YAEG;SACH,MAAM,CAAC,oBAAoB,GAAG,UAAU,MAAM;aAE1C,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC;aAE/C,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,QAAQ;iBAC3C,KAAK,CAAC,iBAAiB,CAAC,QAAQ,EAAE,gBAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE,kBAAkB,CAAC,CAAC;aAC1H,CAAC,CAAC,CAAC;SAEP,CAAC,CAAC;SAEF,IAAI,kBAAkB,GAAG;aACrB,MAAM,CAAC,SAAS,EAAG,CAAC;aAEpB,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC,CAAC,CAAC,CAAC;iBACxB,EAAE,EAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;qBACjB,MAAM,CAAC,MAAM,EAAE,CAAC;iBAClB,CAAC;aACP,CAAC;SACL,CAAC,CAAC;SAEF,IAAI,kBAAkB,GAAG,UAAU,cAAc,EAAE,EAAE;aACjD,MAAM,CAAC,SAAS,EAAE,CAAC;aACnB,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC,CAAC,CAAC,CAAC;iBACxB,MAAM,CAAC,cAAc,GAAG,IAAI,CAAC;iBAC7B,MAAM,CAAC,aAAa,GAAG,KAAK,CAAC,aAAa,CAAC;iBAE3C,EAAE,EAAC,cAAc,CAAC,CAAC,CAAC;qBAChB,aAAa,EAAE,CAAC;iBACpB,CAAC;iBACD,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;qBAC3B,EAAE,EAAE,CAAC;iBACT,CAAC;aACL,CAAC;SACL,CAAC,CAAC;SAEF,IAAI,aAAa,GAAG;aAChB,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;aAC9B,kBAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;aACvC,kBAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,eAAe,CAAC,CAAC;aAChD,kBAAQ,CAAC,IAAI,CAAC,iBAAiB,EAAE,iBAAiB,CAAC,CAAC;aACpD,kBAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,qBAAqB,CAAC,CAAC;aAC5D,kBAAQ,CAAC,IAAI,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,CAAC;aACtD,kBAAkB;SACtB,CAAC,CAAC;SAEF;;YAEG;SACH,MAAM,CAAC,0BAA0B,GAAG;aAChC,MAAM,CAAC,IAAI,CAAC,gBAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;SACjD,CAAC,CAAC;SAEF,MAAM,CAAC,mBAAmB,GAAG,UAAS,MAAM;aACxC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;SAC/B,CAAC,CAAC;SAEF,MAAM,CAAC,6BAA6B,GAAG;aACnC,MAAM,CAAC,MAAM,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC;SACnH,CAAC,CAAC;SAEF,wEAAwE;SACxE,MAAM,CAAC,uBAAuB,GAAG;aAC7B,IAAI,IAAI,GAAG,KAAK,CAAC,qBAAqB,EAAE,CAAC;aACzC,MAAM,CAAC,gBAAM,EAAE,CAAC,GAAG,CAAC,gBAAM,CAAC,IAAI,CAAC,EAAE,gBAAM,EAAE,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,kEAAkE;SACxI,CAAC,CAAC;SAEL;;WAEE;SACF,MAAM,CAAC,4BAA4B,GAAG,UAAS,QAAQ;aACtD,IAAI,aAAa,GAAG,IAAI,KAAK,EAAE,CAAC;aAChC,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,UAAU,GAAG;iBACxC,aAAa,GAAG,aAAa,CAAC,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC,MAAM,CAAC,UAAU,IAAI;qBACnF,MAAM,CAAC,IAAI,IAAI,IAAI,CAAC,SAAS,KAAK,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC;iBAC7D,CAAC,CAAC,CACF,CAAC;aACH,CAAC,CAAC,CAAC;aAEH,EAAE,CAAC,CAAC,QAAQ,KAAK,UAAU,CAAC,EAAC;iBAC5B,MAAM,CAAC,0BAA0B,GAAG,aAAa,CAAC;aACnD,CAAC;aAAC,IAAI,CAAC,CAAC;iBACP,MAAM,CAAC,wBAAwB,GAAG,aAAa,CAAC;aACjD,CAAC;SACC,CAAC,CAAC;SAGL;;WAEE;SACF,MAAM,CAAC,yBAAyB,GAAG,UAAS,QAAQ;aAE7C,yBAAyB;aACzB,EAAE,CAAC,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC;iBAC7B,MAAM,CAAC,MAAM,CAAC,mBAAmB,CAAC;aACtC,CAAC;aAED,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC;iBACpC,MAAM,CAAC,MAAM,CAAC,qBAAqB,CAAC;aACxC,CAAC;aAED,YAAY;aACZ,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC;iBAC3C,EAAE,CAAC,CAAC,QAAQ,KAAK,UAAU,CAAC,CAAC,CAAC;qBACjB,MAAM,CAAC,MAAM,CAAC,0BAA0B,CAAC;iBAC7C,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACJ,MAAM,CAAC,MAAM,CAAC,wBAAwB,CAAC;iBAC3C,CAAC;aACL,CAAC;aAED,IAAI,CAAC,CAAC;iBACF,EAAE,CAAC,CAAC,QAAQ,KAAK,UAAU,CAAC,CAAC,CAAC;qBAC1B,MAAM,CAAC,oBAAoB,EAAE,CAAC;iBAClC,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACJ,MAAM,CAAC,kBAAkB,EAAE,CAAC;iBAChC,CAAC;aACL,CAAC;SACL,CAAC,CAAC;SAIF;;;YAGG;SACH,IAAI,YAAY,GAAG,UAAS,OAAO;aAC/B,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;aAC9C,MAAM,CAAC,OAAO,GAAG;iBACb,IAAI,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI;cAC7B,CAAC;SACN,CAAC,CAAC;SAIF;;;;YAIG;SACF,cAAc;SACjB;;;;aAII;SAEF,MAAM,CAAC,sBAAsB,GAAG;aAC5B,MAAM,CAAC,UAAU,CAAC,eAAe,GAAG,KAAK,CAAC,UAAU,CAAC,eAAe,CAAC;aACrE,KAAK,CAAC,UAAU,CAAC,eAAe,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,eAAe,CAAC;SACzE,CAAC,CAAC;SAEF,MAAM,CAAC,oBAAoB,GAAG;aAC1B,MAAM,CAAC,UAAU,CAAC,aAAa,GAAG,KAAK,CAAC,UAAU,CAAC,aAAa,CAAC;aACjE,KAAK,CAAC,UAAU,CAAC,aAAa,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,aAAa,CAAC;SACrE,CAAC,CAAC;SAEF,MAAM,CAAC,0BAA0B,GAAG;aAChC,KAAK,CAAC,0BAA0B,CAAC,MAAM,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE,MAAM,CAAC,aAAa,EAAE,MAAM,CAAC,YAAY,EAAE,UAAU,CAAC,eAAe,CAAC,CAAC;SAC3I,CAAC,CAAC;SAEF;;;;WAIE;SAEF;;;YAGG;SACH,MAAM,CAAC,6BAA6B,GAAG,UAAU,aAAa;aAC1D,KAAK,CAAC,4BAA4B,CAAC,aAAa,EAAE,KAAK,EAAE,cAAW,MAAM,CAAC,MAAM,EAAE,GAAC,EAAE,UAAU,CAAC,eAAe,CAAC,CAAC;SACtH,CAAC,CAAC;SAEF,MAAM,CAAC,kBAAkB,GAAG,UAAS,IAAI;aACrC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,QAAQ,IAAI,MAAM,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,UAAU,IAAI,MAAM,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,EAAC;iBACxI,MAAM,CAAC,IAAI,CAAC;aAChB,CAAC;aACD,MAAM,CAAC,KAAK,CAAC;SACjB,CAAC,CAAC;SAEF;;;;YAIG;SACH,MAAM,CAAC,oBAAoB,GAAG,UAAU,YAAY;aAEhD,MAAM,CAAC,qBAAqB,GAAG,IAAI,CAAC;aAEpC,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;iBACf,MAAM,CAAC,mBAAmB,GAAG,IAAI,KAAK,EAAE,CAAC;iBACzC,MAAM,CAAC,mBAAmB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;aAClD,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,MAAM,CAAC,mBAAmB,GAAG,IAAI,CAAC;aACtC,CAAC;aAED,MAAM,CAAC,OAAO,CAAC,oBAAoB,GAAG,IAAI,CAAC;SAC/C,CAAC,CAAC;SAEF;;;YAGG;SACH,MAAM,CAAC,sBAAsB,GAAG,UAAU,cAAc;aAEpD,MAAM,CAAC,mBAAmB,GAAG,IAAI,CAAC;aAElC,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;iBACjB,MAAM,CAAC,qBAAqB,GAAG,IAAI,KAAK,EAAE,CAAC;iBAC3C,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;aACtD,CAAC;aACD,IAAI,CAAC,CAAC;iBACF,MAAM,CAAC,qBAAqB,GAAG,IAAI,CAAC;aACxC,CAAC;aACD,MAAM,CAAC,OAAO,CAAC,sBAAsB,GAAG,IAAI,CAAC;SACjD,CAAC,CAAC;SAGF;;;;YAIG;SACH,MAAM,CAAC,iBAAiB,GAAG,UAAU,QAAQ,EAAE,UAAU,EAAE,QAAQ;aAE/D,IAAI,EAAE,CAAE,mBAAkB;aAE1B,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAC;iBACV,EAAE,CAAC,CAAC,OAAO,QAAQ,KAAK,UAAU,CAAC,CAAC,CAAC;qBACjC,EAAE,GAAG,QAAQ,CAAC;iBAClB,CAAC;aACL,CAAC;aAED,IAAI,iBAAiB,GAAG;iBACpB,gCAAgC;aACpC,CAAC,CAAC;aAEF,IAAI,IAAI,GAAG,UAAU,GAAG,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC;aACnD,IAAI,aAAa,GAAG,gBAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;aAEtD,IAAI,UAAU,GAAG,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC,EAAE,GAAG,QAAQ,CAAC,UAAU,CAAC;aAChF,KAAK,CAAC,iBAAiB,CAAC,QAAQ,EAAE,aAAa,EAAE,UAAU,EAAE,EAAE,EAAE,iBAAiB,CAAC,CAAC;SACxF,CAAC,CAAC;SAEF,MAAM,CAAC,kBAAkB,GAAG,UAAS,YAAY;aAC7C,MAAM,CAAC,YAAY,CAAC,SAAS,GAAG,CAAC,CAAC;SACtC,CAAC,CAAC;SAEF,MAAM,CAAC,iBAAiB,GAAG,UAAS,YAAY;aAC5C,MAAM,CAAC,YAAY,CAAC,SAAS,IAAI,CAAC,CAAC;SACvC,CAAC,CAAC;SAEF,MAAM,CAAC,oBAAoB,GAAG,UAAS,YAAY;aAC/C,MAAM,CAAC,YAAY,CAAC,SAAS,IAAI,CAAC,CAAC;SACvC,CAAC,CAAC;SAEF,MAAM,CAAC,gBAAgB,GAAG,UAAS,YAAY;aAC3C,MAAM,CAAC,YAAY,CAAC,SAAS,IAAI,CAAC,CAAC;SACvC,CAAC,CAAC;SAEF,MAAM,CAAC,gCAAgC,GAAG,UAAU,MAAM;aACtD,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;aAC3B,MAAM,CAAC;aACP;4DAC+C;SACnD,CAAC,CAAC;SAEF;;;;YAIG;SACF,aAAa;SACd,MAAM,CAAC,uBAAuB,GAAG,UAAU,MAAM;aAC7C,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;aAC3B,MAAM,CAAC;aACR;;gBAEG;SACN,CAAC,CAAC;SAEE;;;YAGG;SACH,uBAAwB,EAAI;aACxB,KAAK,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC;aACzB,gDAAgD;aAEhD,KAAK,CAAC,aAAa,GAAG,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aAE7C,mCAAe,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;iBAE7D,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;iBACpC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;iBAChC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;iBAClC,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;qBAC3B,EAAE,EAAE,CAAC;iBACT,CAAC;aACL,CAAC,CAAC,CAAC;SACP,CAAC;SAAA,CAAC;SACF,aAAa,EAAE,CAAC;KACxB,CAAC;EACA,CAAC,CAAC;;;;;;;;;;;;AC/qCH,kCAAmC;AACnC,kCAA8B;AAC9B,kCAAiC;AACjC,mCAAqC;AACrC,mCAAsC;AACtC,mCAAmC;AACnC,mCAAgC;AAChC,mCAAgC;AAChC,mCAA+B;;;;;;;;;ACR/B;;;;;;IAMG;AACH;KAAA;SACI;;;YAGG;SACH,OAAE,GAAG,IAAI,CAAC;SAEV,YAAO,GAAG,IAAI,CAAC;SACf;;;;;YAKG;SACH,gBAAW,GAAG,IAAI,CAAC;SACnB;;;YAGG;SACH,kBAAa,GAAG,IAAI,CAAC;SACrB;;;YAGG;SACH,mBAAc,GAAG,IAAI,CAAC;SAGtB;;YAEG;SACH,aAAQ,GAAG;aACP,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,sBAAsB,GAAG,IAAI,CAAC,WAAW,CAAC;SAC5F,CAAC,CAAC;SAEF;;;;;;YAMG;SACH,mBAAc,GAAG,UAAU,IAAI,EAAE,EAAE,EAAE,GAAG;aAEpC,IAAI,IAAI,GAAG,IAAI,CAAC;aAEhB,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;iBAE3B,IAAI,kBAAkB,GAAG,IAAI,KAAK,EAAE,CAAC;iBAErC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,UAAU;qBACzC,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,WAAW,KAAK,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;yBAC5D,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;qBACxC,CAAC;iBACL,CAAC,CAAC,CAAC;iBAEH,IAAI,CAAC,WAAW,GAAG,kBAAkB,CAAC;iBAEtC,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;qBAC3B,EAAE,EAAE,CAAC;iBACT,CAAC;iBAAC,IAAI;qBAAC,CAAC,OAAO,GAAG,KAAK,UAAU,CAAC;iBAClC,CAAC;qBACG,GAAG,EAAE,CAAC;iBACV,CAAC;aACL,CAAC;SACL,CAAC,CAAC;KACN,CAAC;KAAD,iBAAC;AAAD,EAAC;AAjEY,iCAAU;AAiEtB,EAAC;;;;;;;;;ACxEF;KAAA;SAKI,aAAQ,GAAG,KAAK,CAAC;KACrB,CAAC;KAAD,YAAC;AAAD,EAAC;AANY,uBAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAlB,wCAA2C;AAC3C,gDAAsC;AACtC,uCAAyB;AACzB,uCAAsD;AACtD,qCAAkC;AAElC;KA6BI;SApBA,aAAQ,GAAQ,KAAK,CAAC;SAwDtB,QAAG,GAAG;aACF,MAAM,EAAE,qBAAqB;UAChC,CAAC;SArCE,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;KAC1B,CAAC;KAED;;QAEG;KACH,wCAAqB,GAArB;SACI,IAAI,mBAAmB,GAAG,eAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SAExD,oCAAoC;SACpC,EAAE,CAAC,CAAC,mBAAmB,IAAI,CAAC,CAAC,CAAC,CAAC;aAC3B,eAAK,CAAC,SAAS,CAAC,MAAM,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC;SACnD,CAAC;KACL,CAAC;KAAA,CAAC;KAGF;;;QAGG;KACH,gCAAa,GAAb,UAAe,UAAU;SACrB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;KACtC,CAAC;KAAA,CAAC;KAEF;;;;;QAKG;KACH,mCAAgB,GAAhB,UAAkB,UAAU,EAAE,EAAE,EAAE,GAAG;SACjC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;KAC1D,CAAC;KAAA,CAAC;KAOF,uBAAI,GAAJ,UAAM,EAAE,EAAE,GAAG;SAET,IAAI,IAAI,GAAG,IAAI,CAAC;SAChB,IAAI,OAAO,GAAG,eAAK,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SAElC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;aACnB,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;SAClC,CAAC;SAED,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC;aAChB,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;iBACV,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;aAChC,CAAC;aACD,IAAI,CAAC,CAAC;iBACF,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;aACzB,CAAC;SACL,CAAC,CAAC,CAAC;KAEP,CAAC;KAAA,CAAC;KAEF;;;QAGG;KACH,qCAAkB,GAAlB;SACI,MAAM,CAAC,OAAO,IAAI,CAAC,SAAS,KAAK,WAAW,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC;KAC3E,CAAC;KAAA,CAAC;KAEF,0BAAO,GAAP;SACI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,OAAO,CAAC;KAClC,CAAC;KAAA,CAAC;KAEF,8BAAW,GAAX;SACI,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;KAC3B,CAAC;KAAA,CAAC;KAEF;;;;QAIG;KACH,gCAAa,GAAb,UAAe,SAAS;SACpB,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC;KAClG,CAAC;KAAA,CAAC;KAEF,8BAAW,GAAX,UAAa,SAAS;SAClB,IAAI,CAAC,KAAK,GAAG,SAAS,GAAG,WAAW,GAAG,OAAO,CAAC;KACnD,CAAC;KAAA,CAAC;KAEF,yBAAM,GAAN,UAAQ,EAAE,EAAE,GAAG;SACX,IAAI,GAAG,GAAG,kBAAkB,GAAG,IAAI,CAAC,EAAE,CAAC;SAEvC,IAAI,QAAQ,GAAG,IAAI,CAAC;SACpB,MAAM,CAAC,eAAK,CAAC,OAAO,EAAE,CAAC;aACnB,MAAM,EAAE,KAAK;aACb,GAAG,EAAE,GAAG;aACR,IAAI,EAAE,QAAQ;UACjB,CAAC,CAAC,IAAI,CAAC;aACJ,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;iBAC3B,EAAE,EAAE,CAAC;aACT,CAAC;SACL,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC;aAChB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;iBACN,GAAG,EAAE,CAAC;aACV,CAAC;SACL,CAAC,CAAC,CAAC;KACP,CAAC;KAAA,CAAC;KAEI,yBAAM,GAAZ;;;;;;;yBAEyB,qBAAM,eAAK,CAAC,OAAO,EAAE,CAAC;iCACnC,MAAM,EAAE,MAAM;iCACd,GAAG,EAAE,iBAAiB;iCACtB,IAAI,EAAE,IAAI;8BACb,CAAC;;yBAJM,IAAI,GAAK,UAIf,MAJU;yBAKZ,qBAAG,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;yBACvB,eAAK,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;yBAC/B,sBAAO,IAAI;;;yBAEX,OAAO,CAAC,KAAK,CAAC,GAAC,CAAC,CAAC;yBACjB,MAAM,GAAC,CAAC;;;;;MAEf;KAAA,CAAC;KAEF;;;;QAIG;KACH,uBAAI,GAAJ,UAAM,EAAE,EAAE,GAAG;SACT,IAAI,QAAQ,GAAG,IAAI,CAAC;SACpB,eAAI,CAAC,GAAG,CAAC,kBAAkB,GAAG,QAAQ,CAAC,EAAE,CAAC;cACrC,IAAI,CAAC,UAAU,GAAG;aACf,qBAAG,CAAC,MAAM,CAAC,IAAI,EAAE,uBAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;aAE5C,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;iBAC3B,EAAE,EAAE,CAAC;aACT,CAAC;SACL,CAAC,CAAC;cACD,KAAK,CAAC,UAAU,CAAC;aACd,EAAE,CAAC,CAAC,OAAO,GAAG,KAAK,UAAU,CAAC,CAAC,CAAC;iBAC5B,GAAG,CAAC,eAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;aAC7B,CAAC;SACL,CAAC,CAAC,CAAC;KACX,CAAC;KAAA,CAAC;KAEF;;;;;QAKG;KACH,6BAAU,GAAV,UAAY,SAAS,EAAE,EAAE,EAAE,GAAG;SAC1B,eAAK,CAAC,cAAc,CAAC,SAAS,EAAE,UAAU,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;KACzD,CAAC;KAAA,CAAC;KAGF;;;;;QAKG;KACH,yBAAM,GAAN,UAAQ,MAAM,EAAE,EAAE,EAAE,GAAG;SAEnB,IAAI,QAAQ,GAAG,IAAI,CAAC;SAEpB,IAAI,wBAAwB,GAAG;aAE3B,sCAAsC;aACtC,eAAK,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,aAAa;iBAC3C,EAAE,CAAC,CAAC,aAAa,CAAC,EAAE,KAAK,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;qBACnC,eAAK,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;iBAC1C,CAAC;aACL,CAAC,CAAC,CAAC;aAEH,EAAE,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;iBAC7B,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;aACtC,CAAC;SACL,CAAC,CAAC;SAEF,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;aACV,eAAI,CAAC,MAAM,CAAC,kBAAkB,GAAG,IAAI,CAAC,EAAE,CAAC;kBACpC,IAAI,CAAC,UAAU,CAAC;iBAEb,wBAAwB,EAAE,CAAC;iBAE3B,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;qBAC3B,EAAE,EAAE,CAAC;iBACT,CAAC;aACL,CAAC,CAAC;kBACD,KAAK,CAAC,UAAU,KAAK;iBAClB,EAAE,CAAC,CAAC,OAAO,GAAG,KAAK,UAAU,CAAC,CAAC,CAAC;qBAC5B,GAAG,CAAC,eAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;iBACjC,CAAC;aACL,CAAC,CAAC,CAAC;SACX,CAAC;SAAC,IAAI,CAAC,CAAC;aACJ,wBAAwB,EAAE,CAAC;aAE3B,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;iBAC3B,EAAE,EAAE,CAAC;aACT,CAAC;SACL,CAAC;KACL,CAAC;KAAA,CAAC;KAGF,yBAAM,GAAN;SAEI,IAAI,IAAI,GAAQ;aACZ,cAAc,EAAE,IAAI,CAAC,KAAK;aAC1B,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;aAC3B,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE;aAC9B,UAAU,EAAE,eAAK,CAAC,EAAE,CAAC,MAAM;aAC3B,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,WAAW;aACpC,WAAW,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE;aAC7B,iBAAiB,EAAE,gBAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,mBAAW,CAAC;aAC3D,oBAAoB,EAAE,IAAI,CAAC,WAAW;aACtC,cAAc,EAAE,IAAI,CAAC,KAAK;aAC1B,cAAc,EAAE,IAAI,CAAC,KAAK;aAC1B,0DAA0D;aAC1D,uFAAuF;aACvF,aAAa,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI;aACjC,aAAa,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI;aACjC,WAAW,EAAE,IAAI,CAAC,WAAW;UAChC,CAAC;SAEF,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;aACjB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;SACpC,CAAC;SAED;;YAEG;SAEH,MAAM,CAAC,IAAI,CAAC;KAChB,CAAC;KAAA,CAAC;KACN,eAAC;AAAD,EAAC;AAzQY,6BAAQ;AAyQpB,EAAC;AAEF;KAKI;SACI,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;KAClB,CAAC;KAEK,wBAAI,GAAV;;;;;;yBAEQ,SAAS,GAAG,EAAE,CAAC;yBACf,KAAK,GAAG,gBAAM,CAAC,eAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;yBAC3E,GAAG,GAAG,gBAAM,CAAC,eAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;yBACxF,IAAI,GAAG,IAAI,CAAC;yBAEhB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;6BACb,MAAM,gBAAC;yBAEX,eAAK,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,eAAK,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;yBAEtD,eAAe,GAAG,kBAAkB,GAAG,KAAK,CAAC,4BAA4B,EAAE,GAAG,GAAG,GAAG,KAAK,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;yBAEhH,EAAE,CAAC,CAAC,eAAK,CAAC,YAAY,EAAE,IAAI,eAAK,CAAC,KAAK,CAAC,CAAC,CAAC;6BACtC,eAAe,IAAI,eAAK,CAAC,KAAK,CAAC,EAAE,CAAC;yBACtC,CAAC;yBAAC,IAAI,CAAC,CAAC;6BACJ,eAAe,IAAI,KAAK,CAAC;yBAC7B,CAAC;yBAGD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;;;yBAEC,qBAAM,eAAK,CAAC,OAAO,EAAE,CAAC;iCACnC,MAAM,EAAE,KAAK;iCACb,GAAG,EAAE,eAAe;8BACvB,CAAC;;yBAHM,IAAI,GAAK,UAGf,MAHU;yBAIZ,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;yBACnC,IAAI,CAAC,GAAG,GAAG,WAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,qBAAG,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC;yBAC9D,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;yBACrB,sBAAO,SAAS,EAAC;;;yBAEjB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;yBACrB,MAAM,GAAC,CAAC;;;;;MAEf;KACL,gBAAC;AAAD,EAAC;AA7CY,+BAAS;;;;;;;ACjRtB;AACA;AACA;AACA;AACA,kC;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACTA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA;AACA,iCAAgC,aAAa;AAC7C;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA,gCAA+B,YAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACtIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAAyD,gBAAgB,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,kCAAkC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA,EAAC;AACD;;;;;;;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,+BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,+BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD;;;;;;;AClGA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACjBA,0C;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,MAAM;AAClB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;;ACnDA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,aAAa;AACxB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC,OAAO;AAC1C;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,SAAS,GAAG,SAAS;AAC5C,4BAA2B;AAC3B;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA,wCAAuC,OAAO;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1SA;;AAEA;AACA;AACA;AACA,oBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;;;;;;;ACVA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA,kDAAiD,gBAAgB;;AAEjE;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iDAAgD;AAChD;AACA;AACA,MAAK;AACL;AACA,EAAC;;AAED;AACA;AACA;AACA,iDAAgD;AAChD;AACA;AACA;AACA,MAAK;AACL;AACA,EAAC;;AAED;;;;;;;ACpFA;;AAEA;AACA;;AAEA,iCAAgC;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAwE;AACxE;AACA;AACA;AACA,wDAAuD;AACvD;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,QAAO,YAAY;AACnB;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA,EAAC;;AAED;;;;;;;;AC5FA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sCAAqC;;AAErC;AACA;AACA;;AAEA,4BAA2B;AAC3B;AACA;AACA;AACA,6BAA4B,UAAU;;;;;;;ACvLtC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;;;;;ACXA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA4C;AAC5C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;;;;;;;AChLA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxBA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;;;;;;AChBA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACnEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,eAAe;;AAEhC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;;;;;;ACpCA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;;;;;ACnEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACnCA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,yCAAwC;AACxC,QAAO;;AAEP;AACA,2DAA0D,wBAAwB;AAClF;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,iCAAgC;AAChC,8BAA6B,aAAa,EAAE;AAC5C;AACA;AACA,IAAG;AACH;;;;;;;ACpDA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;ACnDA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAA+B;AAC/B,wCAAuC;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;;;;;;;AC9EA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,cAAc;AACzB,YAAW,MAAM;AACjB,YAAW,eAAe;AAC1B,cAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;;;;;;ACnBA;;AAEA;AACA;AACA;;;;;;;ACJA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACbA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;;;;;;;ACXA;;AAEA;AACA;AACA;AACA;AACA,YAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;AClBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACxDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA,YAAW,SAAS;AACpB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1BA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD;;;;;;;ACxCA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACjBA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACxBA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACjBA;AACA;AACA;AACA,oCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,mCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,gCAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,MAAK;AACL;AACA;AACA,cAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,aAAY;AACZ,uBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC;AACvC,mCAAkC,SAAS;AAC3C,mCAAkC,WAAW,UAAU;AACvD,0CAAyC,cAAc;AACvD;AACA,8GAA6G,OAAO,UAAU;AAC9H,iFAAgF,iBAAiB,OAAO;AACxG,yDAAwD,gBAAgB,QAAQ,OAAO;AACvF,+CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,kCAAiC;AACjC;AACA;AACA,UAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,oCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iEAAgE,kBAAkB,EAAE;AACpF,sBAAqB;AACrB,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,gBAAgB;AAChD,+CAA8C,6CAA6C,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD,0BAA0B,EAAE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC9DA,0C;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,MAAM;AAClB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;;ACnDA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,aAAa;AACxB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC,OAAO;AAC1C;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,SAAS,GAAG,SAAS;AAC5C,4BAA2B;AAC3B;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA,wCAAuC,OAAO;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC9SA;;AAEA;AACA;AACA;AACA,oBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACpBA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA,kDAAiD,gBAAgB;AACjE;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iDAAgD;AAChD;AACA;AACA,MAAK;AACL;AACA,EAAC;;AAED;AACA;AACA;AACA,iDAAgD;AAChD;AACA;AACA;AACA,MAAK;AACL;AACA,EAAC;;AAED;;;;;;;ACrFA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAwE;AACxE;AACA;AACA;AACA,wDAAuD;AACvD;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,QAAO,YAAY;AACnB;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA,EAAC;;AAED;;;;;;;;AC3FA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;;;;;ACXA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA4C;AAC5C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;;;;;;;ACnLA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzBA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;;;;;;ACjBA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACnEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,eAAe;;AAEhC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;;;;;;ACpCA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;;;;;ACnEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACnCA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,yCAAwC;AACxC,QAAO;;AAEP;AACA,2DAA0D,wBAAwB;AAClF;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,iCAAgC;AAChC,8BAA6B,aAAa,EAAE;AAC5C;AACA;AACA,IAAG;AACH;;;;;;;ACpDA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;ACnDA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAA+B;AAC/B,wCAAuC;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;;;;;;;AC9EA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,cAAc;AACzB,YAAW,MAAM;AACjB,YAAW,eAAe;AAC1B,cAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;;;;;;ACnBA;;AAEA;AACA;AACA;;;;;;;ACJA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACbA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;;;;;;ACbA;;AAEA;AACA;AACA;AACA;AACA,YAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;AClBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACxDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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ACJ;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC;AACnC;AACA,MAAK,OAAO;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA4D;AAC5D,2DAA0D,gBAAgB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAiF,GAAG,yBAAyB;AAC7G;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA,IAAG;AACH;;;;;;;AC3LA,8BAA6B,mDAAmD;;;;;;;ACAhF;;;;;;;;;ACAA,kBA4JO;;AA5JP,wCAAuE;AACvE,gDAA4D;AAC5D,+CAAwD;AACxD,uCAAsC;AAGzB,8BAAqB,GAAG,YAAE,CAAC,UAAU,CAAC,uBAAuB,EACtE,CAAC,QAAQ,EAAE,UAAU,EAAE,YAAY,EAAE,UAAC,MAAM,EAAE,QAAQ,EAAE,UAAU;SAE1D,IAAI,EAAE,GAAG,KAAI,CAAC;SAEd,EAAE,CAAC,KAAK,GAAG,CAAC,EAAC,IAAI,EAAG,UAAU,EAAC,EAAC,EAAC,IAAI,EAAG,UAAU,EAAC,CAAC,CAAC;SACrD,IAAI,EAAE,CAAC;SACP;aACI,I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","file":"./application.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8cdaba772d190c21238b","import { angular, ng, model, moment, _, calendar, Model, routes } from 'entcore';\r\nimport { DiaryController } from './controller';\r\nimport * as controllers from './controllers/index';\r\nimport * as directives from './directives/index';\r\nimport * as filters from './filters/index';\r\nimport {InitBuild} from './model';\r\nimport {AudienceService} from \"./services/audiences.service\";\r\ndeclare let module: any;\r\n\r\nfor (let controller in controllers) {\r\n    ng.controllers.push(controllers[controller]);\r\n}\r\n\r\nfor (let directive in directives) {\r\n    ng.directives.push(directives[directive]);\r\n}\r\n\r\nfor (let filter in filters) {\r\n    ng.filters.push(filters[filter]);\r\n}\r\nmodel.build = InitBuild;\r\n\r\nng.controllers.push(DiaryController);\r\n\r\nroutes.define(($routeProvider) => {\r\n    $routeProvider\r\n    //show history\r\n        .when('/showHistoryView', {\r\n            action: 'showHistoryView'\r\n        })\r\n        // manage visa\r\n        .when('/manageVisaView/:teacherId', {\r\n            action: 'manageVisaView'\r\n        })\r\n        // go to create new lesson view\r\n        .when('/progressionManagerView/:selectedProgressionId', {\r\n            action: 'progressionManagerView'\r\n        })\r\n        .when('/progressionEditLesson/:progressionId/:editProgressionLessonId', {\r\n            action: 'editLessonView'\r\n        })\r\n        // go to create new lesson view\r\n        .when('/createLessonView/:timeFromCalendar', {\r\n            action: 'createLessonView'\r\n        })\r\n        // go to create/update homework view\r\n        .when('/createHomeworkView', {\r\n            action: 'createHomeworkView'\r\n        })\r\n        .when('/editLessonView/:idLesson', {\r\n            action: 'editLessonView'\r\n        })\r\n        .when('/showLessonView/:idLesson', {\r\n            action: 'showLessonView'\r\n        })\r\n        // opens lesson and set default tab view to homeworks one\r\n        .when('/editLessonView/:idLesson/:idHomework', {\r\n            action: 'editLessonView'\r\n        })\r\n        .when('/editHomeworkView/:idHomework', {\r\n            action: 'editHomeworkView'\r\n        })\r\n        .when('/editHomeworkView/:idHomework/:idLesson', {\r\n            action: 'editHomeworkView'\r\n        })\r\n        .when('/calendarView/:mondayOfWeek', {\r\n            action: 'calendarView'\r\n        })\r\n        .when('/listView', {\r\n            action: 'listView'\r\n        })\r\n        .when('/mainView', {\r\n            action: 'mainView'\r\n        })\r\n        // default view\r\n        .otherwise({\r\n            action: 'calendarView'\r\n        });\r\n});\n\n\n// WEBPACK FOOTER //\n// ./ts/app.ts","module.exports = entcore;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"entcore\"\n// module id = 1\n// module chunks = 0 1","import { ng, angular, model, moment, _, notify, template } from 'entcore';\r\nimport { syncLessonsAndHomeworks, syncHomeworks} from './tools';\r\n\r\n\r\nimport { Homework, Lesson, PedagogicItem } from './models/';\r\nimport { CourseService } from \"./services/courses.service\";\r\nimport { LessonService } from \"./services/lessons.service\";\r\nimport { SecureService } from \"./services/secure.service\";\r\nimport * as tools from './tools';\r\nimport {AudienceService} from \"./services/audiences.service\";\r\n\r\n\r\n/**\r\n *\r\n * @param $scope\r\n * @param template\r\n * @param model\r\n * @param route\r\n * @param $location\r\n * @constructor\r\n */\r\n\r\nexport let DiaryController = ng.controller('DiaryController', [\r\n    '$scope', '$rootScope', 'model', 'route', '$location', '$window', '$sce',\r\n    function ($scope, $rootScope, model, route, $location, $window, $sce) {\r\n    model.CourseService = CourseService;\r\n    model.LessonService = LessonService;\r\n    $scope.constants = tools.CONSTANTS;\r\n    $scope.RIGHTS = tools.CONSTANTS.RIGHTS;\r\n    $rootScope.model = model;\r\n\r\n    $rootScope.currentRightPanelVisible = undefined ;//= 'test';\r\n\r\n    $rootScope.$on('edit-homework',(_,data)=>{\r\n        window.location.href = window.location.host+'/diary#/editHomeworkView/' + data.id;\r\n        //$scope.openHomeworkView (data);\r\n    });\r\n\r\n\r\n    $scope.currentErrors = [];\r\n    if (!model.filters){\r\n        model.filters = {};\r\n    }\r\n    $scope.data = {\r\n        tabSelected: 'lesson'\r\n    };\r\n\r\n    $scope.tabs = {\r\n        createLesson: 'lesson'\r\n    };\r\n\r\n    $rootScope.redirect = function (path) {\r\n        $location.path(path);\r\n    };\r\n\r\n    $rootScope.trusthtml = function(txt){\r\n        return $sce.trustAsHtml(txt);\r\n    };\r\n\r\n    $rootScope.validationError = function(e) {\r\n        if (typeof e !== 'undefined') {\r\n            notify.error(e.error);\r\n            $rootScope.currentErrors=[];\r\n            $rootScope.currentErrors.push(e);\r\n            $rootScope.$apply();\r\n        }\r\n    };\r\n\r\n    $scope.lessonDescriptionIsReadOnly = false;\r\n    $scope.homeworkDescriptionIsReadOnly = false;\r\n\r\n    $scope.calendarLoaded = false;\r\n    /**\r\n     * Used when refreshing calendar\r\n     * @type {boolean}\r\n     */\r\n    $scope.showCal = false;\r\n    /**\r\n     * If false hides the grid/content of calendar,\r\n     * only remains the days at top\r\n     * @type {boolean}\r\n     */\r\n    $scope.showCalGrid = true;\r\n    // for static access to some global function\r\n    $scope.newLesson = new Lesson();\r\n    $scope.newHomework = new Homework();\r\n    $scope.newPedagogicItem = new PedagogicItem();\r\n\r\n\t// variables for show list\r\n\t$scope.pedagogicLessonsSelected \t= new Array();\r\n\t$scope.pedagogicHomeworksSelected \t= new Array();\r\n\r\n    $scope.getStaticItem = function(itemType) {\r\n        if ($scope.display.showList == true) {\r\n            $scope.newPedagogicItem.type_item = itemType;\r\n            return $scope.newPedagogicItem;\r\n        } else if (itemType === \"lesson\") {\r\n            return $scope.newLesson;\r\n        } else {\r\n            return $scope.newHomework;\r\n        }\r\n    };\r\n\r\n    $scope.confirmPanel = {\r\n        item: undefined\r\n    };\r\n\r\n    $scope.display = {\r\n        showPanel: false,\r\n        showShareLessonPanel: false,\r\n        showShareHomeworkPanel: false,\r\n        showList: false,\r\n        hideHomeworkPanel: false,\r\n        hideCalendar : false\r\n    };\r\n\r\n\r\n\r\n    $scope.lessons = model.lessons;\r\n    $scope.audiences = model.audiences;\r\n    $scope.subjects = model.subjects;\r\n    $scope.homeworkTypes = model.homeworkTypes;\r\n    $scope.homeworks = model.homeworks;\r\n    $scope.homeworksLoad = model.homeworksLoad;\r\n    $scope.childs = model.childs;\r\n    $scope.child = model.child;\r\n    $scope.pedagogicDays = model.pedagogicDays;\r\n\r\n    // Says whether or not current user can edit homework & lesson\r\n    $scope.isLessonHomeworkEditable = model.canEdit();\r\n\r\n    // Says whether or not current user is a teacher\r\n    $scope.isUserTeacher = model.isUserTeacher();\r\n\r\n    // Says whether or not current user is a parent\r\n    $scope.isUserParent = model.isUserParent();\r\n\r\n    $scope.searchForm = model.searchForm;\r\n\r\n    // variable used to track number of call back calls (see publishCB)\r\n    $scope.cbCount = 0;\r\n\r\n    $scope.selectedDueDate = undefined; // date selected in list view. It can allow to init homework on a different due_date.\r\n\r\n    route({\r\n        showHistoryView:function(params){\r\n            template.open('main', 'show-history');\r\n        },\r\n        manageVisaView: function (params) {\r\n            template.open('main', 'visa-manager');\r\n        },\r\n        progressionEditLesson:function(params){\r\n          template.open('main', 'progression-edit-lesson');\r\n        },\r\n        progressionManagerView: function (params) {\r\n            template.open('main', 'progression-manager');\r\n        },\r\n        createLessonView: function (params) {\r\n                //$scope.lesson = null;\r\n                $scope.lessonDescriptionIsReadOnly = false;\r\n                $scope.homeworkDescriptionIsReadOnly = false;\r\n                //$scope.openLessonView(null, params);\r\n\r\n                template.open('main', 'main');\r\n                if (SecureService.hasRight(tools.CONSTANTS.RIGHTS.CREATE_LESSON)){\r\n                  template.open('main-view', 'create-lesson');\r\n              }\r\n        },\r\n        createHomeworkView: function () {\r\n            $scope.homework = null;\r\n            $scope.homeworkDescriptionIsReadOnly = false;\r\n            $scope.openHomeworkView(null);\r\n        },\r\n        editLessonView: function(params) {\r\n            template.open('main', 'main');\r\n            if (SecureService.hasRight(tools.CONSTANTS.RIGHTS.CREATE_LESSON)){\r\n              template.open('main-view', 'create-lesson');\r\n            }else{\r\n                template.open('main-view', 'view-lesson');\r\n            }\r\n        },\r\n        showLessonView: function(params) {\r\n            template.open('main', 'main');\r\n            template.open('main-view', 'view-lesson');\r\n        },\r\n        editHomeworkView: function(params) {\r\n            loadHomeworkFromRoute(params);\r\n        },\r\n        calendarView: function (params) {\r\n            template.open('main', 'main');\r\n            template.open('main-view', 'calendar');\r\n            template.open('daily-event-details', 'daily-event-details');\r\n            model.selectedViewMode = '/diary/public/template/calendar/calendar-view.template.html';\r\n        },\r\n        listView: function(){\r\n            template.open('main', 'main');\r\n            template.open('main-view', 'calendar');\r\n            model.selectedViewMode = '/diary/public/template/calendar/list-view.template.html';\r\n        },\r\n        mainView: function(){\r\n            if ($scope.display.showList) {\r\n                $scope.goToListView(null);\r\n            } else {\r\n                $scope.goToCalendarView(null);\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    $scope.setLessonDescriptionMode = function(homeworkId) {\r\n        if ($scope.lessonDescriptionIsReadOnly) {\r\n            $scope.lessonDescriptionIsReadOnly = false;\r\n        }\r\n        else {\r\n            $scope.lessonDescriptionIsReadOnly = true;\r\n        }\r\n    };\r\n\r\n\r\n\t/**\r\n     * Permet de switcher entre l'aperçu  et l'édition de la description d'un devoir d'une leçon\r\n     */\r\n\t$scope.changeHomeworkDescriptionMode = function(homeworkId, apercu) {\r\n\t\tvar editor = $('#edit_' + homeworkId);\r\n\t\tvar ro = $('#descr_' + homeworkId);\r\n\t\tvar btnApercu = $('#btn_apercu_' + homeworkId);\r\n\t\tvar btnEdit = $('#btn_edit_' + homeworkId);\r\n\r\n\t\tif (apercu) {\r\n\t\t\teditor.hide();\r\n\t\t\tbtnApercu.hide();\r\n\t\t\tro.show();\r\n\t\t\tbtnEdit.show();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tro.hide();\r\n\t\t\tbtnEdit.hide();\r\n\t\t\teditor.show();\r\n\t\t\tbtnApercu.show();\r\n\t\t}\r\n  };\r\n\r\n    /**\r\n     * Permet d'afficher un aperçu de la description d'une leçon en readonly\r\n     */\r\n    $scope.setLessonDescriptionMode = function() {\r\n        if ($scope.lessonDescriptionIsReadOnly) {\r\n            $scope.lessonDescriptionIsReadOnly = false;\r\n        }\r\n        else {\r\n            $scope.lessonDescriptionIsReadOnly = true;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Permet d'afficher un aperçu de la description d'un TAF en readonly\r\n     */\r\n    $scope.setHomeworkDescriptionMode = function() {\r\n        if ($scope.homeworkDescriptionIsReadOnly) {\r\n            $scope.homeworkDescriptionIsReadOnly = false;\r\n        }\r\n        else {\r\n            $scope.homeworkDescriptionIsReadOnly = true;\r\n        }\r\n    };\r\n\r\n\r\n    // Navigation\r\n    $scope.showList = function() {\r\n        $scope.display.showList = true;\r\n        if($scope.isUserTeacher) {\r\n            model.searchForm.initForTeacher();\r\n        } else {\r\n            model.searchForm.initForStudent();\r\n        }\r\n\r\n        $scope.selectedDueDate = undefined;\r\n        model.pedagogicDays.syncPedagogicItems($scope.openListView, $rootScope.validationError);\r\n    };\r\n\r\n    $scope.openListView = function () {\r\n        if(!$scope.isUserTeacher) {\r\n            model.initSubjects();\r\n        } else {\r\n            model.initSubjects();\r\n        }\r\n        template.open('main', 'main');\r\n        template.open('main-view', 'list-view');\r\n        $scope.$apply();\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * @param pedagogicItem\r\n     * @param newWindow if true will open item detail in new windows else in same window\r\n     */\r\n    $scope.goToItemDetail = function(pedagogicItem, newWindow) {\r\n        var url = \"\";\r\n\r\n        if (pedagogicItem.type_item === 'lesson') {\r\n\r\n            url = pedagogicItem.locked ? \"/showLessonView/\" + pedagogicItem.id + \"/\" : \"/editLessonView/\" + pedagogicItem.id + \"/\";\r\n        } else {\r\n            // open lesson view if homework is attached to a lesson\r\n            if (pedagogicItem.lesson_id) {\r\n                // set default tab to homework tab\r\n                $scope.tabs.createLesson = 'homeworks';\r\n                url = \"/editLessonView/\" + pedagogicItem.lesson_id + \"/\" + pedagogicItem.id;\r\n            } else {\r\n                url = \"/editHomeworkView/\" + pedagogicItem.id;\r\n            }\r\n        }\r\n\r\n        if(newWindow){\r\n            $window.open('/diary#' + url);\r\n        } else {\r\n            $location.url(url);\r\n        }\r\n\r\n    };\r\n\r\n    //list-view interactions\r\n    $scope.selectDay = function(day) {\r\n        model.unselectDays();\r\n        day.selected = true;\r\n        $scope.selectedDueDate = moment(day.dayName, \"dddd DD MMMM YYYY\");\r\n    };\r\n\r\n    $rootScope.back=function(){\r\n      $window.history.back();\r\n    };\r\n\r\n    var loadHomeworkFromRoute = function(params) {\r\n        // try find homework in current week homeworks cache\r\n        var homework = model.homeworks.findWhere({ id: parseInt(params.idHomework)});\r\n\r\n        if (homework != null) {\r\n            $scope.homeworkDescriptionIsReadOnly = false;\r\n            $scope.openHomeworkView(homework);\r\n        }\r\n        // load from db\r\n        else {\r\n            homework = new Homework();\r\n            homework.id = parseInt(params.idHomework);\r\n\r\n            homework.load(function(){\r\n                $scope.homeworkDescriptionIsReadOnly = false;\r\n                $scope.openHomeworkView(homework, params);\r\n            }, function(cbe){\r\n                notify.error(cbe.message);\r\n            });\r\n        }\r\n    };\r\n\r\n\r\n    $scope.openHomeworkView = function(homework, params){\r\n\r\n        if (homework) {\r\n            if (!$scope.homework) {\r\n                $scope.homework = new Homework();\r\n            }\r\n\r\n            $scope.homework.updateData(homework);\r\n            $scope.newItem = {\r\n                date: $scope.homework.date\r\n            };\r\n        } else {\r\n            var dueDate = $scope.selectedDateInTheFuture();\r\n            initHomework(dueDate);\r\n        }\r\n\r\n        $scope.showHomeworksLoad($scope.homework, null);\r\n\r\n        template.open('main', 'main');\r\n        if (!$scope.isLessonHomeworkEditable){\r\n            template.open('main-view', 'view-homework');\r\n        }\r\n        else{\r\n            template.open('main-view', 'create-homework');\r\n            template.open('homeworks-load', 'homeworks-load');\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Switch to main view (list or calendar)\r\n     * @param cb Callback function\r\n     */\r\n    $scope.goToMainView = function (cb) {\r\n        $location.path('/mainView');\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Go to list view\r\n     * @param cb\r\n     */\r\n    $scope.goToListView = function (cb) {\r\n        console.warn('reprecated');\r\n        return;\r\n        /*//TODO delete\r\n        $location.path('/listView');*/\r\n    };\r\n\r\n    /**\r\n     * Switch to calendar view\r\n     * @param firstMonday First monday formatted as DD/MM/YYYY'\r\n     * @param cb Callback function\r\n     */\r\n    $scope.goToCalendarView = function (firstMonday, cb) {\r\n\r\n        var calendarViewPath = '/calendarView';\r\n\r\n        if (typeof firstMonday != 'undefined' && firstMonday != null) {\r\n            calendarViewPath += '/' + firstMonday;\r\n        } else {\r\n            if (model.calendar && model.calendar.week) {\r\n                calendarViewPath += '/' + moment().week(model.calendar.week).weekday(0).format(tools.CONSTANTS.CAL_DATE_PATTERN);\r\n            } else {\r\n                calendarViewPath += '/' + moment().weekday(0).format(tools.CONSTANTS.CAL_DATE_PATTERN);\r\n            }\r\n        }\r\n\r\n        $location.path(calendarViewPath);\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Deletes selected items (lessons or homeworks)\r\n     * in calendar view from database\r\n     */\r\n    $scope.deleteSelectedItems = function () {\r\n        var selectedLessons = $scope.getSelectedPedagogicItems('lesson');\r\n        var selectedHomeworks = $scope.getSelectedPedagogicItems('homework');\r\n\r\n        if ((selectedLessons.length + selectedHomeworks.length) === 0) {\r\n            notify.error('daily.nohomeworkorlesson.selected');\r\n            return;\r\n        }\r\n\r\n        var selectHomeworksToBeDeleted = function (selectedHomeworks, selectedLessonsId) {\r\n            return selectedHomeworks.filter(function (homework) {\r\n                return homework.lesson_id == null || !_.contains(selectedLessonsId, homework.lesson_id);\r\n            });\r\n        };\r\n\r\n        var postDelete = function(){\r\n            notify.info('item.deleted');\r\n            $scope.closeConfirmPanel();\r\n            $rootScope.$broadcast('refresh-list');\r\n            $scope.$apply();\r\n        };\r\n\r\n        var deleteHomeworks = function(){\r\n            $scope.getStaticItem('homework').deleteList(homeworksToDelete, postDelete,\r\n                // calback error function\r\n                function (cbe) {notify.error(cbe.message)}\r\n            );\r\n        };\r\n\r\n        // remove pending delete homeworks\r\n        // ever embedded in selected pending delete lessons\r\n        var lessonIds = model.getItemsIds(selectedLessons);\r\n        var homeworksToDelete = selectHomeworksToBeDeleted(selectedHomeworks, lessonIds);\r\n\r\n        // note: associated homeworks are automatically deleted\r\n        // sql delete cascade\r\n        if (selectedLessons.length > 0) {\r\n            $scope.getStaticItem('lesson').deleteList(selectedLessons,\r\n                function () {\r\n                    if (homeworksToDelete.length > 0) {\r\n                        deleteHomeworks();\r\n                    } else {\r\n                        postDelete();\r\n                    }\r\n                },\r\n                // calback error function\r\n                function (cbe) {\r\n                    notify.error(cbe.message)\r\n                }\r\n            );\r\n        } else {\r\n            deleteHomeworks();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Open selected lesson or homework\r\n     */\r\n    $scope.editSelectedItem = function () {\r\n\r\n        var selectedLessons = $scope.getSelectedPedagogicItems('lesson');\r\n        var selectedLesson = selectedLessons.length > 0 ? selectedLessons[0] : null;\r\n\r\n        var selectedHomeworks = $scope.getSelectedPedagogicItems('homework');\r\n        var selectedHomework = selectedHomeworks.length > 0 ? selectedHomeworks[0] : null;\r\n\r\n        if (selectedHomework && selectedLesson) {\r\n            notify.error('Only one homework or lesson must be selected');\r\n            return;\r\n        }\r\n\r\n        if (selectedLesson) {\r\n            $rootScope.redirect('/editLessonView/' + selectedLesson.id + '/');\r\n        } else if (selectedHomework) {\r\n            // open lesson view if homework is attached to a lesson\r\n            if (selectedHomework.lesson_id) {\r\n                // set default tab to homework tab\r\n                $scope.tabs.createLesson = 'homeworks';\r\n                $rootScope.redirect('/editLessonView/' + selectedHomework.lesson_id + '/' + selectedHomework.id);\r\n            } else {\r\n                $rootScope.redirect('/editHomeworkView/' + selectedHomework.id);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Create homework and publishes it\r\n     * @param homework Homework being created\r\n     * @param isPublish\r\n     * @param goMainView\r\n     */\r\n    $scope.createAndPublishHomework = function (homework, isPublish, goMainView) {\r\n        $scope.createOrUpdateHomework(false, function () {\r\n            $scope.publishHomeworkAndGoCalendarView(homework, isPublish);\r\n        });\r\n    };\r\n\r\n\r\n    /**\r\n     * un/Publish selected lessons\r\n     */\r\n    $scope.publishSelectedLessons = function (isPublish) {\r\n        $scope.currentErrors = [];\r\n        var notifyKey = isPublish ? 'item.published' : 'item.unpublished';\r\n        return $scope.publishLessons($scope.getSelectedPedagogicItems('lesson'), isPublish, notifyKey);\r\n    };\r\n\r\n    /**\r\n     * Publishes or unpublishes lesson and go back to main view\r\n     * @param lesson Lesson\r\n     * @param isPublish if true publishes lesson else un-publishes it\r\n     */\r\n    $scope.publishLessonAndGoCalendarView = function (lesson, isPublish) {\r\n        var lessons = [];\r\n        lessons.push(lesson);\r\n        var notifyKey = isPublish ? 'lesson.published' : 'lesson.unpublished';\r\n        return $scope.publishLessons(lessons, isPublish, notifyKey).then(()=>{\r\n            $scope.goToMainView();\r\n        });\r\n    };\r\n\r\n    $scope.publishLesson = function (lesson, isPublish) {\r\n        var lessons = [];\r\n        lessons.push(lesson);\r\n        var notifyKey = isPublish ? 'lesson.published' : 'lesson.unpublished';\r\n        return $scope.publishLessons(lessons, isPublish, notifyKey);\r\n    };\r\n\r\n    /**\r\n     * Publish lessons\r\n     * @param lessons Array of lessons to publish or unpublish\r\n     * @param isPublish if true publishes the lessons else unpublishes them\r\n     * @param cb Callback function\r\n     * which is lesson id to delete\r\n     */\r\n    $scope.publishLessons = function (lessons, isPublish, notifyKey, cb) {\r\n        $scope.currentErrors = [];\r\n        $scope.processingData = true;\r\n\r\n        return model.publishLessons({ids:model.getItemsIds(lessons)}, isPublish, publishCB(lessons, isPublish, notifyKey, cb), function (e) {\r\n            $scope.processingData = false;\r\n            $rootScope.validationError(e);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Publishes or unpublishes homework and go back to main view\r\n     * @param homework Homework\r\n     * @param isPublish if true publishes homework else un-publishes it\r\n     */\r\n    $scope.publishHomeworkAndGoCalendarView = function (homework, isPublish) {\r\n        var homeworks = [];\r\n        homeworks.push(homework);\r\n        var notifyKey = isPublish ? 'item.published' : 'item.unpublished';\r\n        $scope.publishHomeworks(homeworks, isPublish, notifyKey).then(()=>{\r\n            $scope.goToMainView();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Publish or un-publishes homeworks\r\n     * @param homeworks Array of homeworks to publish or unpublish\r\n     * @param isPublish If true publishes lesson else unpublishes it\r\n     * @param cb Callback function\r\n     */\r\n    $scope.publishHomeworks = function (homeworks, isPublish, cb) {\r\n        $scope.currentErrors = [];\r\n        $scope.processingData = true;\r\n\r\n        var notifyKey = isPublish ? 'item.published' : 'item.unpublished';\r\n        return model.publishHomeworks({ids:model.getItemsIds(homeworks)}, isPublish, publishCB(homeworks, isPublish, notifyKey, cb), function (e) {\r\n            $scope.processingData = false;\r\n            $rootScope.validationError(e);\r\n        });\r\n\r\n    };\r\n\r\n    /**\r\n     * Callback method after publishing a lesson, homework or mixed list of items\r\n     * @param list items to publish\r\n     * @param toPublish If true publishes lesson else unpublishes it\r\n     * @param notifyKey i18n key used to notify the user at the end of processing\r\n     * @param cb calback function\r\n     */\r\n    var publishCB = function (list, toPublish, notifyKey, cb?) {\r\n        list.forEach(function (item) {\r\n            item.changeState(toPublish);\r\n            item.selected=false;\r\n        });\r\n\r\n        $scope.cbCount--;\r\n        $scope.closeConfirmPanel();\r\n\r\n        if ($scope.cbCount <= 0 ){\r\n            $scope.cbCount = 0; // can't let cbCount go on negative to impact future calls.\r\n            notify.info(notifyKey);\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * Load homeworks for current lesson being edited\r\n     * @param cb Callback function\r\n     */\r\n    $scope.loadHomeworksForCurrentLesson = function (cb) {\r\n        console.warn(\"deprecated\");\r\n        return;\r\n    };\r\n\r\n    // Date functions\r\n    $scope.formatDate = function(date) {\r\n        return $scope.formatMoment(moment(date));\r\n    };\r\n\r\n    $scope.formatMoment = function(moment) {\r\n        return moment.lang('fr').format('DD/MM/YYYY');\r\n    };\r\n\r\n    $scope.formatTime = function(time) {\r\n        return moment(time).lang('fr').format('H:mm');\r\n    };\r\n\r\n    /**\r\n     * Close confirmation panel\r\n     */\r\n    $scope.closeConfirmPanel = function () {\r\n\r\n        $scope.processingData = false;\r\n        $scope.display.showPanel = false;\r\n        template.close('lightbox');\r\n    };\r\n\r\n    /**\r\n     * Display confirmation panel\r\n     * @param panelContent Html confirm panel file\r\n     * @param item Optional item\r\n     */\r\n    $scope.showConfirmPanel = function (panelContent, item) {\r\n        template.open('lightbox', panelContent);\r\n        $scope.display.showPanel = true;\r\n        $scope.confirmPanel.item = item;\r\n    };\r\n\r\n    $rootScope.showConfirmPanel = $scope.showConfirmPanel;\r\n\r\n\r\n    /**\r\n     * Test in calendar view if there are one lesson\r\n     * or one homework only selected (not both lessons and homeworks)\r\n     * @returns {boolean}\r\n     */\r\n    $scope.isOneHomeworkOrLessonStriclySelected = function () {\r\n        return ($scope.getSelectedPedagogicItems('lesson').length + $scope.getSelectedPedagogicItems('homework').length) == 1;\r\n    };\r\n\r\n\r\n    /**\r\n     * Get selected items from calendar (lessons and homeworks)\r\n     * and tidy them within un/publishable state\r\n     */\r\n    var getPublishableItemsSelected = function () {\r\n\r\n        var publishableSelectedLessons = [];\r\n        var unPublishableSelectedLessons = [];\r\n        var noStateChangeLessons = [];\r\n\r\n        var publishableSelectedHomeworks = [];\r\n        var unPublishableSelectedHomeworks = [];\r\n        var noStateChangeHomeworks = []; // eg.: homework attached to a lesson\r\n\r\n        $scope.getSelectedPedagogicItems('lesson').forEach(function (lesson) {\r\n            if (lesson.isPublishable(true)) {\r\n                publishableSelectedLessons.push(lesson);\r\n            } else if (lesson.isPublishable(false)) {\r\n                unPublishableSelectedLessons.push(lesson);\r\n            } else {\r\n                noStateChangeLessons.push(lesson);\r\n            }\r\n        });\r\n\r\n        // only free homeworks can be published/unpublished\r\n        $scope.getSelectedPedagogicItems('homework').forEach(function (homework) {\r\n            if (homework.isPublishable(true)) {\r\n                publishableSelectedHomeworks.push(homework);\r\n            } else if (homework.isPublishable(false)) {\r\n                unPublishableSelectedHomeworks.push(homework);\r\n            } else {\r\n                noStateChangeHomeworks.push(homework);\r\n            }\r\n        });\r\n\r\n        return {\r\n            publishableSelectedLessons: publishableSelectedLessons,\r\n            unPublishableSelectedLessons: unPublishableSelectedLessons,\r\n            noStateChangeLessons: noStateChangeLessons,\r\n            publishableSelectedHomeworks: publishableSelectedHomeworks,\r\n            unPublishableSelectedHomeworks: unPublishableSelectedHomeworks,\r\n            noStateChangeHomeworks: noStateChangeHomeworks\r\n        };\r\n    };\r\n\r\n    $scope.publishSelectedItems = function (toPublish) {\r\n\r\n        var itemsToBePublished = getPublishableItemsSelected();\r\n        var homeworks = toPublish ? itemsToBePublished.publishableSelectedHomeworks : itemsToBePublished.unPublishableSelectedHomeworks;\r\n        var lessons = toPublish ? itemsToBePublished.publishableSelectedLessons : itemsToBePublished.unPublishableSelectedLessons;\r\n\r\n        var notifyKey = toPublish ? 'item.published' : 'item.unpublished';\r\n        $scope.processingData = true;\r\n        var cbCount = ((lessons.length > 0) ? 1 : 0) + ((homeworks.length > 0) ? 1 : 0);\r\n        $scope.cbCount = cbCount;\r\n\r\n        if (lessons.length > 0) {\r\n            return model.publishLessons({ids: model.getItemsIds(lessons)}, toPublish, publishCB(lessons, toPublish, notifyKey),\r\n                function (cbe) {\r\n                    notify.error(cbe.message);\r\n                })\r\n        }\r\n\r\n        if (homeworks.length > 0) {\r\n            return model.publishHomeworks({ids: model.getItemsIds(homeworks)}, toPublish, publishCB(homeworks, toPublish, notifyKey),\r\n                function (cbe) {\r\n                    notify.error(cbe.message);\r\n                })\r\n        }\r\n    };\r\n\r\n    $scope.getItemsPublishableSelectedCount = function (toPublish) {\r\n\r\n        var itemsSelected = getPublishableItemsSelected();\r\n\r\n        if (toPublish) {\r\n            return itemsSelected.publishableSelectedLessons.length + itemsSelected.publishableSelectedHomeworks.length;\r\n        } else {\r\n            return itemsSelected.unPublishableSelectedLessons.length + itemsSelected.unPublishableSelectedHomeworks.length;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Telles whether it is possible to publish or not selected items.\r\n     * It depends of type of items selected and current state\r\n     * @param toPublish\r\n     * @returns {boolean} true if selected items can be published\r\n     * and are not ever in publish state otherwise false\r\n     */\r\n    $scope.hasPublishableOnlyItemsSelected = function (toPublish) {\r\n        var itemsSelected = getPublishableItemsSelected();\r\n\r\n        var publishableLessons = itemsSelected.publishableSelectedLessons;\r\n        var unpublishableLessons = itemsSelected.unPublishableSelectedLessons;\r\n        var noStateChangeLessons = itemsSelected.noStateChangeLessons;\r\n\r\n        var publishableHomeworks = itemsSelected.publishableSelectedHomeworks;\r\n        var unpublishableHomeworks = itemsSelected.unPublishableSelectedHomeworks;\r\n        var noStateChangeHomeworks = itemsSelected.noStateChangeHomeworks;\r\n\r\n        if (noStateChangeLessons.length > 0 || noStateChangeHomeworks.length > 0) {\r\n            return false;\r\n        }\r\n\r\n        if (toPublish) {\r\n            // nothing selected\r\n            if (publishableLessons.length + publishableHomeworks.length == 0) {\r\n                return false;\r\n            } else {\r\n                var noUnpublishableItems = unpublishableHomeworks.length == 0 && unpublishableLessons.length == 0;\r\n                return (publishableLessons.length > 0 && noUnpublishableItems) || (publishableHomeworks.length > 0 && noUnpublishableItems);\r\n            }\r\n        } else {\r\n            // nothing selected\r\n            if (unpublishableLessons.length + unpublishableHomeworks.length == 0) {\r\n                return false;\r\n            } else {\r\n                var noPublishableItems = publishableLessons.length == 0 && publishableHomeworks.length == 0;\r\n                return (unpublishableLessons.length > 0 && noPublishableItems) || (unpublishableHomeworks.length > 0 && noPublishableItems);\r\n            }\r\n        }\r\n    };\r\n\r\n    var getSelectedHomeworks = function(){\r\n        if (model && model.homeworks && model.homeworks.selection)\r\n            return model.homeworks.selection();\r\n        return [];\r\n    };\r\n\r\n    var getSelectedLessons = function(){\r\n        if(model && model.lessons && model.lessons.selection)\r\n            return model.lessons.selection();\r\n        return [];\r\n    };\r\n\r\n\r\n    $scope.toggleShowHomeworkInLesson = function (homework) {\r\n        homework.expanded = !homework.expanded;\r\n    };\r\n\r\n\r\n    $scope.deleteHomeworkAndCloseConfirmPanel = function (homework, lesson) {\r\n        $scope.deleteHomework(homework, lesson, function(){\r\n            $scope.closeConfirmPanel();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Deletes an homework\r\n     * @param cb Callback function\r\n     * @param homework Homework to be deleted\r\n     * @param lesson Lesson attached to homework (optional)\r\n     */\r\n    $scope.deleteHomework = function (homework, lesson, cb) {\r\n\r\n        homework.delete(lesson, function () {\r\n            notify.info('homework.deleted');\r\n            //$scope.$apply();\r\n\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }, function (e) {\r\n            $rootScope.validationError(e);\r\n        });\r\n    };\r\n\r\n    $scope.hideHomework = function(){\r\n        if ($scope.homework)\r\n        $scope.lesson = null;\r\n        $scope.homework = null;\r\n    };\r\n\r\n    $scope.createOrUpdateHomework = async function (goToMainView) {\r\n        $scope.currentErrors = [];\r\n        if ($scope.newItem) {\r\n            $scope.homework.dueDate = $scope.newItem.date;\r\n        }\r\n        try {\r\n            await model.homeworks.sync();\r\n            notify.info('homework.saved');\r\n            $scope.homework.audience = model.audiences.findWhere({id: $scope.homework.audience.id});\r\n\r\n            if (goToMainView) {\r\n                $rootScope.back();\r\n                $scope.lesson = null;\r\n                $scope.homework = null;\r\n            }\r\n        } catch (e) {\r\n            $scope.homework.errorValid = true;\r\n            throw e;\r\n        }\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * Refresh homework load for all homeworks of current lesson\r\n     */\r\n    $scope.refreshHomeworkLoads = function (lesson) {\r\n\r\n        $scope.countdown = lesson.homeworks.all.length;\r\n\r\n        lesson.homeworks.all.forEach(function (homework) {\r\n            model.loadHomeworksLoad(homework, moment(homework.date).format(\"YYYY-MM-DD\"), lesson.audience.id, applyScopeOnFinish);\r\n        });\r\n\r\n    };\r\n\r\n    var applyScopeOnFinish = function(){\r\n        $scope.countdown --;\r\n\r\n        if ($scope.countdown == 0) {\r\n            if(!$scope.$$phase) {\r\n                $scope.$apply();\r\n              }            \r\n        }\r\n    };\r\n\r\n    var decrementCountdown = function (bShowTemplates, cb) {\r\n        $scope.countdown--;\r\n        if ($scope.countdown == 0) {\r\n            $scope.calendarLoaded = true;\r\n            $scope.currentSchool = model.currentSchool;\r\n\r\n            if(bShowTemplates) {\r\n                showTemplates();\r\n            }\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }\r\n    };\r\n\r\n    var showTemplates = function () {\r\n        template.open('main', 'main');\r\n        template.open('main-view', 'calendar');\r\n        template.open('create-lesson', 'create-lesson');\r\n        template.open('create-homework', 'create-homework');\r\n        template.open('daily-event-details', 'daily-event-details');\r\n        template.open('daily-event-item', 'daily-event-item');\r\n        //$scope.$apply();\r\n    };\r\n\r\n    /**\r\n     * Refresh calendar view for current week\r\n     */\r\n    $scope.refreshCalendarCurrentWeek = function(){\r\n        $scope.show(moment(model.calendar.firstDay));\r\n    };\r\n\r\n    $scope.addHomeworkToLesson = function(lesson){\r\n        lesson.addHomework(lesson);\r\n    };\r\n\r\n    $scope.getPedagogicItemSelectedCount = function () {\r\n        return $scope.getSelectedPedagogicItems('lesson').length + $scope.getSelectedPedagogicItems('homework').length;\r\n    };\r\n\r\n    // gets the selected date from pedagogic items but can't be in the past.\r\n    $scope.selectedDateInTheFuture = function (){\r\n        var date = model.selectedPedagogicDate();\r\n        return moment().min(moment(date), moment()).format(\"YYYY-MM-DD\"); // see moment.js doc on min pre 2.7.0 version (highly confusing !)\r\n    };\r\n\r\n\t/**\r\n\t* update pedagogic items selected\r\n\t*/\r\n\t$scope.updatePedagogicItemsSelected = function(itemType){\r\n\t\tvar selectedItems = new Array();\r\n\t\tmodel.pedagogicDays.forEach(function (day) {\r\n\t\t\tselectedItems = selectedItems.concat(day.pedagogicItemsOfTheDay.filter(function (item) {\r\n\t\t\t\t\treturn item && item.type_item === itemType && item.selected;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\tif (itemType === 'homework'){\r\n\t\t\t$scope.pedagogicHomeworksSelected = selectedItems;\r\n\t\t} else {\r\n\t\t\t$scope.pedagogicLessonsSelected = selectedItems;\r\n\t\t}\r\n    };\r\n\r\n\r\n\t/**\r\n\t* get selected pedagogic items from item type\r\n\t*/\r\n\t$scope.getSelectedPedagogicItems = function(itemType){\r\n\r\n        // share from lesson view\r\n        if ($scope.viewedLessonToShare) {\r\n            return $scope.viewedLessonToShare;\r\n        }\r\n        // share from homework view\r\n        else if ($scope.viewedHomeworkToShare) {\r\n            return $scope.viewedHomeworkToShare;\r\n        }\r\n\r\n        // list view\r\n        if ($scope.display.showList == true) {\r\n\t\t\tif (itemType === 'homework') {\r\n                return $scope.pedagogicHomeworksSelected;\r\n            } else {\r\n                return $scope.pedagogicLessonsSelected;\r\n            }\r\n        }\r\n        // calendar view\r\n        else {\r\n            if (itemType === 'homework') {\r\n                return getSelectedHomeworks();\r\n            } else {\r\n                return getSelectedLessons();\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * Init homework object on create\r\n     * @param dueDate if set the dueDate of the homework\r\n     */\r\n    var initHomework = function(dueDate) {\r\n        $scope.homework = model.initHomework(dueDate);\r\n        $scope.newItem = {\r\n            date: $scope.homework.date\r\n        };\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * Minify the homework panel or not\r\n     * If it's minified, will only show one max homework\r\n     * else 3\r\n     */\r\n     //TODO unused?\r\n  /*  $scope.toggleHomeworkPanelMinified = function(){\r\n        $scope.display.bShowHomeworksMinified = model.show.bShowHomeworksMinified;\r\n        model.placeCalendarAndHomeworksPanel(model.show.bShowCalendar, model.show.bShowHomeworks, !model.show.bShowHomeworksMinified);\r\n    };\r\n    */\r\n\r\n    $scope.toggleFilterOnHomework = function () {\r\n        $scope.searchForm.displayHomework = model.searchForm.displayHomework;\r\n        model.searchForm.displayHomework = !model.searchForm.displayHomework;\r\n    };\r\n\r\n    $scope.toggleFilterOnLesson = function () {\r\n        $scope.searchForm.displayLesson = model.searchForm.displayLesson;\r\n        model.searchForm.displayLesson = !model.searchForm.displayLesson;\r\n    };\r\n\r\n    $scope.performPedagogicItemSearch = function () {\r\n        model.performPedagogicItemSearch($scope.searchForm.getSearch(), $scope.isUserTeacher, $scope.openListView, $rootScope.validationError);\r\n    };\r\n\r\n    /*\r\n    $scope.loadMorePreviousLessonsFromLesson = function (currentLesson) {\r\n        model.getPreviousLessonsFromLesson(currentLesson, true, function(){$scope.$apply()}, $rootScope.validationError);\r\n    };\r\n    */\r\n\r\n    /**\r\n     * Load previous lessons data from current lesson being edited\r\n     * @param currentLesson Current lesson being edited\r\n     */\r\n    $scope.loadPreviousLessonsFromLesson = function (currentLesson) {\r\n        model.getPreviousLessonsFromLesson(currentLesson, false, function(){$scope.$apply()}, $rootScope.validationError);\r\n    };\r\n\r\n    $scope.itemTypesDisplayed = function(item){\r\n        if ((item.type_item == \"lesson\" && $scope.searchForm.displayLesson) || (item.type_item == \"homework\" && $scope.searchForm.displayHomework)){\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     * Opens the share lesson panel\r\n     * seee main;html -> getSelectedPedagogicItems\r\n     * @param item\r\n     */\r\n    $scope.openShareLessonPanel = function (viewedLesson) {\r\n\r\n        $scope.viewedHomeworkToShare = null;\r\n\r\n        if (viewedLesson) {\r\n            $scope.viewedLessonToShare = new Array();\r\n            $scope.viewedLessonToShare.push(viewedLesson);\r\n        } else {\r\n            $scope.viewedLessonToShare = null;\r\n        }\r\n\r\n        $scope.display.showShareLessonPanel = true;\r\n    };\r\n\r\n    /**\r\n     * Open the share homework panel\r\n     * see main.html -> getSelectedPedagogicItems\r\n     */\r\n    $scope.openShareHomeworkPanel = function (viewedHomework) {\r\n\r\n        $scope.viewedLessonToShare = null;\r\n\r\n        if (viewedHomework) {\r\n            $scope.viewedHomeworkToShare = new Array();\r\n            $scope.viewedHomeworkToShare.push(viewedHomework);\r\n        }\r\n        else {\r\n            $scope.viewedHomeworkToShare = null;\r\n        }\r\n        $scope.display.showShareHomeworkPanel = true;\r\n    };\r\n\r\n\r\n    /**\r\n     * Display homework load for current homework\r\n     * @param forcedDate Date in millis since 1970-1-1\r\n     * @param homework\r\n     */\r\n    $scope.showHomeworksLoad = function (homework, forcedDate, callback) {\r\n\r\n        var cb ;//= function (){};\r\n\r\n        if (callback){\r\n            if (typeof callback === 'function') {\r\n                cb = callback;\r\n            }\r\n        }\r\n\r\n        var callbackErrorFunc = function () {\r\n            // TODO propagate error to front\r\n        };\r\n\r\n        var date = forcedDate ? forcedDate : homework.date;\r\n        var formattedDate = moment(date).format(\"YYYY-MM-DD\");\r\n\r\n        var audienceId = homework.audience ? homework.audience.id : homework.audienceId;\r\n        model.loadHomeworksLoad(homework, formattedDate, audienceId, cb, callbackErrorFunc);\r\n    };\r\n\r\n    $scope.isHighHomeworkLoad = function(homeworkLoad){\r\n        return homeworkLoad.countLoad > 2;\r\n    };\r\n\r\n    $scope.isLowHomeworkLoad = function(homeworkLoad){\r\n        return homeworkLoad.countLoad == 1;\r\n    };\r\n\r\n    $scope.isMediumHomeworkLoad = function(homeworkLoad){\r\n        return homeworkLoad.countLoad == 2;\r\n    };\r\n\r\n    $scope.isNoHomeworkLoad = function(homeworkLoad){\r\n        return homeworkLoad.countLoad == 0;\r\n    };\r\n\r\n    $scope.displayPreviousLessonsTabAndLoad = function (lesson) {\r\n        console.warn(\"deprecated\");\r\n        return;\r\n        /*$scope.tabs.createLesson = 'previouslessons';\r\n        $scope.loadPreviousLessonsFromLesson(lesson);*/\r\n    };\r\n\r\n    /**\r\n     * Show more previous lessons.\r\n     * By default number of previous lessons is 3.\r\n     * Will increase displayed previous lesson by 3.\r\n     */\r\n     //TODO remove\r\n    $scope.showMorePreviousLessons = function (lesson) {\r\n        console.warn(\"deprecated\");\r\n        return;\r\n       /* const displayStep = 3;\r\n        lesson.previousLessonsDisplayed = lesson.previousLessons.slice(0, Math.min(lesson.previousLessons.length, lesson.previousLessonsDisplayed.length + displayStep));\r\n        */\r\n    };\r\n\r\n        /**\r\n         * Init audience\r\n         * @returns {Lesson}\r\n         */\r\n        function initAudiences (cb ?) {\r\n            model.audiences.all = [];\r\n            //var nbStructures = model.me.structures.length;\r\n\r\n            model.currentSchool = model.me.structures[0];\r\n\r\n            AudienceService.getAudiences(model.me.structures).then((audiences) => {\r\n\r\n                model.audiences.addRange(audiences);\r\n                model.audiences.trigger('sync');\r\n                model.audiences.trigger('change');\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n            });\r\n        };\r\n        initAudiences();\r\n}\r\n]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/controller.ts","export * from './Attachment.model';\nexport * from './Child.model';\nexport * from './Homework.model';\nexport * from './PedagogicDay.model';\nexport * from './PedagogicItem.model';\nexport * from './SearchForm.model';\nexport * from './Subject.model';\nexport * from './Teacher.model';\nexport * from './Lesson.model';\n\n\n\n// WEBPACK FOOTER //\n// ./ts/models/index.ts","/**\r\n }\r\n }\r\n * Model of attachment from\r\n * table diary.attachment (DB)\r\n * @constructor\r\n */\r\nexport class Attachment {\r\n    /**\r\n     * Attachment id as in diary.attachment table\r\n     * @type {number}\r\n     */\r\n    id = null;\r\n\r\n    user_id = null;\r\n    /**\r\n     * Id of stored document within the document module\r\n     * (see mongodb -> Documents table)\r\n     * E.G: \"b88a3c42-7e4f-4e1c-ab61-11c8872ef795\"\r\n     * @type {string}\r\n     */\r\n    document_id = null;\r\n    /***\r\n     * Creation date\r\n     * @type {null}\r\n     */\r\n    creation_date = null;\r\n    /**\r\n     * Filename of attachment\r\n     * @type {string}\r\n     */\r\n    document_label = null;\r\n\r\n\r\n    /**\r\n     * Download the attachment\r\n     */\r\n    download = function () {\r\n        window.location.href = window.location.host + '/workspace/document/' + this.document_id;\r\n    };\r\n\r\n    /**\r\n     * Detach attachment to a lesson\r\n     * Attachment link will be detached to back end on lesson save\r\n     * @param item Lesson or homework\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    detachFromItem = function (item, cb, cbe) {\r\n\r\n        var that = this;\r\n\r\n        if (item && item.attachments) {\r\n\r\n            var udpatedAttachments = new Array();\r\n\r\n            item.attachments.forEach(function (attachment) {\r\n                if (attachment && attachment.document_id !== that.document_id) {\r\n                    udpatedAttachments.push(attachment);\r\n                }\r\n            });\r\n\r\n            item.attachments = udpatedAttachments;\r\n\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            } else (typeof cbe === 'function')\r\n            {\r\n                cbe();\r\n            }\r\n        }\r\n    };\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/models/Attachment.model.ts","export class Child {\r\n    id; //String\r\n    displayName; //String\r\n    classId; //String\r\n    className; //String\r\n    selected = false;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/models/Child.model.ts","import { model, moment, _ } from 'entcore';\r\nimport { Mix } from 'entcore-toolkit';\r\nimport http from 'axios';\r\nimport {DATE_FORMAT, sqlToJsHomework} from '../tools';\r\nimport * as tools from \"../tools\";\r\n\r\nexport class Homework {\r\n\r\n    /**\r\n     * used in ui in homework tab in lesson view\r\n     * @type {boolean}\r\n     */\r\n    id: any;\r\n    lesson_id:any;\r\n    created: any;\r\n    expanded: any = false;\r\n    type: any;\r\n    title: any;\r\n    date: any;\r\n\r\n    audience: any;\r\n    subject: any;\r\n    audienceType: any;\r\n    color: any;\r\n    state: any;\r\n\r\n    dueDate: any;\r\n    description: any;\r\n    attachments: any;\r\n\r\n    startTime: any;\r\n    endTime: any;\r\n\r\n    loaded:any;\r\n\r\n    constructor() {\r\n        this.expanded = false;\r\n    }\r\n\r\n    /**\r\n     * Delete calendar references of current homework\r\n     */\r\n    deleteModelReferences () {\r\n        var idxHomeworkToDelete = model.homeworks.indexOf(this);\r\n\r\n        // delete homework in calendar cache\r\n        if (idxHomeworkToDelete >= 0) {\r\n            model.homeworks.splice(idxHomeworkToDelete, 1);\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * Adds an attachment\r\n     * @param attachment\r\n     */\r\n    addAttachment (attachment) {\r\n        this.attachments.push(attachment);\r\n    };\r\n\r\n    /**\r\n     * Removes attachment associated to this lesson\r\n     * @param attachment\r\n     * @param cb\r\n     * @param cbe\r\n     */\r\n    detachAttachment (attachment, cb, cbe) {\r\n        attachment.detachFromItem(this.id, 'lesson', cb, cbe);\r\n    };\r\n\r\n\r\n    api = {\r\n        delete: '/diary/homework/:id'\r\n    };\r\n\r\n    save (cb, cbe) {\r\n\r\n        var that = this;\r\n        var promise = model.$q().when({});\r\n\r\n        if (!this.subject.id) {\r\n            promise = this.subject.save();\r\n        }\r\n\r\n        return promise.then(() => {\r\n            if (that.id) {\r\n                return that.update(cb, cbe);\r\n            }\r\n            else {\r\n                return that.create();\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n    /**\r\n     * Returns true if current homework is attached to a lesson\r\n     * @returns {boolean}\r\n     */\r\n    isAttachedToLesson () {\r\n        return typeof this.lesson_id !== 'undefined' && this.lesson_id != null;\r\n    };\r\n\r\n    isDraft () {\r\n        return this.state === \"draft\";\r\n    };\r\n\r\n    isPublished () {\r\n        return !this.isDraft();\r\n    };\r\n\r\n    /**\r\n     * A directly publishable homework must exist in database and not linked to a lesson\r\n     * @param toPublish\r\n     * @returns {*|boolean} true if homework can be published directly\r\n     */\r\n    isPublishable (toPublish) {\r\n        return this.id && (toPublish ? this.isDraft() : this.isPublished()) && this.lesson_id == null;\r\n    };\r\n\r\n    changeState (toPublish) {\r\n        this.state = toPublish ? 'published' : 'draft';\r\n    };\r\n\r\n    update (cb, cbe) {\r\n        var url = '/diary/homework/' + this.id;\r\n\r\n        var homework = this;\r\n        return model.getHttp()({\r\n            method: 'PUT',\r\n            url: url,\r\n            data: homework\r\n        }).then(function () {\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }).catch(function (e) {\r\n            if (cbe) {\r\n                cbe();\r\n            }\r\n        });\r\n    };\r\n\r\n    async create () {\r\n        try {\r\n            const { data } = await model.getHttp()({\r\n                method: 'POST',\r\n                url: '/diary/homework',\r\n                data: this\r\n            });\r\n            Mix.extend(this, data);\r\n            model.homeworks.all.push(this);\r\n            return data\r\n        } catch (e) {\r\n            console.error(e);\r\n            throw e;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load homework object from id\r\n     * @param cb Callback function\r\n     * @param cbe Callback on error function\r\n     */\r\n    load (cb, cbe) {\r\n        var homework = this;\r\n        http.get('/diary/homework/' + homework.id)\r\n            .then(function (res) {\r\n                Mix.extend(this, sqlToJsHomework(res.data));\r\n\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n            })\r\n            .catch(function (e) {\r\n                if (typeof cbe === 'function') {\r\n                    cbe(model.parseError(e));\r\n                }\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Deletes a list of homeworks\r\n     * @param homeworks Homeworks to be deleted\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    deleteList (homeworks, cb, cbe) {\r\n        model.deleteItemList(homeworks, 'homework', cb, cbe);\r\n    };\r\n\r\n\r\n    /**\r\n     * Deletes the homework\r\n     * @param Optional lesson attached to homework\r\n     * @param cb Callback after delete\r\n     * @param cbe Callback on error\r\n     */\r\n    delete (lesson, cb, cbe) {\r\n\r\n        var homework = this;\r\n\r\n        var deleteHomeworkReferences = function () {\r\n\r\n            // delete homework from calendar cache\r\n            model.homeworks.forEach(function (modelHomework) {\r\n                if (modelHomework.id === homework.id) {\r\n                    model.homeworks.remove(modelHomework);\r\n                }\r\n            });\r\n\r\n            if (lesson && lesson.homeworks) {\r\n                lesson.homeworks.remove(homework);\r\n            }\r\n        };\r\n\r\n        if (this.id) {\r\n            http.delete('/diary/homework/' + this.id)\r\n                .then(function (b) {\r\n\r\n                    deleteHomeworkReferences();\r\n\r\n                    if (typeof cb === 'function') {\r\n                        cb();\r\n                    }\r\n                })\r\n                .catch(function (error) {\r\n                    if (typeof cbe === 'function') {\r\n                        cbe(model.parseError(error));\r\n                    }\r\n                });\r\n        } else {\r\n            deleteHomeworkReferences();\r\n\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    toJSON () {\r\n\r\n        let json: any = {\r\n            homework_title: this.title,\r\n            subject_id: this.subject.id,\r\n            homework_type_id: this.type.id,\r\n            teacher_id: model.me.userId,\r\n            school_id: this.audience.structureId,\r\n            audience_id: this.audience.id,\r\n            homework_due_date: moment(this.dueDate).format(DATE_FORMAT),\r\n            homework_description: this.description,\r\n            homework_color: this.color,\r\n            homework_state: this.state,\r\n            // used to auto create postgresql diary.audience if needed\r\n            // not this.audience object is originally from neo4j graph (see syncAudiences function)\r\n            audience_type: this.audience.type,\r\n            audience_name: this.audience.name,\r\n            attachments: this.attachments\r\n        };\r\n\r\n        if (this.lesson_id) {\r\n            json.lesson_id = this.lesson_id;\r\n        }\r\n\r\n        /*if (!this.id) {\r\n            created: moment(this.created).format('YYYY-MM-DD HH:mm:ss.SSSSS'); // \"2016-07-05 11:48:22.18671\"\r\n        }*/\r\n\r\n        return json;\r\n    };\r\n};\r\n\r\nexport class Homeworks {\r\n    all: Homework[];\r\n\r\n    loading: boolean;\r\n\r\n    constructor () {\r\n        this.all = [];\r\n    }\r\n\r\n    async sync () {\r\n\r\n        var homeworks = [];\r\n        var start = moment(model.calendar.dayForWeek).day(1).format(tools.DATE_FORMAT);\r\n        var end = moment(model.calendar.dayForWeek).day(1).add(1, 'week').format(tools.DATE_FORMAT);\r\n        var that = this;\r\n\r\n        if (that.loading)\r\n            return;\r\n\r\n        model.homeworks.all.splice(0, model.homeworks.all.length);\r\n\r\n        var urlGetHomeworks = '/diary/homework/' + tools.getUserStructuresIdsAsString() + '/' + start + '/' + end + '/';\r\n\r\n        if (model.isUserParent() && model.child) {\r\n            urlGetHomeworks += model.child.id;\r\n        } else {\r\n            urlGetHomeworks += '%20';\r\n        }\r\n\r\n\r\n        that.loading = true;\r\n        try {\r\n            const { data } = await model.getHttp()({\r\n                method: 'GET',\r\n                url: urlGetHomeworks\r\n            });\r\n            homeworks = homeworks.concat(data);\r\n            this.all = _.union(this.all, Mix.castArrayAs(Homework, data));\r\n            that.loading = false;\r\n            return homeworks;\r\n        } catch (e) {\r\n            that.loading = false;\r\n            throw e;\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/models/Homework.model.ts","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n__export(require(\"./dist\"));\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/index.js\n// module id = 7\n// module chunks = 0","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n__export(require(\"./minicast\"));\r\n__export(require(\"./eventer\"));\r\n__export(require(\"./selection\"));\r\n__export(require(\"./crud\"));\r\n__export(require(\"./provider\"));\r\n__export(require(\"./autosaver\"));\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/index.js\n// module id = 8\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nfunction mapToArray(map) {\r\n    var result = [];\r\n    map.forEach(function (item) {\r\n        result.push(item);\r\n    });\r\n    return result;\r\n}\r\nvar Mix = (function () {\r\n    function Mix() {\r\n    }\r\n    Mix.extend = function (obj, mixin, casts) {\r\n        var _loop_1 = function () {\r\n            var value = mixin[property];\r\n            if (casts && casts[property] && value) {\r\n                var castItem = casts[property];\r\n                var cast_1;\r\n                if (castItem instanceof Function) {\r\n                    cast_1 = {\r\n                        type: castItem,\r\n                        deps: []\r\n                    };\r\n                }\r\n                else {\r\n                    cast_1 = {\r\n                        type: castItem.type,\r\n                        single: castItem.single,\r\n                        deps: castItem.deps ? castItem.deps : []\r\n                    };\r\n                }\r\n                var doCast_1 = function (v) {\r\n                    var instance = new ((_a = cast_1.type).bind.apply(_a, [void 0].concat(cast_1.deps)))();\r\n                    if (instance.mixin)\r\n                        instance.mixin(v);\r\n                    else\r\n                        Mix.extend(instance, v);\r\n                    return instance;\r\n                    var _a;\r\n                };\r\n                if (value instanceof Array && cast_1.single) {\r\n                    obj[property] = [];\r\n                    value.forEach(function (v) {\r\n                        obj[property].push(doCast_1(v));\r\n                    });\r\n                }\r\n                else {\r\n                    obj[property] = doCast_1(value);\r\n                }\r\n            }\r\n            else if (!value || typeof value !== 'object' || value instanceof Array) {\r\n                obj[property] = value;\r\n            }\r\n            else {\r\n                if (obj[property] instanceof TypedArray) {\r\n                    obj[property].load(value);\r\n                }\r\n                else {\r\n                    if (!obj[property]) {\r\n                        obj[property] = {};\r\n                    }\r\n                    this_1.extend(obj[property], value);\r\n                }\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        for (var property in mixin) {\r\n            _loop_1();\r\n        }\r\n        if (obj && obj.fromJSON) {\r\n            obj.fromJSON(mixin);\r\n        }\r\n    };\r\n    Mix.castAs = function (className, obj, params) {\r\n        if (params === void 0) { params = {}; }\r\n        var newObj = new className(params);\r\n        this.extend(newObj, obj);\r\n        return newObj;\r\n    };\r\n    Mix.castArrayAs = function (className, arr, params) {\r\n        if (params === void 0) { params = {}; }\r\n        var newArr = [];\r\n        arr.forEach(function (item) {\r\n            newArr.push(Mix.castAs(className, item, params));\r\n        });\r\n        return newArr;\r\n    };\r\n    return Mix;\r\n}());\r\nexports.Mix = Mix;\r\nvar TypedArray = (function (_super) {\r\n    __extends(TypedArray, _super);\r\n    function TypedArray(className, mixin) {\r\n        if (mixin === void 0) { mixin = {}; }\r\n        var _this = _super.call(this) || this;\r\n        _this.className = className;\r\n        _this.mixin = mixin;\r\n        return _this;\r\n    }\r\n    TypedArray.prototype.push = function () {\r\n        var _this = this;\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i - 0] = arguments[_i];\r\n        }\r\n        items.forEach(function (item) {\r\n            if (!(item instanceof _this.className)) {\r\n                item = Mix.castAs(_this.className, item);\r\n            }\r\n            for (var prop in _this.mixin) {\r\n                item[prop] = _this.mixin[prop];\r\n            }\r\n            Array.prototype.push.call(_this, item);\r\n        });\r\n        return this.length;\r\n    };\r\n    TypedArray.prototype.load = function (data) {\r\n        var _this = this;\r\n        data.forEach(function (item) {\r\n            _this.push(item);\r\n        });\r\n    };\r\n    TypedArray.prototype.asArray = function () {\r\n        return mapToArray(this);\r\n    };\r\n    TypedArray.prototype.toJSON = function () {\r\n        return mapToArray(this);\r\n    };\r\n    return TypedArray;\r\n}(Array));\r\nexports.TypedArray = TypedArray;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/minicast.js\n// module id = 9\n// module chunks = 0","\"use strict\";\r\nvar Eventer = (function () {\r\n    function Eventer() {\r\n        this.events = new Map();\r\n    }\r\n    Eventer.prototype.trigger = function (eventName, data) {\r\n        if (this.events[eventName]) {\r\n            this.events[eventName].forEach(function (f) { return f(data); });\r\n        }\r\n    };\r\n    Eventer.prototype.on = function (eventName, cb) {\r\n        if (!this.events[eventName]) {\r\n            this.events[eventName] = [];\r\n        }\r\n        this.events[eventName].push(cb);\r\n    };\r\n    Eventer.prototype.off = function (eventName, cb) {\r\n        if (!this.events[eventName]) {\r\n            return;\r\n        }\r\n        if (cb === undefined) {\r\n            this.events[eventName] = [];\r\n            return;\r\n        }\r\n        var index = this.events[eventName].indexOf(cb);\r\n        if (index !== -1) {\r\n            this.events[eventName].splice(index, 1);\r\n        }\r\n    };\r\n    Eventer.prototype.once = function (eventName, cb) {\r\n        var _this = this;\r\n        var callback = function (data) {\r\n            cb(data);\r\n            _this.off(eventName, callback);\r\n        };\r\n        this.on(eventName, callback);\r\n    };\r\n    return Eventer;\r\n}());\r\nexports.Eventer = Eventer;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/eventer.js\n// module id = 10\n// module chunks = 0","\"use strict\";\r\nvar Selection = (function () {\r\n    function Selection(arr) {\r\n        this.arr = arr;\r\n        this.selectedElements = [];\r\n    }\r\n    Object.defineProperty(Selection.prototype, \"all\", {\r\n        get: function () {\r\n            return this.arr;\r\n        },\r\n        set: function (all) {\r\n            this.arr = all;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Selection.prototype.filter = function (filter) {\r\n        return this.arr.filter(filter);\r\n    };\r\n    Selection.prototype.push = function (item) {\r\n        this.arr.push(item);\r\n    };\r\n    Selection.prototype.addRange = function (arr) {\r\n        for (var i = 0; i < arr.length; i++) {\r\n            this.all.push(arr[i]);\r\n        }\r\n    };\r\n    Object.defineProperty(Selection.prototype, \"colLength\", {\r\n        get: function () {\r\n            return this.arr.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Selection.prototype, \"length\", {\r\n        get: function () {\r\n            return this.selected.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Selection.prototype.forEach = function (func) {\r\n        this.arr.forEach(func);\r\n    };\r\n    Selection.prototype.selectAll = function () {\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            this.arr[i].selected = true;\r\n        }\r\n    };\r\n    Selection.prototype.select = function (filter) {\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            this.arr[i].selected = filter(this.arr[i]);\r\n        }\r\n    };\r\n    Selection.prototype.deselect = function (filter) {\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            this.arr[i].selected = !filter(this.arr[i]);\r\n        }\r\n    };\r\n    Selection.prototype.deselectAll = function () {\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            this.arr[i].selected = false;\r\n        }\r\n    };\r\n    Selection.prototype.removeSelection = function () {\r\n        var newArr = [];\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            if (!this.arr[i].selected) {\r\n                newArr.push(this.arr[i]);\r\n            }\r\n        }\r\n        this.arr.splice(0, this.arr.length);\r\n        for (var i = 0; i < newArr.length; i++) {\r\n            this.arr.push(newArr[i]);\r\n        }\r\n    };\r\n    Selection.prototype.updateSelected = function () {\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            var index = this.selectedElements.indexOf(this.arr[i]);\r\n            if (this.arr[i].selected && index === -1) {\r\n                this.selectedElements.push(this.arr[i]);\r\n            }\r\n            else if (!this.arr[i].selected && index !== -1) {\r\n                this.selectedElements.splice(index, 1);\r\n            }\r\n        }\r\n        for (var i = 0; i < this.selectedElements.length; i++) {\r\n            var index = this.arr.indexOf(this.selectedElements[i]);\r\n            if (index === -1) {\r\n                this.selectedElements.splice(index, 1);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(Selection.prototype, \"selected\", {\r\n        // a specific array is maintained to avoid references breaking all the time\r\n        get: function () {\r\n            this.updateSelected();\r\n            return this.selectedElements;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Selection;\r\n}());\r\nexports.Selection = Selection;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/selection.js\n// module id = 11\n// module chunks = 0","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n__export(require(\"./abstract.crud\"));\r\n__export(require(\"./crud\"));\r\n__export(require(\"./abstract.collection\"));\r\n__export(require(\"./collection\"));\r\n__export(require(\"./abstract.model\"));\r\n__export(require(\"./model\"));\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/index.js\n// module id = 12\n// module chunks = 0","\"use strict\";\r\nvar minicast_1 = require(\"../minicast\");\r\nvar AbstractCrud = (function () {\r\n    function AbstractCrud(api, model, initialCast, childrenCasts, customMixin) {\r\n        this.api = api;\r\n        this.model = model;\r\n        this.initialCast = initialCast;\r\n        this.childrenCasts = childrenCasts;\r\n        this.customMixin = customMixin;\r\n    }\r\n    AbstractCrud.prototype.parseApi = function (api, parameters) {\r\n        var _this = this;\r\n        if (typeof api === 'function') {\r\n            api = api();\r\n        }\r\n        return api.split(/(:[a-zA-Z0-9_.]+)/)\r\n            .map(function (fragment) {\r\n            return fragment.charAt(0) === ':' ?\r\n                parameters && parameters[fragment.substr(1)] ||\r\n                    _this.model[fragment.substr(1)] ||\r\n                    _this[fragment.substr(1)] ||\r\n                    fragment :\r\n                fragment;\r\n        }).join('');\r\n    };\r\n    AbstractCrud.prototype.defaultMixin = function (payload) {\r\n        var _this = this;\r\n        if (payload instanceof Array && this.model instanceof Array) {\r\n            this.model = [];\r\n            var model_1 = this.model; //fix type inference\r\n            payload.forEach(function (item) {\r\n                var instance = {};\r\n                if (_this.initialCast) {\r\n                    if (_this.initialCast instanceof Function) {\r\n                        instance = new _this.initialCast();\r\n                    }\r\n                    else {\r\n                        instance = new ((_a = _this.initialCast.type).bind.apply(_a, [void 0].concat(_this.initialCast.deps)))();\r\n                    }\r\n                }\r\n                minicast_1.Mix.extend(instance, item, _this.childrenCasts);\r\n                model_1.push(instance);\r\n                var _a;\r\n            });\r\n        }\r\n        else {\r\n            minicast_1.Mix.extend(this.model, payload, this.childrenCasts);\r\n        }\r\n    };\r\n    AbstractCrud.prototype.create = function (item, opts) {\r\n        var _this = this;\r\n        if (opts === void 0) { opts = {}; }\r\n        if (!this.api.create) {\r\n            throw '[Crud][Api] \"create\" route is undefined';\r\n        }\r\n        return this.http.post(this.parseApi(this.api.create, item), item || this.model, opts)\r\n            .then(function (response) {\r\n            if (_this.model instanceof Array) {\r\n                _this.model.push(item);\r\n            }\r\n            return response;\r\n        });\r\n    };\r\n    AbstractCrud.prototype.sync = function (opts) {\r\n        var _this = this;\r\n        if (opts === void 0) { opts = {}; }\r\n        if (!this.api.sync) {\r\n            throw '[Crud][Api] \"sync\" route is undefined';\r\n        }\r\n        return this.http.get(this.parseApi(this.api.sync), opts)\r\n            .then(function (response) {\r\n            (_this.customMixin || _this.defaultMixin).bind(_this)(response.data);\r\n            return response;\r\n        });\r\n    };\r\n    AbstractCrud.prototype.update = function (item, opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        if (!this.api.update) {\r\n            throw '[Crud][Api] \"update\" route is undefined';\r\n        }\r\n        return this.http.put(this.parseApi(this.api.update, item), item || this.model, opts);\r\n    };\r\n    AbstractCrud.prototype.delete = function (item, opts) {\r\n        var _this = this;\r\n        if (opts === void 0) { opts = {}; }\r\n        if (!this.api.delete) {\r\n            throw '[Crud][Api] \"delete\" route is undefined';\r\n        }\r\n        return this.http.delete(this.parseApi(this.api.delete, item), opts)\r\n            .then(function (response) {\r\n            if (_this.model instanceof Array) {\r\n                _this.model.splice(_this.model.indexOf(item), 1);\r\n            }\r\n            return response;\r\n        });\r\n    };\r\n    return AbstractCrud;\r\n}());\r\nexports.AbstractCrud = AbstractCrud;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.crud.js\n// module id = 13\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar axios_1 = require(\"axios\");\r\nvar abstract_crud_1 = require(\"./abstract.crud\");\r\nvar Crud = (function (_super) {\r\n    __extends(Crud, _super);\r\n    function Crud() {\r\n        var _this = _super.apply(this, arguments) || this;\r\n        _this.http = axios_1.default;\r\n        return _this;\r\n    }\r\n    return Crud;\r\n}(abstract_crud_1.AbstractCrud));\r\nexports.Crud = Crud;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/crud.js\n// module id = 14\n// module chunks = 0","module.exports = require('./lib/axios');\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/index.js\n// module id = 15\n// module chunks = 0","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(utils.merge(defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/axios.js\n// module id = 16\n// module chunks = 0","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  typeof document.createElement -> undefined\n */\nfunction isStandardBrowserEnv() {\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined' &&\n    typeof document.createElement === 'function'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object' && !isArray(obj)) {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/utils.js\n// module id = 17\n// module chunks = 0","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/bind.js\n// module id = 18\n// module chunks = 0","'use strict';\n\nvar defaults = require('./../defaults');\nvar utils = require('./../utils');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = utils.merge({\n      url: arguments[0]\n    }, arguments[1]);\n  }\n\n  config = utils.merge(defaults, this.defaults, { method: 'get' }, config);\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/Axios.js\n// module id = 19\n// module chunks = 0","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar PROTECTION_PREFIX = /^\\)\\]\\}',?\\n/;\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      data = data.replace(PROTECTION_PREFIX, '');\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMehtodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/defaults.js\n// module id = 20\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/process/browser.js\n// module id = 21\n// module chunks = 0","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/normalizeHeaderName.js\n// module id = 22\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\nvar btoa = (typeof window !== 'undefined' && window.btoa && window.btoa.bind(window)) || require('./../helpers/btoa');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n    var loadEvent = 'onreadystatechange';\n    var xDomain = false;\n\n    // For IE 8/9 CORS support\n    // Only supports POST and GET calls and doesn't returns the response headers.\n    // DON'T do this for testing b/c XMLHttpRequest is mocked, not XDomainRequest.\n    if (process.env.NODE_ENV !== 'test' &&\n        typeof window !== 'undefined' &&\n        window.XDomainRequest && !('withCredentials' in request) &&\n        !isURLSameOrigin(config.url)) {\n      request = new window.XDomainRequest();\n      loadEvent = 'onload';\n      xDomain = true;\n      request.onprogress = function handleProgress() {};\n      request.ontimeout = function handleTimeout() {};\n    }\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request[loadEvent] = function handleLoad() {\n      if (!request || (request.readyState !== 4 && !xDomain)) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        // IE sends 1223 instead of 204 (https://github.com/mzabriskie/axios/issues/201)\n        status: request.status === 1223 ? 204 : request.status,\n        statusText: request.status === 1223 ? 'No Content' : request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED'));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n          cookies.read(config.xsrfCookieName) :\n          undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        if (request.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/adapters/xhr.js\n// module id = 23\n// module chunks = 0","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  // Note: status is not exposed by XDomainRequest\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response\n    ));\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/settle.js\n// module id = 24\n// module chunks = 0","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n @ @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, response);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/createError.js\n// module id = 25\n// module chunks = 0","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n @ @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n  error.response = response;\n  return error;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/enhanceError.js\n// module id = 26\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      }\n\n      if (!utils.isArray(val)) {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/buildURL.js\n// module id = 27\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/parseHeaders.js\n// module id = 28\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    var msie = /(msie|trident)/i.test(navigator.userAgent);\n    var urlParsingNode = document.createElement('a');\n    var originURL;\n\n    /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      var href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n                  urlParsingNode.pathname :\n                  '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })()\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/isURLSameOrigin.js\n// module id = 29\n// module chunks = 0","'use strict';\n\n// btoa polyfill for IE<10 courtesy https://github.com/davidchambers/Base64.js\n\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction E() {\n  this.message = 'String contains an invalid character';\n}\nE.prototype = new Error;\nE.prototype.code = 5;\nE.prototype.name = 'InvalidCharacterError';\n\nfunction btoa(input) {\n  var str = String(input);\n  var output = '';\n  for (\n    // initialize result and counter\n    var block, charCode, idx = 0, map = chars;\n    // if the next str index does not exist:\n    //   change the mapping table to \"=\"\n    //   check if d has no fractional digits\n    str.charAt(idx | 0) || (map = '=', idx % 1);\n    // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n    output += map.charAt(63 & block >> 8 - idx % 1 * 8)\n  ) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n    if (charCode > 0xFF) {\n      throw new E();\n    }\n    block = block << 8 | charCode;\n  }\n  return output;\n}\n\nmodule.exports = btoa;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/btoa.js\n// module id = 30\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n  (function standardBrowserEnv() {\n    return {\n      write: function write(name, value, expires, path, domain, secure) {\n        var cookie = [];\n        cookie.push(name + '=' + encodeURIComponent(value));\n\n        if (utils.isNumber(expires)) {\n          cookie.push('expires=' + new Date(expires).toGMTString());\n        }\n\n        if (utils.isString(path)) {\n          cookie.push('path=' + path);\n        }\n\n        if (utils.isString(domain)) {\n          cookie.push('domain=' + domain);\n        }\n\n        if (secure === true) {\n          cookie.push('secure');\n        }\n\n        document.cookie = cookie.join('; ');\n      },\n\n      read: function read(name) {\n        var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n        return (match ? decodeURIComponent(match[3]) : null);\n      },\n\n      remove: function remove(name) {\n        this.write(name, '', Date.now() - 86400000);\n      }\n    };\n  })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return {\n      write: function write() {},\n      read: function read() { return null; },\n      remove: function remove() {}\n    };\n  })()\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/cookies.js\n// module id = 31\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/InterceptorManager.js\n// module id = 32\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/dispatchRequest.js\n// module id = 33\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/transformData.js\n// module id = 34\n// module chunks = 0","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/isCancel.js\n// module id = 35\n// module chunks = 0","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/isAbsoluteURL.js\n// module id = 36\n// module chunks = 0","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/combineURLs.js\n// module id = 37\n// module chunks = 0","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/Cancel.js\n// module id = 38\n// module chunks = 0","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/CancelToken.js\n// module id = 39\n// module chunks = 0","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/spread.js\n// module id = 40\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar abstract_crud_1 = require(\"./abstract.crud\");\r\nvar minicast_1 = require(\"../minicast\");\r\nvar AbstractCollection = (function (_super) {\r\n    __extends(AbstractCollection, _super);\r\n    function AbstractCollection(api, initialCast, childrenCasts) {\r\n        var _this = _super.call(this, api, null, initialCast, childrenCasts) || this;\r\n        _this.data = [];\r\n        _this.model = _this.data;\r\n        _this.customMixin = _this.mixin;\r\n        return _this;\r\n    }\r\n    AbstractCollection.prototype.mixin = function (data) {\r\n        var _this = this;\r\n        if (!data || !(data instanceof Array)) {\r\n            throw \"[Crud][Collection] An Array payload is expected.\";\r\n        }\r\n        this.data = [];\r\n        data.forEach(function (item) {\r\n            var instance = {};\r\n            if (_this.initialCast) {\r\n                if (_this.initialCast instanceof Function) {\r\n                    instance = new _this.initialCast();\r\n                }\r\n                else {\r\n                    instance = new ((_a = _this.initialCast.type).bind.apply(_a, [void 0].concat(_this.initialCast.deps)))();\r\n                }\r\n            }\r\n            minicast_1.Mix.extend(instance, item, _this.childrenCasts);\r\n            _this.data.push(instance);\r\n            var _a;\r\n        });\r\n    };\r\n    return AbstractCollection;\r\n}(abstract_crud_1.AbstractCrud));\r\nexports.AbstractCollection = AbstractCollection;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.collection.js\n// module id = 41\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar axios_1 = require(\"axios\");\r\nvar abstract_collection_1 = require(\"./abstract.collection\");\r\nvar Collection = (function (_super) {\r\n    __extends(Collection, _super);\r\n    function Collection(api, initialCast, childrenCasts) {\r\n        var _this = _super.call(this, api, initialCast, childrenCasts) || this;\r\n        _this.http = axios_1.default;\r\n        return _this;\r\n    }\r\n    return Collection;\r\n}(abstract_collection_1.AbstractCollection));\r\nexports.Collection = Collection;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/collection.js\n// module id = 42\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar abstract_crud_1 = require(\"./abstract.crud\");\r\nvar minicast_1 = require(\"../minicast\");\r\nvar AbstractModel = (function (_super) {\r\n    __extends(AbstractModel, _super);\r\n    function AbstractModel(api, childrenCasts) {\r\n        var _this = _super.call(this, api, null, null, childrenCasts) || this;\r\n        _this.model = _this;\r\n        _this.customMixin = _this.mixin;\r\n        return _this;\r\n    }\r\n    AbstractModel.prototype.mixin = function (data) {\r\n        if (!data || !(data instanceof Object)) {\r\n            throw \"[Crud][Collection] An Object payload is expected.\";\r\n        }\r\n        minicast_1.Mix.extend(this, data, this.childrenCasts);\r\n    };\r\n    return AbstractModel;\r\n}(abstract_crud_1.AbstractCrud));\r\nexports.AbstractModel = AbstractModel;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.model.js\n// module id = 43\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar axios_1 = require(\"axios\");\r\nvar abstract_model_1 = require(\"./abstract.model\");\r\nvar Model = (function (_super) {\r\n    __extends(Model, _super);\r\n    function Model(api, childrenCasts) {\r\n        var _this = _super.call(this, api, childrenCasts) || this;\r\n        _this.http = axios_1.default;\r\n        return _this;\r\n    }\r\n    return Model;\r\n}(abstract_model_1.AbstractModel));\r\nexports.Model = Model;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/model.js\n// module id = 44\n// module chunks = 0","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments)).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\r\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar eventer_1 = require(\"./eventer\");\r\nvar minicast_1 = require(\"./minicast\");\r\nvar axios_1 = require(\"axios\");\r\n/*\r\n * Tool to manage a single list provider used by multiple objects (to avoid multiple call to a same path)\r\n * Usage :\r\n * let provider = new Provider<T>(path, MyClass);\r\n * function a(){\r\n *    //get data from provider\r\n *    let data = await provider.data();\r\n * }\r\n *\r\n * function b(){\r\n *    let data = await provider.data();\r\n *    //get data when a refresh happens\r\n *    provider.on('refresh', (newData) => data = newData));\r\n * }\r\n *\r\n * //force provider refresh (after data invalidation)\r\n * setTimeout(() => provider.refresh(), 50000);\r\n *\r\n * a();\r\n * b();\r\n*/\r\nvar Provider = (function () {\r\n    function Provider(path, className) {\r\n        this.path = path;\r\n        this.className = className;\r\n        this._data = [];\r\n        this.eventer = new eventer_1.Eventer();\r\n    }\r\n    Provider.prototype.data = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(!this.isSynced && !this.syncing))\r\n                            return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.sync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!this.syncing)\r\n                            return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this.syncDone()];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4: return [2 /*return*/, this._data];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Provider.prototype.syncDone = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                        _this.eventer.once('sync', function () { return resolve(); });\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    Provider.prototype.sync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.syncing = true;\r\n                        return [4 /*yield*/, axios_1.default.get(this.path)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        this._data = minicast_1.Mix.castArrayAs(this.className, response.data);\r\n                        this.isSynced = true;\r\n                        this.eventer.trigger('sync');\r\n                        this.syncing = false;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Provider.prototype.refresh = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.isSynced = false;\r\n                        return [4 /*yield*/, this.sync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.eventer.trigger('refresh');\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Provider.prototype.push = function (data) {\r\n        this._data.push(data);\r\n    };\r\n    Provider.prototype.remove = function (data) {\r\n        var index = this._data.indexOf(data);\r\n        this._data.splice(index, 1);\r\n    };\r\n    return Provider;\r\n}());\r\nexports.Provider = Provider;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/provider.js\n// module id = 45\n// module chunks = 0","\"use strict\";\r\nvar axios_1 = require(\"axios\");\r\nvar autosaved = [];\r\nvar loopStarted = false;\r\nvar token;\r\nvar loop = function () {\r\n    autosaved.forEach(function (item) {\r\n        if (item._backup !== JSON.stringify(item.model)) {\r\n            if (item.fn) {\r\n                item.fn();\r\n            }\r\n            else {\r\n                axios_1.default[item.method](item.path, item.model);\r\n            }\r\n            item._backup = JSON.stringify(item.model);\r\n        }\r\n    });\r\n    loopStarted = true;\r\n    token = setTimeout(loop, 500);\r\n};\r\nvar Autosave = (function () {\r\n    function Autosave() {\r\n    }\r\n    Autosave.watch = function (path, model, method) {\r\n        if (method === void 0) { method = 'put'; }\r\n        if (autosaved.findIndex(function (e) { return e.model === model && e.path === path; }) !== -1) {\r\n            return;\r\n        }\r\n        var autosave;\r\n        if (typeof path === 'string') {\r\n            autosave = {\r\n                model: model,\r\n                path: path,\r\n                method: method\r\n            };\r\n        }\r\n        else {\r\n            autosave = {\r\n                model: model,\r\n                fn: path,\r\n                method: method\r\n            };\r\n        }\r\n        autosaved.push(autosave);\r\n        if (!loopStarted) {\r\n            loop();\r\n        }\r\n    };\r\n    Autosave.unwatch = function (model) {\r\n        var index = autosaved.findIndex(function (e) { return e.model === model; });\r\n        autosaved.splice(index, 1);\r\n        if (autosaved.length === 0) {\r\n            this.unwatchAll();\r\n        }\r\n    };\r\n    Autosave.unwatchAll = function () {\r\n        autosaved = [];\r\n        clearTimeout(token);\r\n        loopStarted = false;\r\n    };\r\n    return Autosave;\r\n}());\r\nexports.Autosave = Autosave;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/autosaver.js\n// module id = 46\n// module chunks = 0","module.exports = require('./lib/axios');\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/index.js\n// module id = 47\n// module chunks = 0","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(utils.merge(defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/axios.js\n// module id = 48\n// module chunks = 0","'use strict';\n\nvar bind = require('./helpers/bind');\nvar isBuffer = require('is-buffer');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && navigator.product === 'ReactNative') {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object' && !isArray(obj)) {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/utils.js\n// module id = 49\n// module chunks = 0","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/bind.js\n// module id = 50\n// module chunks = 0","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/is-buffer/index.js\n// module id = 51\n// module chunks = 0","'use strict';\n\nvar defaults = require('./../defaults');\nvar utils = require('./../utils');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = utils.merge({\n      url: arguments[0]\n    }, arguments[1]);\n  }\n\n  config = utils.merge(defaults, this.defaults, { method: 'get' }, config);\n  config.method = config.method.toLowerCase();\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/Axios.js\n// module id = 52\n// module chunks = 0","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/defaults.js\n// module id = 53\n// module chunks = 0","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/normalizeHeaderName.js\n// module id = 54\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\nvar btoa = (typeof window !== 'undefined' && window.btoa && window.btoa.bind(window)) || require('./../helpers/btoa');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n    var loadEvent = 'onreadystatechange';\n    var xDomain = false;\n\n    // For IE 8/9 CORS support\n    // Only supports POST and GET calls and doesn't returns the response headers.\n    // DON'T do this for testing b/c XMLHttpRequest is mocked, not XDomainRequest.\n    if (process.env.NODE_ENV !== 'test' &&\n        typeof window !== 'undefined' &&\n        window.XDomainRequest && !('withCredentials' in request) &&\n        !isURLSameOrigin(config.url)) {\n      request = new window.XDomainRequest();\n      loadEvent = 'onload';\n      xDomain = true;\n      request.onprogress = function handleProgress() {};\n      request.ontimeout = function handleTimeout() {};\n    }\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request[loadEvent] = function handleLoad() {\n      if (!request || (request.readyState !== 4 && !xDomain)) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        // IE sends 1223 instead of 204 (https://github.com/mzabriskie/axios/issues/201)\n        status: request.status === 1223 ? 204 : request.status,\n        statusText: request.status === 1223 ? 'No Content' : request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n          cookies.read(config.xsrfCookieName) :\n          undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/adapters/xhr.js\n// module id = 55\n// module chunks = 0","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  // Note: status is not exposed by XDomainRequest\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/settle.js\n// module id = 56\n// module chunks = 0","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/createError.js\n// module id = 57\n// module chunks = 0","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n  error.request = request;\n  error.response = response;\n  return error;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/enhanceError.js\n// module id = 58\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      }\n\n      if (!utils.isArray(val)) {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/buildURL.js\n// module id = 59\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/parseHeaders.js\n// module id = 60\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    var msie = /(msie|trident)/i.test(navigator.userAgent);\n    var urlParsingNode = document.createElement('a');\n    var originURL;\n\n    /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      var href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n                  urlParsingNode.pathname :\n                  '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })()\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/isURLSameOrigin.js\n// module id = 61\n// module chunks = 0","'use strict';\n\n// btoa polyfill for IE<10 courtesy https://github.com/davidchambers/Base64.js\n\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction E() {\n  this.message = 'String contains an invalid character';\n}\nE.prototype = new Error;\nE.prototype.code = 5;\nE.prototype.name = 'InvalidCharacterError';\n\nfunction btoa(input) {\n  var str = String(input);\n  var output = '';\n  for (\n    // initialize result and counter\n    var block, charCode, idx = 0, map = chars;\n    // if the next str index does not exist:\n    //   change the mapping table to \"=\"\n    //   check if d has no fractional digits\n    str.charAt(idx | 0) || (map = '=', idx % 1);\n    // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n    output += map.charAt(63 & block >> 8 - idx % 1 * 8)\n  ) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n    if (charCode > 0xFF) {\n      throw new E();\n    }\n    block = block << 8 | charCode;\n  }\n  return output;\n}\n\nmodule.exports = btoa;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/btoa.js\n// module id = 62\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n  (function standardBrowserEnv() {\n    return {\n      write: function write(name, value, expires, path, domain, secure) {\n        var cookie = [];\n        cookie.push(name + '=' + encodeURIComponent(value));\n\n        if (utils.isNumber(expires)) {\n          cookie.push('expires=' + new Date(expires).toGMTString());\n        }\n\n        if (utils.isString(path)) {\n          cookie.push('path=' + path);\n        }\n\n        if (utils.isString(domain)) {\n          cookie.push('domain=' + domain);\n        }\n\n        if (secure === true) {\n          cookie.push('secure');\n        }\n\n        document.cookie = cookie.join('; ');\n      },\n\n      read: function read(name) {\n        var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n        return (match ? decodeURIComponent(match[3]) : null);\n      },\n\n      remove: function remove(name) {\n        this.write(name, '', Date.now() - 86400000);\n      }\n    };\n  })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return {\n      write: function write() {},\n      read: function read() { return null; },\n      remove: function remove() {}\n    };\n  })()\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/cookies.js\n// module id = 63\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/InterceptorManager.js\n// module id = 64\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/dispatchRequest.js\n// module id = 65\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/transformData.js\n// module id = 66\n// module chunks = 0","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/isCancel.js\n// module id = 67\n// module chunks = 0","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/isAbsoluteURL.js\n// module id = 68\n// module chunks = 0","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/combineURLs.js\n// module id = 69\n// module chunks = 0","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/Cancel.js\n// module id = 70\n// module chunks = 0","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/CancelToken.js\n// module id = 71\n// module chunks = 0","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/spread.js\n// module id = 72\n// module chunks = 0","import {angular, moment, _, idiom as lang, model } from 'entcore';\r\nimport { PedagogicItem } from \"./models/PedagogicItem.model\";\r\n\r\nexport const DATE_FORMAT = 'YYYY-MM-DD';\r\n\r\n/**\r\n * removes accent from any string\r\n * @param str\r\n * @returns {*}\r\n */\r\nexport const sansAccent = function (str) {\r\n    if (!str) {\r\n        return;\r\n    }\r\n    var accent = [\r\n        /[\\300-\\306]/g, /[\\340-\\346]/g, // A, a\r\n        /[\\310-\\313]/g, /[\\350-\\353]/g, // E, e\r\n        /[\\314-\\317]/g, /[\\354-\\357]/g, // I, i\r\n        /[\\322-\\330]/g, /[\\362-\\370]/g, // O, o\r\n        /[\\331-\\334]/g, /[\\371-\\374]/g, // U, u\r\n        /[\\321]/g, /[\\361]/g, // N, n\r\n        /[\\307]/g, /[\\347]/g // C, c\r\n    ];\r\n    var noaccent = ['A', 'a', 'E', 'e', 'I', 'i', 'O', 'o', 'U', 'u', 'N', 'n', 'C', 'c'];\r\n\r\n\r\n    for (var i = 0; i < accent.length; i++) {\r\n        str = str.replace(accent[i], noaccent[i]);\r\n    }\r\n\r\n    return str;\r\n};\r\n\r\n/**\r\n * Transform sql homework data (table diary.homework)\r\n * to json\r\n * @param sqlHomework\r\n * @returns {{id: *, description: *, audience: *, subjectId: *, subjectLabel: *, type: *, typeId: *, typeLabel: *, teacherId: *, structureId: (*|T), audienceId: *, audienceLabel: *, dueDate: *, date: *, title: *, color: *, startMoment: *, endMoment: *, state: *, is_periodic: boolean, lesson_id: *}}\r\n */\r\nexport const sqlToJsHomework = (sqlHomework) => {\r\n    let homework: any = {\r\n        //for share directive you must have _id\r\n        _id: sqlHomework.id,\r\n        id: sqlHomework.id,\r\n        description: sqlHomework.homework_description,\r\n        audienceId: sqlHomework.audience_id,\r\n        audience: model.audiences.findWhere({id: sqlHomework.audience_id}),\r\n        subject: model.subjects.findWhere({id: sqlHomework.subject_id}),\r\n        subjectId: sqlHomework.subject_id,\r\n        subjectLabel: sqlHomework.subject_label,\r\n        type: model.homeworkTypes.findWhere({id: sqlHomework.homework_type_id}),\r\n        typeId: sqlHomework.homework_type_id,\r\n        typeLabel: sqlHomework.homework_type_label,\r\n        teacherId: sqlHomework.teacher_id,\r\n        structureId: sqlHomework.structureId,\r\n        audienceType: sqlHomework.audience_type,\r\n        audienceLabel: sqlHomework.audience_label,\r\n        // TODO delete dueDate? (seems redondant info vs date field)\r\n        dueDate: moment(sqlHomework.homework_due_date),\r\n        date: moment(sqlHomework.homework_due_date),\r\n        title: sqlHomework.homework_title,\r\n        color: sqlHomework.homework_color,\r\n        startMoment: moment(sqlHomework.homework_due_date),\r\n        endMoment: moment(sqlHomework.homework_due_date),\r\n        state: sqlHomework.homework_state,\r\n        is_periodic: false,\r\n        lesson_id: sqlHomework.lesson_id\r\n    };\r\n\r\n    if (sqlHomework.attachments) {\r\n        homework.attachments = JSON.parse(sqlHomework.attachments);\r\n    }\r\n\r\n    if ('group' === homework.audienceType) {\r\n        homework.audienceTypeLabel = lang.translate('diary.audience.group');\r\n    } else {\r\n        homework.audienceTypeLabel = lang.translate('diary.audience.class');\r\n    }\r\n\r\n    return homework;\r\n};\r\n\r\n\r\n/** Converts sql pedagogic item to js data */\r\nexport const sqlToJsPedagogicItem = (data) => {\r\n    //TODO use service\r\n    var item = new PedagogicItem();\r\n    item.type_item = data.type_item;\r\n    item.id = data.id;\r\n    //for share directive you must have _id\r\n    item._id = data.id;\r\n    item.lesson_id = data.lesson_id;\r\n    item.title = data.title;\r\n    item.subject = data.subject;\r\n    item.audience = data.audience;\r\n    item.start_hour = (data.type_item == \"lesson\") ? moment(data.day).minutes(model.getMinutes(data.start_time)).format(\"HH[h]mm\") : \"\";\r\n    item.end_hour = (data.type_item == \"lesson\") ? moment(data.day).minutes(model.getMinutes(data.end_time)).format(\"HH[h]mm\") : \"\";\r\n    item.type_homework = data.type_homework;\r\n    item.teacher = data.teacher;\r\n    item.description = data.description;\r\n    item.expanded_description = false;\r\n    item.state = data.state;\r\n    item.color = data.color;\r\n    item.getPreviewDescription();\r\n    item.room = data.room;\r\n    item.day = data.day;\r\n    item.turn_in = (data.type_item == \"lesson\") ? \"\" : data.turn_in_type;\r\n    item.selected = false;\r\n    item.locked = data.locked;\r\n\r\n    if (data.day) {\r\n        item.dayFormatted = moment(data.day).format(\"DD/MM/YYYY\");\r\n        item.dayOfWeek = moment(data.day).format(\"dddd\");\r\n    }\r\n    return item;\r\n};\r\n\r\n\r\nexport const syncHomeworks = async function (cb) {\r\n    return model.homeworks.syncHomeworks().then(() => {\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    });\r\n};\r\n\r\nexport const syncLessonsAndHomeworks = function (cb?) {\r\n\r\n    // need sync attached lesson homeworks\r\n    return model.homeworks.syncHomeworks().then(() => {\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    });\r\n};\r\n\r\n\r\n/**\r\n * Convert sql diary.lesson row to js row used in angular model\r\n * @param lesson Sql diary.lesson row\r\n */\r\nexport const sqlToJsLesson = (data) => {\r\n\r\n    console.warn(\"deprecated\");\r\n    return;\r\n    /*var lessonHomeworks = new Array();\r\n\r\n    // only initialize homeworks attached to lesson\r\n    // with only id\r\n    if (data.homework_ids) {\r\n        for (var i = 0; i < data.homework_ids.length; i++) {\r\n            var homework = new Homework();\r\n            homework.id = data.homework_ids[i];\r\n            homework.lesson_id = parseInt(data.lesson_id);\r\n            homework.loaded = false; // means full data from sql not loaded\r\n            lessonHomeworks.push(homework);\r\n        }\r\n    }\r\n\r\n    let lesson: any = {\r\n        //for share directive you must have _id\r\n        _id: data.lesson_id,\r\n        id: data.lesson_id,\r\n        title: data.lesson_title,\r\n        audience: model.audiences.findWhere({id: data.audience_id}),\r\n        audienceId: data.audience_id,\r\n        audienceLabel: data.audience_label,\r\n        audienceType: data.audience_type,\r\n        description: data.lesson_description,\r\n        subject: model.subjects.findWhere({id: data.subject_id}),\r\n        subjectId: data.subject_id,\r\n        subjectLabel: data.subject_label,\r\n        teacherId: data.teacher_display_name,\r\n        teacherName: data.teacher_display_name,\r\n        structureId: data.school_id,\r\n        date: moment(data.lesson_date),\r\n        startTime: data.lesson_start_time,\r\n        endTime: data.lesson_end_time,\r\n        color: data.lesson_color,\r\n        room: data.lesson_room,\r\n        annotations: data.lesson_annotation,\r\n        startMoment: moment(data.lesson_date.split(' ')[0] + ' ' + data.lesson_start_time),\r\n        endMoment: moment(data.lesson_date.split(' ')[0] + ' ' + data.lesson_end_time),\r\n        state: data.lesson_state,\r\n        is_periodic: false,\r\n        homeworks: lessonHomeworks,\r\n        tooltipText: '',\r\n        locked: (!model.canEdit()) ? true : false\r\n    };\r\n\r\n    if ('group' === lesson.audienceType) {\r\n        lesson.audienceTypeLabel = lang.translate('diary.audience.group');\r\n    } else {\r\n        lesson.audienceTypeLabel = lang.translate('diary.audience.class');\r\n    }\r\n\r\n    if (data.attachments) {\r\n        lesson.attachments = _.map(JSON.parse(data.attachments), jsonToJsAttachment);\r\n    }\r\n\r\n\r\n    //var tooltip = getResponsiveLessonTooltipText(lesson);\r\n\r\n    //lesson.tooltipText = tooltip;\r\n    return lesson;*/\r\n};\r\n\r\nexport const jsonToJsAttachment = (data) => {\r\n\r\n    console.warn(\"deprecated\");\r\n    return;\r\n    /*var att = new Attachment();\r\n    att.id = data.id;\r\n    att.user_id = data.user_id;\r\n    att.creation_date = data.creation_date;\r\n    att.document_id = data.document_id;\r\n    att.document_label = data.document_label;\r\n\r\n    return att;*/\r\n};\r\n\r\n/**\r\n * Set lesson tooltip text depending on screen resolution.\r\n * Tricky responsive must be linked to additional.css behaviour\r\n * @param lesson\r\n */\r\nexport const getResponsiveLessonTooltipText = (lesson) => {\r\n\r\n    console.warn(\"deprecated use utils service\");\r\n    return;\r\n    /*var tooltipText = lesson.title + ' (' + lang.translate(lesson.state) + ')';\r\n    var screenWidth = window.innerWidth;\r\n\r\n    // < 900 px display room\r\n    if (screenWidth < 900 && lesson.room) {\r\n        tooltipText += '<br>' + lesson.room;\r\n    }\r\n\r\n    // < 650 px display hour start and hour end\r\n    if (screenWidth < 650) {\r\n        tooltipText += '<br>' + [[lesson.startMoment.format('HH')]] + 'h' + [[lesson.startMoment.format('mm')]];\r\n        tooltipText += ' -> ' + [[lesson.endMoment.format('HH')]] + 'h' + [[lesson.endMoment.format('mm')]];\r\n    }\r\n\r\n    // < 600 px display subjectlabel\r\n    if (screenWidth < 650 && lesson.subjectLabel) {\r\n        tooltipText += '<br>' + lesson.subjectLabel;\r\n    }\r\n\r\n    tooltipText = tooltipText.trim();\r\n\r\n    return tooltipText;*/\r\n};\r\n\r\n/**\r\n * Transform sql homework load data to json like\r\n * @param sqlHomeworkType\r\n */\r\nexport const sqlToJsHomeworkLoad = (sqlHomeworkload) => {\r\n    return {\r\n        countLoad: sqlHomeworkload.countload,\r\n        description: sqlHomeworkload.countload + ' ' + (sqlHomeworkload.countload > 1 ? lang.translate('diary.homework.labels') : lang.translate('diary.homework.label')),\r\n        day: moment(sqlHomeworkload.day).format('dddd').substring(0, 1).toUpperCase(), // 'lundi' -> 'lu' -> 'L'\r\n        numDay: moment(sqlHomeworkload.day).format('DD') // 15\r\n    };\r\n};\r\n\r\n/**\r\n * Transform sql homework type data to json like\r\n * @param sqlHomeworkType\r\n * @returns {{id: *, structureId: (*|T), label: *, category: *}}\r\n */\r\nexport const sqlToJsHomeworkType = (sqlHomeworkType) => {\r\n    return {\r\n        id: sqlHomeworkType.id,\r\n        structureId: sqlHomeworkType.school_id,\r\n        label: sqlHomeworkType.homework_type_label,\r\n        category: sqlHomeworkType.homework_type_category\r\n    };\r\n};\r\n\r\nexport const CONSTANTS = {\r\n    CAL_DATE_PATTERN: \"YYYY-MM-DD\",\r\n    CAL_DATE_PATTERN_NG: \"dd-MM-yyyy\",\r\n    CAL_DATE_PATTERN_SLASH: \"dd/MM/yyyy\",\r\n    LONG_DATE_PATTERN: 'YYYY-MM-DD hh:mm:ss',\r\n    RIGHTS: {\r\n        CREATE_LESSON: 'diary.createLesson',\r\n        VIEW: 'diary.view',\r\n        CREATE_HOMEWORK_FOR_LESSON: 'createHomeworkForLesson',\r\n        CREATE_FREE_HOMEWORK: 'diary.createFreeHomework',\r\n\r\n        MANAGE_MODEL_WEEK: 'diary.manageModelWeek.update',\r\n        MANAGE_HISTORY: 'diary.manageHistory.apply',\r\n        SHOW_HISTORY: 'diary.showHistory.filters',\r\n        VISA_APPLY_VISA: \"diary.visa.applyvisa\",\r\n        VISA_INSPECTOR: \"diary.visa.inspect.filters\",\r\n        VISA_ADMIN: \"diary.visa.admin.filters\",\r\n        MANAGE_INSPECTOR: \"diary.manageInspect.apply\",\r\n        SHOW_OTHER_TEACHER: \"diary.view.otherteacher\"\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * Default color of lesson and homeworks\r\n * @type {string}\r\n */\r\nexport const DEFAULT_ITEM_COLOR = '#CECEF6';\r\n\r\n/**\r\n * Default state of lesson or homework when created\r\n * @type {string}\r\n */\r\nexport const DEFAULT_STATE = 'draft';\r\n\r\n\r\n/**\r\n * Get school ids of current authenticated user as string\r\n * seperated with ':'\r\n * @returns {string} schoolid_1:schoolid_2:...\r\n */\r\nexport function getUserStructuresIdsAsString() {\r\n    var structureIds = \"\";\r\n\r\n    model.me.structures.forEach(function (structureId) {\r\n        structureIds += structureId + \":\";\r\n    });\r\n\r\n    return structureIds;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/tools.ts","import {model, _} from 'entcore';\r\nimport http from 'axios';\r\n\r\nexport class PedagogicItem {\r\n    selected: any;\r\n    type_item: any;\r\n    id: any;\r\n    _id: any;\r\n    lesson_id: any;\r\n    title: any;\r\n    subject: any;\r\n    audience: any;\r\n    start_hour: any;\r\n    end_hour: any;\r\n    type_homework: any;\r\n    teacher: any;\r\n    description: any;\r\n    expanded_description: any;\r\n    state: any;\r\n    color: any;\r\n    room: any;\r\n    day: any;\r\n    turn_in: any;\r\n    locked: any;\r\n    dayFormatted: any;\r\n    dayOfWeek: any;\r\n\r\n\r\n    descriptionMaxSize = 140;\r\n\r\n    isPublished = function () { return this.state === 'published'; };\r\n\r\n\r\n    constructor() {\r\n        this.selected = false;\r\n    }\r\n\r\n    deleteModelReferences = function () {\r\n        model.deletePedagogicItemReferences(this.id);\r\n    };\r\n\r\n    changeState = function (toPublish) {\r\n        //if item is a lesson may need to upgrade his related homework\r\n        if (this.type_item === 'lesson') {\r\n            var relatedToLesson = model.pedagogicDays.getItemsByLesson(this.id);\r\n            relatedToLesson.forEach(function (item) {\r\n                item.state = toPublish ? 'published' : 'draft';\r\n            })\r\n        } else {\r\n            this.state = toPublish ? 'published' : 'draft';\r\n        }\r\n    };\r\n\r\n    getPreviewDescription = function () {\r\n\r\n        if (this.description) {\r\n            if (this.description.length >= this.descriptionMaxSize) {\r\n                this.preview_description = '<p class=\"itemPreview\">' + $('<div>' + this.description + '</div>').text().substring(0, this.descriptionMaxSize) + '...</p>';\r\n            } else {\r\n                this.preview_description = this.description;\r\n            }\r\n        } else {\r\n            this.preview_description = this.description;\r\n        }\r\n    };\r\n\r\n    isPublishable = function (toPublish) {\r\n        return this.id && this.state == (toPublish ? 'draft' : 'published') && (this.lesson_id == null || this.lesson_id == this.id); // id test to detect free homeworks\r\n    };\r\n\r\n    delete = function (cb, cbe) {\r\n\r\n        var url = (this.type_item == \"lesson\") ? '/diary/lesson/' : '/diary/homework/';\r\n        var idToDelete = this.id;\r\n        http.delete(url + idToDelete, this).then(function (b) {\r\n\r\n            model.deletePedagogicItemReferences(idToDelete);\r\n\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }).catch(function (e) {\r\n            if (typeof cbe === 'function') {\r\n                cbe(model.parseError(e));\r\n            }\r\n        });\r\n    };\r\n\r\n    deleteList = function (items, cb, cbe) {\r\n\r\n        // split into two arrays of PedagogicItem, one for the lessons, one for the homeworks\r\n        var itemsByType = []; // array of array(s)\r\n\r\n        if (items.length == 1) {\r\n            itemsByType.push(items);\r\n        } else {\r\n            itemsByType = _.partition(items, function (item) {\r\n                return item.type_item === 'lesson';\r\n            });\r\n        }\r\n\r\n        var countdown = 0;\r\n\r\n        if (itemsByType.length > 0) {\r\n            countdown = itemsByType.length;\r\n\r\n            itemsByType.forEach(function (arrayForTypeItem) {\r\n                if (arrayForTypeItem.length > 0) {\r\n                    model.deleteItemList(arrayForTypeItem, arrayForTypeItem[0].type_item, function () {\r\n                        countdown--;\r\n                        if (countdown == 0) {\r\n                            if (typeof cb === 'function') {\r\n                                cb();\r\n                            }\r\n                        }\r\n                    }, cbe);\r\n                } else {\r\n                    countdown--;\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    isFiltered = function () {\r\n        if (model.searchForm.selectedSubject != null) {\r\n            return !(this.subject === model.searchForm.selectedSubject);\r\n        }\r\n        return false;\r\n    };\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/models/PedagogicItem.model.ts","import {_, moment} from 'entcore';\r\n\r\nexport class PedagogicDay {\r\n    selected = false;\r\n    dayName = moment().format(\"dddd DD MMMM YYYY\");\r\n    shortName = this.dayName.substring(0, 2);\r\n    shortDate = moment().format(\"DD/MM\");\r\n    pedagogicItemsOfTheDay = [];\r\n    nbLessons = 0;\r\n    nbHomeworks = 0;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    numberOfItems = function () {\r\n        return this.nbLessons + this.nbHomeworks;\r\n    };\r\n\r\n    resetCountValues = function () {\r\n        var countItems = _.groupBy(this.pedagogicItemsOfTheDay, 'type_item');\r\n        this.nbLessons = (countItems['lesson']) ? countItems['lesson'].length : 0;\r\n        this.nbHomeworks = (countItems['homework']) ? countItems['homework'].length : 0;\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/models/PedagogicDay.model.ts","import {model, moment} from 'entcore';\r\nimport {DATE_FORMAT} from '../tools';\r\n\r\nexport class SearchForm {\r\n\r\n    startDate = {};\r\n    endDate = {};\r\n    publishState = {};\r\n    returnType = {};\r\n    displayLesson = {};\r\n    displayHomework = {};\r\n    audienceId = {};\r\n    subjects = [];\r\n    selectedSubject = null;\r\n    subjectsFilters = [];\r\n    multiSearchHomework: any;\r\n    multiSearchLesson: any;\r\n    limit: any;\r\n    sortOrder:any;\r\n\r\n    /**\r\n     * If true search result will be stored in model.quickSearchPedagogicDays instead of model.pedagogicDays\r\n     * @type {boolean}\r\n     */\r\n    isQuickSearch: any;\r\n    /**\r\n     * Custom pedagogic days array.\r\n     * Avoid conflicting with model.pedagogicDays)\r\n     * @type {Array}\r\n     */\r\n    customPedagogicDaysArray;\r\n\r\n    constructor(isQuickSearch) {\r\n        this.isQuickSearch = isQuickSearch;\r\n    }\r\n\r\n    initForTeacher = function () {\r\n        this.publishState = \"\";\r\n        this.returnType = \"both\";\r\n        var period = moment(model.calendar.dayForWeek).day(1);\r\n        this.startDate = period.format(DATE_FORMAT);\r\n        this.endDate = period.add(15, 'days').format(DATE_FORMAT);\r\n        this.displayLesson = true;\r\n        this.displayHomework = true;\r\n        this.audienceId = \"\";\r\n    };\r\n\r\n    initForStudent = function () {\r\n        this.publishState = \"published\";\r\n        this.returnType = \"both\";\r\n        var period = moment(model.calendar.dayForWeek).day(1);\r\n        this.startDate = period.format(DATE_FORMAT);\r\n        this.endDate = period.add(15, 'days').format(DATE_FORMAT);\r\n        this.displayLesson = false;\r\n        this.displayHomework = true;\r\n    };\r\n\r\n    getSearch = function () {\r\n\r\n        let params: any = {};\r\n        params.startDate = this.startDate;\r\n        params.endDate = this.endDate;\r\n        params.publishState = this.publishState;\r\n        params.returnType = this.returnType;\r\n\r\n        if (model.isUserParent()) {\r\n            params.audienceId = model.child.classId;\r\n        }\r\n        return params;\r\n    };\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/models/SearchForm.model.ts","import {model, Model} from 'entcore';\r\n\r\nexport class Subject extends Model {\r\n\r\n    id: any;\r\n    school_id: any;\r\n    label: any;\r\n    teacher_id: any;\r\n    original_subject_id: any;\r\n    originalsubjectid: any;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * Saves the subject to databases.\r\n     * It's auto-created if it does not exists in database\r\n     * @param cb\r\n     * @param cbe\r\n     */\r\n    save = function (cb, cbe) {\r\n        if (this.id) {\r\n            // not implemented yet at this stage/ not needed\r\n        }\r\n        else {\r\n            return this.create(cb, cbe);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Creates a subject\r\n     * @param cb Callback function\r\n     * @param cbe Callback on error function\r\n     */\r\n    create = function (cb, cbe) {\r\n        var subject = this;\r\n\r\n        if (!this.school_id) {\r\n            this.school_id = model.me.structures[0];\r\n        }\r\n\r\n        return model.getHttp()({\r\n            method: 'POST',\r\n            url: '/diary/subject',\r\n            data: subject\r\n        }).then(function (result) {\r\n            //subject.updateData(subject);\r\n            subject.updateData(result.data);\r\n            model.subjects.all.push(subject);\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n            return subject;\r\n        });\r\n    };\r\n\r\n\r\n    toJSON = function () {\r\n\r\n        return {\r\n            id: this.id,\r\n            school_id: this.school_id,\r\n            subject_label: this.label,\r\n            teacher_id: this.teacher_id,\r\n            original_subject_id: this.originalsubjectid\r\n        };\r\n    };\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/models/Subject.model.ts","import {model} from 'entcore';\r\nimport http from 'axios';\r\n\r\n\r\nexport class Teacher {\r\n    constructor() {\r\n    }\r\n\r\n    create = function (cb, cbe) {\r\n\r\n        model.me.structures.forEach(function (structureId) {\r\n            http.post('/diary/teacher/' + structureId).then(function (e) {\r\n\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n            }).catch(function (e) {\r\n                if (typeof cbe === 'function') {\r\n                    cbe(model.parseError(e));\r\n                }\r\n            });\r\n        });\r\n    };\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/models/Teacher.model.ts","import {model, moment, collection} from 'entcore';\r\nimport { Selectable } from \"entcore-toolkit\";\r\nimport {DATE_FORMAT, syncLessonsAndHomeworks} from '../tools';\r\n\r\nimport {Homework} from './Homework.model';\r\nimport {Subject} from './Subject.model';\r\nimport {Audience} from '../model';\r\n\r\nexport class Lesson implements Selectable {\r\n    homeworks: any;\r\n\r\n\r\n    id: any;\r\n    subject: any;\r\n    audience: any;\r\n    title: any;\r\n    color: any;\r\n    date: any;\r\n    startTime: any;\r\n    endTime: any;\r\n    description: any;\r\n    annotations: any;\r\n    state: any;\r\n    attachments: any;\r\n\r\n    newItem: any;\r\n    room: any;\r\n    audienceType: any;\r\n\r\n    selected: boolean;\r\n\r\n    constructor(data?) {\r\n\r\n        this.selected = false;\r\n        //this.collection(Attachment);\r\n        // initialize homeworks collection (see lib.js)\r\n        if (!this.homeworks) {\r\n           model.collection(Homework);\r\n        }\r\n        this.subject = (data) ? data.subject : new Subject();\r\n        this.audience = (data) ? data.audience : new Audience();\r\n\r\n        /**\r\n         *\r\n         * Attachments\r\n         */\r\n        if (!this.attachments) {\r\n            this.attachments = new Array();\r\n        }\r\n    }\r\n\r\n    api = {delete: '/diary/lesson/:id'};\r\n\r\n    /**\r\n     * Adds an attachment\r\n     * @param attachment\r\n     */\r\n    addAttachment = function (attachment) {\r\n        this.attachments.push(attachment);\r\n    };\r\n\r\n\r\n    /**\r\n     * Delete calendar references of current lesson\r\n     */\r\n    deleteModelReferences = () => {\r\n        var that = this;\r\n        model.lessons.forEach(function (lesson) {\r\n            if (lesson.id === that.id) {\r\n                model.lessons.remove(lesson);\r\n            }\r\n        });\r\n        // delete associated homeworks references\r\n        var lessonHomeworks = model.homeworks.filter(function (homework) {\r\n            return homework && homework.lesson_id === that.id;\r\n        });\r\n\r\n        lessonHomeworks.forEach(function (homework) {\r\n            model.homeworks.remove(homework);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Triggered when lesson item has stopped being dragged in calendar view\r\n     * see angular-app.js scheduleItemEl.on('stopDrag').\r\n     * Will auto-save lesson in db on item move/resize\r\n     * @param cb\r\n     * @param cbe\r\n     */\r\n    calendarUpdate = function (cb, cbe) {\r\n\r\n        // TODO date fields types are kinda messy\r\n        // toJson method needs date fields to be in some specific format\r\n        if (this.beginning) {\r\n            this.date = this.beginning;\r\n            this.startMoment = this.beginning;\r\n            this.endMoment = this.end;\r\n            this.startTime = this.startMoment;\r\n            this.endTime = this.endMoment;\r\n        }\r\n        if (this.id) {\r\n            this.update(function () {\r\n                //model.refresh();\r\n            }, function (error) {\r\n                model.parseError(error);\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Save attached homeworks of lesson\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    saveHomeworks = function (cb, cbe) {\r\n\r\n        var deferred = model.$q().defer();\r\n\r\n        var homeworkSavedCount = 0;\r\n        var homeworkCount = this.homeworks ? this.homeworks.all.length : 0;\r\n        var that = this;\r\n\r\n        // make sure subject and audience of homeworks are\r\n        // same as the lesson\r\n        if (homeworkCount > 0) {\r\n            this.homeworks.forEach(function (homework) {\r\n                homework.lesson_id = that.id;\r\n                // needed fields as in model.js Homework.prototype.toJSON\r\n                homework.audience = that.audience;\r\n                homework.subject = that.subject;\r\n                homework.color = that.color;\r\n                homework.state = that.state;\r\n                homework.save().then(() => {\r\n                    homeworkSavedCount++;\r\n                    // callback function once all homeworks saved\r\n                    if (homeworkSavedCount === homeworkCount) {\r\n                        if (typeof cb === 'function') {\r\n                            cb();\r\n                        }\r\n                        deferred.resolve();\r\n                    }\r\n                });\r\n\r\n            });\r\n        } else {\r\n            deferred.resolve();\r\n        }\r\n\r\n        return deferred.promise;\r\n    };\r\n\r\n    /**\r\n     * Save lesson and attached homeworks\r\n     * and sync calendar lessons and homeworks cache\r\n     * @param cb\r\n     * @param cbe\r\n     */\r\n    save = function (cb, cbe) {\r\n\r\n\r\n\r\n        // startTime used for db save but startMoment in calendar view\r\n        // startMoment day is given by lesson.date\r\n        this.startMoment = model.getMomentDateTimeFromDateAndMomentTime(this.date, moment(this.startTime));\r\n        this.endMoment = model.getMomentDateTimeFromDateAndMomentTime(this.date, moment(this.endTime));\r\n        var that = this;\r\n        var subjectPromise = model.$q().when();\r\n        var lessonPromise;\r\n        if (!this.subject.id) {\r\n            subjectPromise = this.subject.save();\r\n        }\r\n\r\n        return subjectPromise.then(() => {\r\n            if (that.id) {\r\n                lessonPromise = that.update();\r\n            }\r\n            else {\r\n                lessonPromise = that.create();\r\n            }\r\n\r\n            return lessonPromise.then(() => {\r\n                return that.saveHomeworks().then(() => {\r\n                    return syncLessonsAndHomeworks(cb);\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param idHomework\r\n     * @returns {boolean}\r\n     */\r\n    hasHomeworkWithId = function (idHomework) {\r\n\r\n        var found = false;\r\n\r\n        if (!idHomework || !this.homeworks) {\r\n            found = false;\r\n        }\r\n\r\n\r\n        this.homeworks.forEach(function (homework) {\r\n            if (homework.id === idHomework) {\r\n                found = true;\r\n            }\r\n        });\r\n\r\n        return found;\r\n    };\r\n\r\n\r\n    update = function (cb, cbe) {\r\n        var url = '/diary/lesson/' + this.id;\r\n\r\n        var lesson = this;\r\n\r\n        return model.getHttp()({\r\n            method: 'PUT',\r\n            url: url,\r\n            data: lesson\r\n        }).then(function () {\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        });\r\n    };\r\n\r\n    create = function (cb, cbe) {\r\n        var lesson = this;\r\n\r\n        let subject = model.subjects.all.find((l) => {\r\n            return l.label = lesson.subject.label\r\n        });\r\n\r\n        let createSubjectPromise = model.$q().when();\r\n\r\n        if (!subject) {\r\n            createSubjectPromise = model.createSubject(lesson.subject.label).then((newSubject) => {\r\n                lesson.subject = newSubject;\r\n            });\r\n        } else {\r\n            lesson.subject = subject;\r\n        }\r\n\r\n        return createSubjectPromise.then(() => {\r\n            return model.getHttp()({\r\n                method: 'POST',\r\n                url: '/diary/lesson',\r\n                data: lesson\r\n            }).then(function (result) {\r\n                lesson.updateData(result.data);\r\n                model.lessons.pushAll([lesson]);\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n            });\r\n        })\r\n    };\r\n\r\n\r\n    /**\r\n     * Deletes the lesson\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    delete = function (cb, cbe) {\r\n\r\n        var lesson = this;\r\n\r\n        model.getHttp()({\r\n            method: 'DELETE',\r\n            url: '/diary/lesson/' + this.id,\r\n            data: lesson\r\n        }).then(function (b) {\r\n            lesson.deleteModelReferences();\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Deletes a list of lessons\r\n     * @param lessons Lessons to be deleted\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    deleteList = function (lessons, cb, cbe) {\r\n        model.deleteItemList(lessons, 'lesson', cb, cbe);\r\n    };\r\n\r\n    /**\r\n     * Load lesson object from id\r\n     * @param cb Callback function\r\n     * @param cbe Callback on error function\r\n     */\r\n    load = function (loadHomeworks, cb, cbe) {\r\n\r\n        var lesson = this;\r\n\r\n        let url = '/diary/lesson/';\r\n        if (model.getSecureService().hasRight(model.getConstants().RIGHTS.SHOW_OTHER_TEACHER)) {\r\n            url = '/diary/lesson/external/';\r\n        }\r\n\r\n\r\n        return model.getHttp()({\r\n            method: 'GET',\r\n            url: url + lesson.id\r\n        }).then(function (result) {\r\n            lesson.updateData(model.LessonService.mapLesson(result.data));\r\n\r\n            if (loadHomeworks) {\r\n                model.loadHomeworksForLesson(lesson, cb, cbe);\r\n            } else {\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    };\r\n\r\n    /**\r\n     * Publishes the lesson\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    publish = function (cb, cbe) {\r\n\r\n        var jsonLesson = new Lesson();\r\n        jsonLesson.id = this.id;\r\n        jsonLesson.audience.structureId = this.structureId;\r\n\r\n        return model.getHttp()({\r\n            method: 'POST',\r\n            url: '/diary/lesson/publish',\r\n            data: jsonLesson\r\n        }).then(function () {\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * JSON object corresponding to sql diary.lesson table columns\r\n     */\r\n    toJSON = function () {\r\n\r\n        let json: any = {\r\n            lesson_id: this.id,\r\n            subject_id: this.subject.id,\r\n            school_id: this.audience.structureId,\r\n            // TODO missing teacher_id\r\n            audience_id: this.audience.id,\r\n            lesson_title: this.title,\r\n            lesson_color: this.color,\r\n            lesson_date: moment(this.date).format(DATE_FORMAT),\r\n            lesson_start_time: moment(this.startTime).format('HH:mm'),\r\n            lesson_end_time: moment(this.endTime).format('HH:mm'),\r\n            lesson_description: this.description,\r\n            lesson_annotation: this.annotations,\r\n            lesson_state: this.state,\r\n            // start columns not in lesson table TODO move\r\n            audience_type: this.audience.type,\r\n            audience_name: this.audience.name,\r\n            attachments: this.attachments\r\n        };\r\n\r\n        if (this.room) {\r\n            json.lesson_room = this.room;\r\n        }\r\n\r\n        return json;\r\n    };\r\n\r\n    addHomework = function (cb) {\r\n        let date = moment.isMoment(this.startTime) ? this.startTime : (this.startMoment ? this.startMoment : moment());\r\n        let dueDate = date.second(0);\r\n        var homework = model.initHomework(dueDate, this);\r\n        this.homeworks.push(homework);\r\n    };\r\n\r\n    deleteHomework = function (homework) {\r\n\r\n        homework.delete();\r\n\r\n        homework = new Homework();\r\n        homework.dueDate = this.date;\r\n        homework.type = model.homeworkTypes.first();\r\n        this.homeworks.push(homework);\r\n    };\r\n\r\n    isDraft = function () {\r\n        return this.state === \"draft\";\r\n    };\r\n\r\n    isPublished = function () {\r\n        return !this.isDraft();\r\n    };\r\n\r\n    isPublishable = function (toPublish) {\r\n        return this.id && this.state == (toPublish ? 'draft' : 'published')\r\n    };\r\n\r\n    /**\r\n     * Change state of current and associated homeworks\r\n     * @param isPublished\r\n     */\r\n    changeState = function (isPublished) {\r\n        this.state = isPublished ? 'published' : 'draft';\r\n        let that = this;\r\n        // change state of associated homeworks\r\n        this.homeworks.forEach(function (homework) {\r\n            var lessonHomework = homework;\r\n            homework.state = isPublished ? 'published' : 'draft';\r\n\r\n            var found = false;\r\n        });\r\n\r\n        // change state of homeworks cache in calendar for current week\r\n        model.homeworks.all.filter((h) => {\r\n            return h.lesson_id = that.id\r\n        }).forEach((homeworkCache) => {\r\n            homeworkCache.state = that.state;\r\n        });\r\n\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/models/Lesson.model.ts","import { angular, model, moment, _, idiom as lang, Model, calendar } from 'entcore';\r\nimport http from 'axios';\r\nimport * as tools from './tools';\r\n\r\nimport {Homework, Homeworks, PedagogicDay, Child, Subject, SearchForm} from './models/index';\r\nimport { Lesson } from './models/Lesson.model';\r\nimport {AudienceService} from \"./services/audiences.service\";\r\n\r\n/**\r\n * Model from table\r\n * diary.lesson_has_attachmentH\r\n * @constructor\r\n */\r\nexport class LessonAttachment extends Model {\r\n    constructor() {\r\n        super();\r\n    }\r\n};\r\nexport class Audience extends Model {\r\n    constructor(audience?) {\r\n        super();\r\n    }\r\n};\r\nexport class HomeworksLoad extends Model {\r\n    constructor() {\r\n        super();\r\n    }\r\n};\r\nexport class HomeworkType extends Model{\r\n    constructor() {\r\n        super();\r\n    }\r\n};\r\n\r\nexport const InitBuild = function () {\r\n\r\n    calendar.startOfDay = 8;\r\n    calendar.endOfDay = 19;\r\n    calendar.dayHeight = 65;\r\n    /*model.calendar = new calendar.Calendar({\r\n        week: moment().week()\r\n    });\r\n    */\r\n\r\n    this.makeModels([\r\n        HomeworkType,\r\n        Audience,\r\n        Subject,\r\n        Lesson,\r\n        Homework,\r\n        PedagogicDay,\r\n        Child\r\n    ]);\r\n\r\n\r\n    // keeping start/end day values in cache so we can detect dropped zones (see ng-extensions.js)\r\n    // note: model.calendar.startOfDay does not work in console.\r\n    model.startOfDay = calendar.startOfDay;\r\n    model.endOfDay = calendar.endOfDay;\r\n\r\n    Model.prototype.inherits(Lesson, calendar.ScheduleItem); // will allow to bind item.selected for checkbox\r\n\r\n    this.searchForm = new SearchForm(false);\r\n    this.currentSchool = {};\r\n\r\n    this.collection(Lesson, {\r\n        loading: false,\r\n        syncLessons: function (cb, cbe) {\r\n            console.warn(\"deprecated\");\r\n            return;\r\n\r\n        }, pushAll: function (datas) {\r\n\r\n            if (datas) {\r\n                this.all = _.union(this.all, datas);\r\n            }\r\n        }, behaviours: 'diary'\r\n    });\r\n\r\n    this.collection(Subject, {\r\n        loading: false,\r\n        syncSubjects: function (cb, cbe) {\r\n            console.warn(\"deprecated\");\r\n            return;\r\n        }\r\n    });\r\n\r\n    this.collection(Audience, {\r\n        loading: false,\r\n        syncAudiences: function syncAudiences(cb, cbe) {\r\n            console.warn(\"deprecated\");\r\n            return;\r\n        }\r\n    });\r\n\r\n    this.collection(HomeworkType, {\r\n        loading: false,\r\n        syncHomeworkTypes: async function () {\r\n            var homeworkTypes = [];\r\n            var that = this;\r\n\r\n            if (that.loading)\r\n                return;\r\n\r\n            model.homeworkTypes.all.splice(0, model.homeworkTypes.all.length);\r\n\r\n            var url = '/diary/homeworktype/initorlist';\r\n\r\n            var urlGetHomeworkTypes = url;\r\n\r\n            that.loading = true;\r\n            try {\r\n                const { data } = await model.getHttp()({\r\n                    method: 'GET',\r\n                    url: urlGetHomeworkTypes\r\n                });\r\n                homeworkTypes = homeworkTypes.concat(data);\r\n                that.addRange(\r\n                    _.map(homeworkTypes, tools.sqlToJsHomeworkType)\r\n                );\r\n                that.loading = false;\r\n                return homeworkTypes;\r\n            } catch (e) {\r\n                that.loading = false;\r\n                throw e;\r\n            }\r\n        }, pushAll: function (datas) {\r\n            if (datas) {\r\n                this.all = _.union(this.all, datas);\r\n            }\r\n        }, behaviours: 'diary'\r\n    });\r\n\r\n    model.homeworks = new Homeworks();\r\n\r\n    this.collection(PedagogicDay, {\r\n        reset: function () {\r\n            model.pedagogicDays.selectAll();\r\n            model.pedagogicDays.removeSelection();\r\n        },\r\n        syncPedagogicItems: function (cb, cbe) {\r\n            var params = model.searchForm.getSearch();\r\n            model.performPedagogicItemSearch(params, model.isUserTeacher(), cb, cbe);\r\n        },\r\n        pushAll: function (datas) {\r\n            if (datas) {\r\n                this.all = _.union(this.all, datas);\r\n            }\r\n        },\r\n        getItemsByLesson: function (lessonId) {\r\n            var items = [];\r\n\r\n            model.pedagogicDays.forEach(function (day) {\r\n                var relatedToLesson = _.filter(day.pedagogicItemsOfTheDay, function (item) {\r\n                    return item.lesson_id == lessonId;\r\n                });\r\n                items = _.union(items, relatedToLesson);\r\n            });\r\n\r\n            return items;\r\n        }\r\n    });\r\n\r\n    /**\r\n     *\r\n     */\r\n    this.collection(Child, {\r\n        reset: function () {\r\n            // n.b: childs not 'children' since collection function adds a 's'\r\n            model.childs.selectAll();\r\n            model.childs.removeSelection();\r\n        },\r\n        syncChildren: function (cb, cbe) {\r\n            model.listChildren(cb, cbe);\r\n        }, pushAll: function (datas) {\r\n            if (datas) {\r\n                this.all = _.union(this.all, datas);\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n\r\nmodel.getHttp = function(){\r\n    return  angular.element($('html')).injector().get(\"$http\");\r\n};\r\n\r\nmodel.$q = function(){\r\n    return  angular.element($('html')).injector().get(\"$q\");\r\n};\r\n\r\nmodel.getSecureService = function(){\r\n    return angular.injector(['ng','app']).get(\"SecureService\");\r\n};\r\n\r\nmodel.getUtilsService = function(){\r\n    return angular.element($('html')).injector().get(\"UtilsService\");\r\n};\r\n\r\nmodel.homeworksPerDayDisplayed = 1;\r\n/**\r\n * Says whether or not current user can edit an homework\r\n * @returns {*|boolean}\r\n */\r\nmodel.canEdit = function () {\r\n    return model.me.type == \"ENSEIGNANT\";\r\n};\r\n\r\n/**\r\n * Says whether or not current user is a teacher\r\n * @returns {*|boolean}\r\n */\r\nmodel.isUserTeacher = function () {\r\n    return model.me.type == \"ENSEIGNANT\";\r\n};\r\n\r\n\r\n/**\r\n * Says whether or not current user is a teacher\r\n * @returns {*|boolean}\r\n */\r\nmodel.isUserParent = function () {\r\n    return model.me.type == \"PERSRELELEVE\";\r\n};\r\n\r\n\r\n\r\n/**\r\n * Publishes or un publishes a list of homeworks\r\n * @param itemArray Array of homeworks to publish or unpublish\r\n */\r\nmodel.publishHomeworks = function (itemArray, isPublish, cb, cbe) {\r\n\r\n    var url = isPublish ? \"/diary/publishHomeworks\" : \"/diary/unPublishHomeworks\";\r\n\r\n    return model.getHttp()({\r\n        method : 'POST',\r\n        url : url,\r\n        data : itemArray\r\n    }).then(function (r) {\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return r.data;\r\n    });\r\n};\r\n\r\n\r\n\r\nmodel.deleteItemList = function (items, itemType, cb, cbe) {\r\n    var url = (itemType == \"lesson\") ? '/diary/deleteLessons' : '/diary/deleteHomeworks';\r\n\r\n    var itemArray = {ids:model.getItemsIds(items)};\r\n\r\n    return http.delete(url, {data: itemArray}).then(function (b) {\r\n\r\n        items.forEach(function (item) {\r\n            item.deleteModelReferences();\r\n        });\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    }).catch(function (error) {\r\n        if (typeof cbe === 'function') {\r\n            cbe(model.parseError(error));\r\n        }\r\n    });\r\n}\r\n\r\nmodel.deletePedagogicItemReferences = function(itemId) {\r\n    model.pedagogicDays.forEach(function (day) {\r\n        day.pedagogicItemsOfTheDay = _.reject(day.pedagogicItemsOfTheDay, function (item) {\r\n            return !item || item.lesson_id == itemId || item.id == itemId;\r\n        });\r\n        day.resetCountValues();\r\n    });\r\n\r\n    model.pedagogicDays.all = _.filter(model.pedagogicDays.all, function(day){\r\n        return day.numberOfItems() > 0;\r\n    });\r\n\r\n    model.initSubjects();\r\n};\r\n\r\nmodel.unselectDays = function (){\r\n    model.pedagogicDays.forEach(function (day) {\r\n        day.selected = undefined;\r\n    });\r\n};\r\n\r\n// gets the selected date from pedagogic items\r\nmodel.selectedPedagogicDate = function (){\r\n    var selectedDay = _.findWhere(model.pedagogicDays.all, {selected : true});\r\n    if (selectedDay) {\r\n        return moment(selectedDay.dayName, \"dddd DD MMMM YYYY\").format(\"YYYY-MM-DD\");\r\n    } else {\r\n        return moment();\r\n    }\r\n};\r\n\r\n/**\r\n * Given a moment which contain reliable time data,\r\n * return a moment time with this time and the date specified.\r\n * @param date Date\r\n * @param momentTime Moment date\r\n * @returns {*}\r\n */\r\nmodel.getMomentDateTimeFromDateAndMomentTime = function (date, momentTime) {\r\n    var dateMoment = moment(date);\r\n\r\n    momentTime.set('year', dateMoment.get('year'));\r\n    momentTime.set('month', dateMoment.get('month'));\r\n    momentTime.set('date', dateMoment.get('date'));\r\n\r\n    return momentTime;\r\n};\r\n\r\n\r\n/**\r\n * Publishes or un publishes a list of lessons\r\n * @param cb Callback\r\n * @param cbe Callback on error\r\n */\r\nmodel.publishLessons = function (itemArray, isPublish, cb, cbe) {\r\n\r\n    var url = isPublish ? \"/diary/publishLessons\" : \"/diary/unPublishLessons\";\r\n\r\n    return model.getHttp()({\r\n        method : 'POST',\r\n        url : url,\r\n        data : itemArray\r\n    }).then(function (r) {\r\n        var updateLessons = new Array();\r\n\r\n        // update lesson cache\r\n        // bad code but collection does not seem to update on state change\r\n        // so have to delete and add modified lessons ...\r\n        model.lessons.forEach(function(lessonModel){\r\n            if(itemArray.ids.indexOf(lessonModel.id) != -1){\r\n\r\n                lessonModel.changeState(isPublish);\r\n                lessonModel.selected=false;\r\n                lessonModel.tooltipText = model.getUtilsService().getResponsiveLessonTooltipText(lessonModel);\r\n            }\r\n        });\r\n\r\n        model.lessons.addRange(updateLessons);\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return r.data;\r\n    });\r\n};\r\n\r\nmodel.getMinutes = function (time) {\r\n\r\n    return (parseInt(time.split(':')[0]) * 60) + (parseInt(time.split(':')[1]));\r\n};\r\n\r\nmodel.parseError = function(e) {\r\n    let error:any = {};\r\n    try {\r\n        error = JSON.parse(e.responseText);\r\n    }\r\n    catch (err) {\r\n        error.error = \"diary.error.unknown\";\r\n    }\r\n    error.status = e.status;\r\n\r\n    return error;\r\n};\r\n\r\n/**\r\n *\r\n * @param items Collection of items (lessons or homeworks)\r\n * @returns {Array} Array of id of the items\r\n */\r\nmodel.getItemsIds = function (items) {\r\n    return _.toArray(_.pluck(items, 'id'));\r\n};\r\n\r\n/**\r\n * Loads homework load data for current week of homework\r\n * @param homework\r\n * @param cb\r\n * @param cbe\r\n */\r\nmodel.loadHomeworksLoad = function (homework, date, audienceId, cb, cbe) {\r\n\r\n    return model.getHttp()({\r\n        method : 'GET',\r\n        url : '/diary/homework/load/'+ date + '/' + audienceId\r\n    }).then(function (result) {\r\n        var sqlHomeworksLoads = result.data;\r\n        homework.weekhomeworksload = [];\r\n\r\n        sqlHomeworksLoads.forEach(function (homeworkLoad) {\r\n            homework.weekhomeworksload.push(tools.sqlToJsHomeworkLoad(homeworkLoad));\r\n        });\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return sqlHomeworksLoads;\r\n    });\r\n};\r\n\r\n\r\n/**\r\n * Get homeworks linked to a lesson\r\n *\r\n * @param lesson\r\n * @param cb Callback\r\n * @param cbe Callback on error\r\n */\r\nmodel.loadHomeworksForLesson = function (lesson, cb, cbe) {\r\n\r\n    if (!lesson.id) {\r\n        return;\r\n    }\r\n    let url = '/diary/homework/list/';\r\n    if(model.getSecureService().hasRight(model.getConstants().RIGHTS.SHOW_OTHER_TEACHER)){\r\n        url = '/diary/homework/external/list/';\r\n    }\r\n    return model.getHttp()({\r\n        method : 'GET',\r\n        url : url + lesson.id\r\n    }).then(function (result) {\r\n        var sqlHomeworks = result.data;\r\n        lesson.homeworks = this.collection(Homework);\r\n        sqlHomeworks.forEach(function (sqlHomework) {\r\n            lesson.homeworks.push(tools.sqlToJsHomework(sqlHomework));\r\n        });\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return sqlHomeworks;\r\n    });\r\n};\r\n\r\n\r\n/**\r\n * On window resize compute lesson tooltips (responsive design)\r\n */\r\n/*window.addEventListener('resize', function(event){\r\n\r\n    model.lessons.forEach(function (lesson) {\r\n        lesson.tooltipText = getResponsiveLessonTooltipText(lesson);\r\n    });\r\n});*/\r\n\r\n\r\n/**\r\n * Returns default audience of connected user.\r\n * @returns {*}\r\n */\r\nmodel.getDefaultAudience = function(){\r\n    var defaultAudience = null;\r\n\r\n    if(model.me.classes && model.me.classes.length > 0){\r\n        defaultAudience = model.audiences.findWhere({id: model.me.classes[0]});\r\n    }\r\n\r\n    if(!defaultAudience){\r\n        defaultAudience = model.audiences.first();\r\n    }\r\n\r\n    return defaultAudience;\r\n};\r\n\r\nmodel.showHomeworkPanel = true;\r\n\r\n/**\r\n * Init homework object on created.\r\n * Set default attribute values\r\n * @param homework\r\n * @param cb Callback function\r\n * @param cbe Callback function on error\r\n * @returns {*}\r\n */\r\nmodel.initHomework = function (dueDate, lesson) {\r\n\r\n    var homework = new Homework();\r\n\r\n    homework.created = new Date();\r\n    homework.expanded = true;\r\n    homework.type = model.homeworkTypes.first();\r\n    homework.title = homework.type.label;\r\n    homework.date = (dueDate) ? dueDate : moment().minute(0).second(0);\r\n\r\n    // create homework attached to lesson\r\n    if (lesson) {\r\n        homework.audience = lesson.audience;\r\n        homework.subject = lesson.subject;\r\n        homework.audienceType = homework.audience.type;\r\n        homework.color = lesson.color;\r\n        homework.state = lesson.state;\r\n    }\r\n    // free homework\r\n    else {\r\n        homework.audience = {}; //sets the default audience to undefined\r\n        homework.subject = model.subjects.first();\r\n        homework.audienceType = homework.audience.type;\r\n        homework.color = tools.DEFAULT_ITEM_COLOR;\r\n        homework.state = tools.DEFAULT_STATE;\r\n    }\r\n\r\n    model.loadHomeworksLoad(homework, moment(homework.date).format(tools.DATE_FORMAT), homework.audience.id);\r\n\r\n    return homework;\r\n};\r\n\r\n/**\r\n * Init lesson\r\n * @returns {Lesson}\r\n */\r\nmodel.initLesson = function (timeFromCalendar, selectedDate) {\r\n    var lesson = new Lesson();\r\n\r\n    lesson.audience = {}; //sets the default audience to undefined\r\n    lesson.subject = model.subjects.first();\r\n    lesson.audienceType = lesson.audience.type;\r\n    lesson.color = tools.DEFAULT_ITEM_COLOR;\r\n    lesson.state = tools.DEFAULT_STATE;\r\n    lesson.title = lang.translate('diary.lesson.label');\r\n\r\n    let newItem:any;\r\n\r\n    if(timeFromCalendar) {\r\n        newItem = model.calendar.newItem;\r\n\r\n        // force to HH:00 -> HH:00 + 1 hour\r\n        newItem.beginning = newItem.beginning.second(0);\r\n        newItem.date = newItem.beginning;\r\n        if (!newItem.beginning.isBefore(newItem.end)){\r\n            newItem.end = moment(newItem.beginning);\r\n            newItem.end.minute(0).second(0).add(1, 'hours');\r\n        }\r\n        if (newItem.audience){\r\n            lesson.audience = newItem.audience;\r\n            lesson.audienceType = lesson.audience.type;\r\n        }\r\n\r\n        if (newItem.room){\r\n            lesson.room = newItem.room;\r\n        }\r\n\r\n        if (newItem.subject){\r\n            lesson.subject = newItem.subject;\r\n        }\r\n\r\n    }\r\n    // init start/end time to now (HH:00) -> now (HH:00) + 1 hour or selectedDate ->\r\n    else {\r\n        var itemDate = (selectedDate) ? moment(selectedDate): moment();\r\n\r\n        newItem = {\r\n            date: itemDate,\r\n            beginning: moment().minute(0).second(0),\r\n            end: moment().minute(0).second(0).add(1, 'hours')\r\n        };\r\n    }\r\n\r\n    lesson.newItem = newItem;\r\n    lesson.startTime = newItem.beginning;\r\n    lesson.endTime = newItem.end;\r\n    lesson.date = newItem.date;\r\n\r\n    return lesson;\r\n};\r\n\r\n\r\n/**\r\n * Load previous lessons from current one\r\n * Attached homeworks to lessons are also loaded\r\n * @param lesson\r\n * @param useDeltaStep\r\n * @param cb Callback function\r\n * @param cbe Callback on error function\r\n */\r\nmodel.getPreviousLessonsFromLesson = function (lesson, useDeltaStep, cb, cbe) {\r\n\r\n    console.warn(\"deprecated\");\r\n    return;\r\n};\r\n\r\n\r\nmodel.performPedagogicItemSearch = function (params, isTeacher, cb, cbe) {\r\n\r\n    // global quick search panel\r\n    if (params.isQuickSearch) {\r\n        if (params.returnType === 'lesson') {\r\n            model.pedagogicDaysQuickSearchLesson = new Array();\r\n        } else {\r\n            model.pedagogicDaysQuickSearchHomework = new Array();\r\n        }\r\n    }\r\n    // 'classical' view list\r\n    else {\r\n        model.pedagogicDays.reset();\r\n    }\r\n\r\n    return model.getHttp()({\r\n        method : 'POST',\r\n        url : '/diary/pedagogicItems/list',\r\n        data : params\r\n    }).then( (result) => {\r\n        var items = result.data;\r\n        var pedagogicItemsFromDB = _.map(items, tools.sqlToJsPedagogicItem);\r\n\r\n        var days = _.groupBy(pedagogicItemsFromDB, 'day');\r\n\r\n        var pedagogicDays = [];\r\n\r\n        var aDayIsSelected = false;\r\n\r\n        for (var day in days) {\r\n            if (days.hasOwnProperty(day)) {\r\n                var pedagogicDay = new PedagogicDay();\r\n                pedagogicDay.selected = false;\r\n                pedagogicDay.dayName = moment(day).format(\"dddd DD MMMM YYYY\");\r\n                pedagogicDay.shortName = pedagogicDay.dayName.substring(0,2);\r\n                pedagogicDay.shortDate = moment(day).format(\"DD/MM\");\r\n                pedagogicDay.pedagogicItemsOfTheDay = days[day];\r\n\r\n                var countItems = _.groupBy(pedagogicDay.pedagogicItemsOfTheDay, 'type_item');\r\n\r\n                pedagogicDay.nbLessons = (countItems['lesson']) ? countItems['lesson'].length : 0;\r\n                pedagogicDay.nbHomeworks = (countItems['homework']) ? countItems['homework'].length : 0;\r\n\r\n                //select default day\r\n                if (isTeacher) {\r\n                    if (!aDayIsSelected) {\r\n                        pedagogicDay.selected = true;\r\n                        aDayIsSelected = true;\r\n                    }\r\n                } else {\r\n                    if (pedagogicDay.nbHomeworks > 0 && !aDayIsSelected) {\r\n                        pedagogicDay.selected = true;\r\n                        aDayIsSelected = true;\r\n                    }\r\n                }\r\n                pedagogicDays.push(pedagogicDay);\r\n            }\r\n        }\r\n\r\n        if (pedagogicDays[0] && !aDayIsSelected) {\r\n            pedagogicDays[0].selected = true;\r\n        }\r\n\r\n        // global quick search panel\r\n        if (params.isQuickSearch) {\r\n            if (params.returnType === 'lesson') {\r\n                model.pedagogicDaysQuickSearchLesson = model.pedagogicDaysQuickSearchLesson.concat(pedagogicDays);\r\n            } else {\r\n                model.pedagogicDaysQuickSearchHomework = model.pedagogicDaysQuickSearchHomework.concat(pedagogicDays);\r\n            }\r\n        } else {\r\n            model.pedagogicDays.pushAll(pedagogicDays);\r\n        }\r\n\r\n        model.initSubjects();\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return pedagogicDays;\r\n    });\r\n};\r\n\r\n/**\r\n * List children of current authenticated user (if parent)\r\n * @param cb Callback function\r\n * @param cbe Callback error function\r\n */\r\nmodel.listChildren = function (cb, cbe) {\r\n    // no children - abort\r\n    if (!model.me.childrenIds || model.me.childrenIds.length == 0) {\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return;\r\n    }\r\n    return model.getHttp()({\r\n        method : 'GET',\r\n        url : '/diary/children/list'\r\n    }).then(function (result) {\r\n        model.childs.removeAll();\r\n        model.childs.addRange(result.data);\r\n\r\n        if(model.childs.all.length > 0) {\r\n            model.child = model.childs.all[0];\r\n            model.child.selected = true;\r\n        }\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    });\r\n};\r\n\r\n//builds the set of different subjects encountered in the pedagogic items of the list\r\nmodel.initSubjects = function () {\r\n\r\n    var subjects = [];\r\n\r\n    model.pedagogicDays.forEach(function(pedagogicDay) {\r\n        pedagogicDay.pedagogicItemsOfTheDay.forEach(function(pedagogicItem) {\r\n            if (!pedagogicItem){\r\n                return;\r\n            }\r\n            var subjectName = pedagogicItem.subject;\r\n            if (!_.contains(subjects, subjectName)) {\r\n                subjects.push(subjectName);\r\n            }\r\n        });\r\n    });\r\n\r\n    model.searchForm.subjects = subjects;\r\n};\r\n\r\n/**\r\n * Find subject by id\r\n * @param subjectId\r\n * @returns {null} Subject with id set\r\n */\r\nmodel.findSubjectById = function(subjectId){\r\n\r\n    var subjectMatch = null;\r\n\r\n    model.subjects.all.forEach(function (subject) {\r\n\r\n        if(subject.id == subjectId){\r\n            subjectMatch = subject;\r\n        }\r\n    });\r\n\r\n    return subjectMatch;\r\n};\r\n\r\n/**\r\n * Find subjects matching label user inputed.\r\n * @param label Label subject (might be partial, not case sensitive)\r\n */\r\nmodel.findSubjectsByLabel = function (label) {\r\n\r\n    var subjectsFound = new Array();\r\n\r\n    if (label.length > 0) {\r\n        var labelLowerCaseNoAccent = tools.sansAccent(label).toLowerCase();\r\n\r\n        model.subjects.all.forEach(function (subject) {\r\n            var labelSubjectLowerCaseNoAccent = tools.sansAccent(subject.label.toLowerCase());\r\n\r\n            if (labelSubjectLowerCaseNoAccent.indexOf(labelLowerCaseNoAccent) != -1) {\r\n                subjectsFound.push(subject);\r\n            }\r\n        });\r\n    }\r\n\r\n    return subjectsFound;\r\n};\r\n\r\n\r\n/**\r\n * Creates new subject\r\n */\r\nmodel.createSubject = function(label, cb, cbe){\r\n\r\n    var subject = new Subject();\r\n    subject.label = label;\r\n    return subject.save(cb, cbe);\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/model.ts","import { moment, model, _ } from 'entcore';\r\nimport { CONSTANTS} from '../tools';\r\nimport {SubjectService} from \"./subject.service\";\r\nimport http from 'axios';\r\n\r\n/*\r\n* Course service as class\r\n* used to manipulate Course model\r\n*/\r\nexport class CourseService {\r\n\r\n   static getMergeCourses(structureId, teacherId, firstDayOfWeek){\r\n        return Promise.all([\r\n            this.getScheduleCourses(structureId, teacherId, firstDayOfWeek),\r\n            SubjectService.getStructureSubjectsAsMap(structureId)\r\n        ]).then(results =>{\r\n            let courses = results[0];\r\n            let subjects = results[1];\r\n            return this.mappingCourses(courses,subjects);\r\n        });\r\n    }\r\n\r\n    static mappCourse(course){\r\n        course.date = moment(course.startDate);\r\n        course.date.week(model.calendar.week);\r\n\r\n        course.startMoment = this.recalc(moment(course.startDate));\r\n        course.endMoment = this.recalc(moment(course.endDate));\r\n\r\n        course.startTime = moment(course.startDate).format('HH:mm:ss');\r\n        course.endTime = moment(course.endDate).format('HH:mm:ss');\r\n\r\n        course.calendarType = \"shadow\";\r\n        course.locked=true;\r\n        course.is_periodic =false;\r\n        course.notShowOnCollision=true;\r\n    }\r\n\r\n    static recalc(date){\r\n        // multi week gestion\r\n        //https://groups.google.com/forum/#!topic/entcore/ne1ODPHQabE\r\n        let diff = date.diff(model.mondayOfWeek,'days');\r\n        if ( diff < 0 ||  diff > 6){\r\n            let weekDay = date.weekday();\r\n            date.dayOfYear(model.mondayOfWeek.dayOfYear());\r\n            date.weekday(weekDay);\r\n        }\r\n        return date;\r\n    }\r\n\r\n    static mappingCourses(courses,subjects){\r\n        _.each(courses,course =>{\r\n            course.subject = subjects[course.subjectId];\r\n            this.mappCourse(course);\r\n        });\r\n        return courses;\r\n    }\r\n\r\n    static getScheduleCourses(structureId, teacherId, firstDayOfWeek) {\r\n        let begin = moment(firstDayOfWeek).format(CONSTANTS.CAL_DATE_PATTERN);\r\n        let end = moment(firstDayOfWeek).add(6, 'd').format(CONSTANTS.CAL_DATE_PATTERN);\r\n\r\n        let url = `/directory/timetable/courses/${structureId}/${begin}/${end}`;\r\n        let config = {\r\n            params : {\r\n                teacherId : teacherId\r\n            }\r\n        };\r\n        return http.get(url,config).then(result =>{\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/services/courses.service.ts","import { BaseMode, _ } from 'entcore';\r\nimport { Subject} from \"../models/Subject.model\";\r\nimport {UtilsService} from \"./utils.service\";\r\nimport http from 'axios';\r\nimport { Mix } from 'entcore-toolkit';\r\n\r\n/*\r\n * Subject service as class\r\n * used to manipulate Subject model\r\n */\r\nexport class SubjectService {\r\n    static context = {\r\n        subjectPromise: []\r\n    };\r\n    /*\r\n    *   Get all subject from a structureId as map\r\n    *   used to map a course from the subject id\r\n    */\r\n    static getStructureSubjectsAsMap(structureId){\r\n        return this.getStructureSubjects(structureId).then((result)=>{\r\n            let subjects = result;\r\n            let results = {};\r\n            _.each(subjects,subject=>{\r\n                results[subject.subjectId] = subject;\r\n            });\r\n            return results;\r\n        });\r\n    }\r\n\r\n    /*\r\n    *   Get all subject from a structureId\r\n    *   used to map a course from the subject id\r\n    */\r\n    static getStructureSubjects(structureId){\r\n        if (!this.context.subjectPromise[structureId]){\r\n            var url = `/directory/timetable/subjects/${structureId}`;\r\n            this.context.subjectPromise[structureId] = http.get(url).then(result =>{\r\n                return result.data;\r\n            });\r\n        }\r\n        return this.context.subjectPromise[structureId];\r\n    }\r\n\r\n\r\n    /*\r\n    *   get subjects created by the teacher\r\n    *   used to edit a lesson\r\n    */\r\n    static async getCustomSubjects(isTeacher){\r\n        let urlGetSubjects = '';\r\n        if (isTeacher) {\r\n            urlGetSubjects = '/diary/subject/initorlist';\r\n        }else{\r\n            urlGetSubjects = '/diary/subject/list/' + UtilsService.getUserStructuresIdsAsString();\r\n        }\r\n\r\n        let { data } = await http.get(urlGetSubjects)\r\n        return Mix.castArrayAs(Subject, data);\r\n\r\n    }\r\n\r\n    /*\r\n    * map original subject to diary subject\r\n    */\r\n    static mapToDiarySubject(subject){\r\n        let result = new Subject();\r\n\r\n        result.id = null;\r\n        result.school_id = subject.school_id;\r\n        result.label = subject.subjectLabel;\r\n        result.originalsubjectid = subject.subjectId;\r\n        result.teacher_id = subject.teacher_id;\r\n        return result;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/services/subject.service.ts","import {_, model, idiom as lang} from 'entcore';\r\n\r\n/*\r\n * Utils service as class\r\n * used to manipulate Utils model\r\n */\r\nexport class UtilsService {\r\n\r\n   static getUserStructuresIdsAsString() {\r\n        var structureIds = \"\";\r\n\r\n        model.me.structures.forEach(function(structureId) {\r\n            structureIds += structureId + \":\";\r\n        });\r\n\r\n        return structureIds;\r\n    }\r\n\r\n    /**\r\n     * Set lesson tooltip text depending on screen resolution.\r\n     * Tricky responsive must be linked to additional.css behaviour\r\n     * @param lesson\r\n     */\r\n    static getResponsiveLessonTooltipText(lesson) {\r\n        var tooltipText = lesson.title + ' (' + lang.translate(lesson.state) + ')';\r\n        var screenWidth = window.innerWidth;\r\n\r\n        // < 900 px display room\r\n        if (screenWidth < 900 && lesson.room) {\r\n            tooltipText += '<br>' + lesson.room;\r\n        }\r\n\r\n        // < 650 px display hour start and hour end\r\n        if (screenWidth < 650) {\r\n            tooltipText += '<br>' + [\r\n                [lesson.startMoment.format('HH')]\r\n            ] + 'h' + [\r\n                [lesson.startMoment.format('mm')]\r\n            ];\r\n            tooltipText += ' -> ' + [\r\n                [lesson.endMoment.format('HH')]\r\n            ] + 'h' + [\r\n                [lesson.endMoment.format('mm')]\r\n            ];\r\n        }\r\n\r\n        // < 600 px display subjectlabel\r\n        if (screenWidth < 650 && lesson.subjectLabel) {\r\n            tooltipText += '<br>' + lesson.subjectLabel;\r\n        }\r\n\r\n        tooltipText = tooltipText.trim();\r\n\r\n        return tooltipText;\r\n    }\r\n\r\n\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/services/utils.service.ts","import { _, idiom as lang, moment, model } from 'entcore';\r\nimport { Homework } from '../models/Homework.model';\r\nimport { Subject } from '../models/Subject.model';\r\nimport { CONSTANTS } from '../tools';\r\nimport { UtilsService } from \"./utils.service\";\r\nimport { AttachmentService } from \"./attachment.service\";\r\nimport http from 'axios';\r\n\r\n\r\n/*\r\n * Lesson service as class\r\n * used to manipulate Lesson model\r\n */\r\nexport class LessonService {\r\n\r\n    static getLessons(userStructuresIds,mondayOfWeek,isUserParent,childId, fromDate?, toDate?) {\r\n\r\n        var start = moment(mondayOfWeek).day(1).format(CONSTANTS.CAL_DATE_PATTERN);\r\n        var end = moment(mondayOfWeek).day(1).add(1, 'week').format(CONSTANTS.CAL_DATE_PATTERN);\r\n\r\n        if (fromDate){\r\n            start = fromDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n            end = toDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n        }\r\n\r\n        var urlGetLessons = `/diary/lesson/${userStructuresIds}/${start}/${end}/`;\r\n\r\n        if (isUserParent && childId) {\r\n            urlGetLessons += childId;\r\n        } else {\r\n            urlGetLessons += '%20';\r\n        }\r\n\r\n        return http.get(urlGetLessons).then((result)=>{\r\n            return this.mappLessons(result.data);\r\n        });\r\n    }\r\n\r\n    static getOtherLessons(userStructuresIds,mondayOfWeek,teacher,audience, fromDate?, toDate?) {\r\n\r\n        var start = moment(mondayOfWeek).day(1).format(CONSTANTS.CAL_DATE_PATTERN);\r\n        var end = moment(mondayOfWeek).day(1).add(1, 'week').format(CONSTANTS.CAL_DATE_PATTERN);\r\n        if (fromDate){\r\n            start = fromDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n            end = toDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n        }\r\n        let type = teacher ? \"teacher\" : \"audience\";\r\n        let id = teacher ? teacher.key : audience.key;\r\n\r\n        var urlGetLessons = `/diary/lesson/external/${userStructuresIds}/${start}/${end}/${type}/${id}`;\r\n\r\n        return http.get(urlGetLessons).then((result)=>{\r\n            return this.mappLessons(result.data);\r\n        });\r\n    }\r\n\r\n    /*\r\n    *   Map lesson\r\n    */\r\n    static mappLessons(lessons){\r\n        return _.map(lessons,(lessonData) =>{\r\n            return this.mapLesson(lessonData);\r\n        });\r\n    }\r\n\r\n    /*\r\n    *  Map one lesson\r\n    */\r\n    static mapLesson(lessonData){\r\n        var lessonHomeworks = [];\r\n\r\n        // only initialize homeworks attached to lesson\r\n        // with only id\r\n        if (lessonData.homework_ids) {\r\n            for (var i = 0; i < lessonData.homework_ids.length; i++) {\r\n                var homework = new Homework();\r\n                homework.id = lessonData.homework_ids[i];\r\n                homework.lesson_id = parseInt(lessonData.lesson_id);\r\n                homework.loaded = false; // means full lessonData from sql not loaded\r\n                lessonHomeworks.push(homework);\r\n            }\r\n        }\r\n\r\n        var lesson:any =  {\r\n            //for share directive you must have _id\r\n            _id:  lessonData.lesson_id,\r\n            id: lessonData.lesson_id,\r\n            title: lessonData.lesson_title,\r\n            audience: model.audiences.findWhere({id: lessonData.audience_id}),\r\n            audienceId: lessonData.audience_id,\r\n            audienceLabel: lessonData.audience_label,\r\n            audienceType: lessonData.audience_type,\r\n            description: lessonData.lesson_description,\r\n            subject: model.subjects.findWhere({id: lessonData.subject_id}),\r\n            subjectId: lessonData.subject_id,\r\n            subjectLabel: lessonData.subject_label,\r\n            teacherName: lessonData.teacher_display_name,\r\n            structureId: lessonData.school_id,\r\n            date: moment(lessonData.lesson_date),\r\n            startTime: lessonData.lesson_start_time,\r\n            endTime: lessonData.lesson_end_time,\r\n            color: lessonData.lesson_color,\r\n            room: lessonData.lesson_room,\r\n            annotations: lessonData.lesson_annotation,\r\n            startMoment: moment(lessonData.lesson_date.split(' ')[0] + ' ' + lessonData.lesson_start_time),\r\n            endMoment: moment(lessonData.lesson_date.split(' ')[0] + ' ' + lessonData.lesson_end_time),\r\n            state: lessonData.lesson_state,\r\n            is_periodic: false,\r\n            homeworks: lessonHomeworks,\r\n            tooltipText: '',\r\n            locked: (!model.canEdit()) ? true : lessonData.locked\r\n        };\r\n        lesson.subject = new Subject();\r\n        lesson.subject.label = lessonData.subject_label;\r\n        lesson.subject.id = lessonData.subject_id;\r\n        lesson.subject.teacher_id = lessonData.teacher_display_name;\r\n\r\n        if('group' === lesson.audienceType){\r\n            lesson.audienceTypeLabel = lang.translate('diary.audience.group');\r\n        } else {\r\n            lesson.audienceTypeLabel = lang.translate('diary.audience.class');\r\n        }\r\n\r\n        if (lessonData.attachments) {\r\n            lesson.attachments = AttachmentService.mappAttachement(JSON.parse(lessonData.attachments));\r\n        }\r\n\r\n        lesson.tooltipText = UtilsService.getResponsiveLessonTooltipText(lesson);\r\n        return lesson;\r\n    }\r\n\r\n\r\n\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/services/lessons.service.ts","import {  _ } from 'entcore';\r\nimport { Attachment } from '../models/Attachment.model';\r\n\r\n/*\r\n * Attachement service as class\r\n * used to manipulate Attachement model\r\n */\r\nexport class AttachmentService {\r\n    /*\r\n    *   Mapp homeworks\r\n    */\r\n    static mappAttachement(attachements){\r\n        return _.map(attachements,(attachementData) =>{\r\n            var att = new Attachment();\r\n            att.id = attachementData.id;\r\n            att.user_id = attachementData.user_id;\r\n            att.creation_date = attachementData.creation_date;\r\n            att.document_id = attachementData.document_id;\r\n            att.document_label = attachementData.document_label;\r\n\r\n            return att;\r\n        });\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/services/attachment.service.ts","import { angular, ng, model, _} from 'entcore';\r\n\r\n\r\nexport class SecureService {\r\n\r\n\r\n    static hasRight(right){\r\n        let result = false;\r\n        _.each(model.me.authorizedActions,(authorizedAction)=>{\r\n            if (authorizedAction.displayName === right){\r\n                result=true;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/services/secure.service.ts","import { angular, _, idiom as lang } from 'entcore';\r\nimport http from 'axios';\r\n\r\n/*\r\n* Audience service as class\r\n* used to manipulate Audience model\r\n*/\r\nexport class AudienceService {\r\n    static context = {\r\n        processesPromise: []\r\n    }\r\n    static getAudiencesAsMap(structureIdArray){\r\n        return this.getAudiences(structureIdArray).then((classes)=>{\r\n            let result = {};\r\n            _.each(classes,(classe)=>{\r\n                result[classe.name] = classe;\r\n            });\r\n            return result;\r\n        });\r\n    }\r\n\r\n    /*\r\n    * get classes for all structureIds\r\n    */\r\n    static getAudiences(structureIdArray) {\r\n        //cache the promises, this datas will not change in a uniq session\r\n        let processes = [];\r\n        _.each(structureIdArray,(structureId)=>{\r\n\r\n            if (!this.context.processesPromise[structureId]){\r\n                this.context.processesPromise[structureId] = [];\r\n                let url = `/userbook/structure/${structureId}`;\r\n                this.context.processesPromise[structureId] = http.get(url).then((result)=>{\r\n                    return {\r\n                        structureId : structureId,\r\n                        structureData : result.data\r\n                    };\r\n                });\r\n            }\r\n            processes.push(this.context.processesPromise[structureId]);\r\n\r\n        });\r\n\r\n        //execute promises\r\n        return Promise.all(processes).then((results) => {\r\n            let result = [];\r\n            _.each(results,(datas => {\r\n                let structureId = datas.structureId;\r\n                let structureData = datas.structureData;\r\n                result = result.concat(this.mapAudiences(structureData.classes,structureId));\r\n            }));\r\n            return result;\r\n        });\r\n\r\n    }\r\n\r\n    /*\r\n    *   map an Audience\r\n    */\r\n    static mapAudiences(classes,structureId){\r\n        return _.map(classes,  (audience) =>{\r\n            audience.structureId = structureId;\r\n            audience.type = 'class';\r\n            audience.typeLabel = lang.translate('diary.audience.class');\r\n            return audience;\r\n        });\r\n    }\r\n\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/services/audiences.service.ts","export * from './calendar/main-calendar-page.controller';\nexport * from './calendar/calendar.controller';\nexport * from './calendar/calendar-daily-events.controller';\nexport * from './calendar/calendar-list-view.controller';\nexport * from './lesson/edit-lesson.controller';\nexport * from './lesson/edit-progression-lesson.controller';\nexport * from './progression/progression-manager.controller';\nexport * from './progression/progression-right-panel.controller';\nexport * from './visa/habilitations.controller';\nexport * from './visa/visa.controller';\nexport * from './history.controller';\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/index.ts","import { ng, model, moment, notify, idiom as lang } from 'entcore';\r\nimport {SecureService} from \"../../services/secure.service\";\r\nimport {ModelWeekService} from \"../../services/modelweek.service\";\r\nimport {CONSTANTS} from \"../../tools\";\r\n\r\nexport const MainCalendarPageController = ng.controller('MainCalendarPageController', ['$scope', '$timeout', '$rootScope', '$location',\r\n    ($scope, $timeout, $rootScope, $location) => {\r\n\r\n\r\n        let vm = this;\r\n\r\n        $timeout(init);\r\n        function init(){\r\n            $scope.getModel();\r\n            vm.isUserParent = model.isUserParent();\r\n            $scope.child = model.child;\r\n            $scope.children = model.childs;\r\n        }\r\n\r\n        $scope.showCalendarForChild = function(childd){\r\n            console.log(\"broadcast\");\r\n            $scope.children.forEach(function(theChild) {\r\n                theChild.selected = (theChild.id === childd.id);\r\n            });\r\n\r\n            childd.selected = true;\r\n            $scope.child = childd;\r\n            model.child = childd;\r\n            $rootScope.$broadcast('show-child',childd);\r\n        }\r\n\r\n        $scope.goToListView = function() {\r\n            $location.path('/listView');\r\n        };\r\n\r\n        $scope.goToCalendarView = function() {\r\n            $location.path('/calendarView/' + moment(model.mondayOfWeek).format(CONSTANTS.CAL_DATE_PATTERN));\r\n        };\r\n\r\n\r\n        $scope.setModel = function(alias) {\r\n            ModelWeekService.setModelWeek(alias,model.mondayOfWeek).then((modelWeek) => {\r\n                $scope.modelWeekCurrentWeek = alias;\r\n                $scope.isModelWeek = true;\r\n                $rootScope.$broadcast('calendar.refreshCalendar');\r\n                $scope.getModel();\r\n            });\r\n\r\n            notify.info(lang.translate('diary.model.week.choice.effective') + \" \" + alias);\r\n\r\n        };\r\n\r\n        $scope.invert = function() {\r\n            ModelWeekService.invertModelsWeek().then(() => {\r\n                $rootScope.$broadcast('calendar.refreshCalendar');\r\n                $scope.getModel();\r\n            });\r\n        };\r\n\r\n        $scope.getModel = function(){\r\n            if (SecureService.hasRight(CONSTANTS.RIGHTS.MANAGE_MODEL_WEEK)) {\r\n                ModelWeekService.getModelWeeks().then((modelweeks)=>{\r\n                    $scope.modelWeeks = modelweeks;\r\n                });\r\n            }\r\n        };\r\n    }]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/calendar/main-calendar-page.controller.ts","import {_, moment, model } from 'entcore';\r\nimport {CONSTANTS} from \"../tools\";\r\nimport {CourseService} from \"./courses.service\";\r\nimport http from 'axios';\r\n\r\n\r\nexport class ModelWeekService {\r\n    static promiseGetmodelWeek:any;\r\n\r\n    static setModelWeek(alias,date){\r\n        let dateParam = moment(date).format(CONSTANTS.CAL_DATE_PATTERN);\r\n        let url = `/diary/modelweek/${alias}/${dateParam}`;\r\n        this.promiseGetmodelWeek = undefined;\r\n        return http.post(url);\r\n    }\r\n\r\n    static getModelWeeks(){\r\n        let url = `/diary/modelweek/list`;\r\n        if ( !this.promiseGetmodelWeek){\r\n            this.promiseGetmodelWeek = http.get(url).then((result)=>{\r\n                let modelWeeks = result.data;\r\n                _.each(modelWeeks,modelWeek =>{\r\n                    modelWeek.startDate = moment(modelWeek.startDate).toDate();\r\n                    modelWeek.endDate = moment(modelWeek.endDate).toDate();\r\n                });\r\n\r\n                let transformedResult = {\r\n                    \"A\" : _.findWhere(modelWeeks,{\"weekAlias\":\"A\"}),\r\n                    \"B\" : _.findWhere(modelWeeks,{\"weekAlias\":\"B\"}),\r\n                };\r\n                return transformedResult;\r\n            });\r\n\r\n        }\r\n        return this.promiseGetmodelWeek;\r\n    }\r\n\r\n    static invertModelsWeek(){\r\n        let url = `/diary/modelweek/invert`;\r\n        this.promiseGetmodelWeek = undefined;\r\n        return http.post(url).then((result)=>{\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    static getCoursesModel(date){\r\n        let dateParam = moment(date).format(CONSTANTS.CAL_DATE_PATTERN);\r\n        let url = `/diary/modelweek/items/${dateParam}`;\r\n\r\n        return http.get(url).then((result)=>{\r\n            let courses=result.data;\r\n            if (!courses){\r\n                courses=[];\r\n            }\r\n            this.mappModelWeekToCourse(courses);\r\n            return courses;\r\n        });\r\n    }\r\n\r\n    static mappModelWeekToCourse(courses){\r\n        _.each(courses,course =>{\r\n\r\n            let date = moment(course.date);\r\n            let begin = moment(date);\r\n\r\n            begin.set('hour', Number(course.startHour.split(\":\")[0]));\r\n            begin.set('minute', Number(course.startHour.split(\":\")[1]));\r\n            begin.set('second', Number(course.startHour.split(\":\")[2]));\r\n\r\n            let end = moment(date);\r\n\r\n            end.set('hour', Number(course.endHour.split(\":\")[0]));\r\n            end.set('minute', Number(course.endHour.split(\":\")[1]));\r\n            end.set('second', Number(course.endHour.split(\":\")[2]));\r\n\r\n            course.startDate = begin.toDate();\r\n            course.endDate = end.toDate();\r\n\r\n            CourseService.mappCourse(course);\r\n            course.subject = model.subjects.findWhere({id: course.subjectId});\r\n            course.subject.subjectLabel = course.subjectLabel;\r\n            course.subjectId = course.subjectId;\r\n        });\r\n\r\n        return courses;\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/services/modelweek.service.ts","import { model, moment, _, template, ng } from 'entcore';\r\n\r\nimport { Teacher } from '../../models/Teacher.model';\r\nimport {UtilsService} from \"../../services/utils.service\";\r\nimport {SecureService} from \"../../services/secure.service\";\r\nimport {ModelWeekService} from \"../../services/modelweek.service\";\r\nimport {CONSTANTS} from \"../../tools\";\r\nimport {LessonService} from \"../../services/lessons.service\";\r\nimport {HomeworkService} from \"../../services/homework.service\";\r\nimport {CourseService} from \"../../services/courses.service\";\r\nimport {SubjectService} from \"../../services/subject.service\";\r\n\r\nexport const CalendarController = ng.controller('CalendarController',\r\n    ['$scope', '$timeout', '$rootScope', '$location', '$routeParams', '$q',\r\n    ($scope, $timeout, $rootScope, $location, $routeParams, $q) => {\r\n\r\n        var vm = this;\r\n\r\n        $timeout(init);\r\n        /*\r\n         * initialisation calendar function\r\n         */\r\n        function init() {\r\n            //view controls\r\n            $scope.display.showList = false;\r\n            //calendarDailyEvent directive options\r\n            $scope.display.bShowCalendar = true;\r\n            $scope.display.bShowHomeworks = true;\r\n            $scope.display.bShowHomeworksMinified = false;\r\n            if (!model.selectedViewMode) {\r\n                $scope.goToCalendarView();//model.selectedViewMode = '/diary/public/template/calendar/calendar-view.template.html';\r\n            }\r\n            //calendar Params\r\n            $scope.calendarParams = {\r\n                isUserTeacher: $scope.isUserTeacher\r\n            };\r\n\r\n            //handler calendar updates :\r\n            $scope.$on('calendar.refreshItems', (_, item) => {\r\n                item.calendarUpdate();\r\n            });\r\n\r\n            //handler calendar updates :\r\n            $scope.$on('calendar.refreshCalendar', () => {\r\n                refreshDatas(UtilsService.getUserStructuresIdsAsString(),\r\n                    $scope.mondayOfWeek,\r\n                    model.isUserParent,\r\n                    model.child ? model.child.id : undefined);\r\n            });\r\n\r\n            if (SecureService.hasRight(CONSTANTS.RIGHTS.SHOW_OTHER_TEACHER)) {\r\n\r\n                //vm.teacher = model.filters.teacher;\r\n                //vm.audience = model.filters.audience;\r\n\r\n                $scope.$watch(() => {\r\n                    return model.filters.teacher;\r\n                }, (n, o) => {\r\n                    if (n !== o && n) {\r\n\r\n                        $timeout(() => {\r\n                            //model.filters.teacher = vm.teacher;\r\n                            //model.filters.audience = vm.audience;\r\n                            refreshDatas(UtilsService.getUserStructuresIdsAsString(),\r\n                                $scope.mondayOfWeek,\r\n                                model.isUserParent,\r\n                                model.child ? model.child.id : undefined);\r\n                        });\r\n                    }\r\n                });\r\n                $scope.$watch(() => {\r\n                    return model.filters.audience;\r\n                }, (n, o) => {\r\n                    if (n !== o && n) {\r\n                        $timeout(() => {\r\n                            //model.filters.teacher = vm.teacher;\r\n                            //model.filters.audience = vm.audience;\r\n                            refreshDatas(UtilsService.getUserStructuresIdsAsString(),\r\n                                $scope.mondayOfWeek,\r\n                                model.isUserParent,\r\n                                model.child ? model.child.id : undefined);\r\n                        });\r\n\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        //watch delete or add\r\n        $scope.$watch(() => {\r\n            if (model && model.lessons && model.lessons.all) {\r\n                return model.lessons.all.length;\r\n            } else {\r\n                return 0;\r\n            }\r\n        }, () => {\r\n            $scope.itemsCalendar = [].concat(model.lessons.all).concat($scope.courses || []);\r\n        });\r\n\r\n        $scope.$watch('routeParams', function(n, o) {\r\n            if ($location.path().indexOf(\"calendarView\") === -1 && $location.path() !== \"\") {\r\n                return;\r\n            }\r\n            var mondayOfWeek = moment();\r\n            // mondayOfWeek as string date formatted YYYY-MM-DD\r\n            if ($scope.routeParams.mondayOfWeek) {\r\n                mondayOfWeek = moment($scope.routeParams.mondayOfWeek);\r\n            } else {\r\n                if (model.mondayOfWeek) {\r\n                    mondayOfWeek = model.mondayOfWeek;\r\n                } else {\r\n                    mondayOfWeek = mondayOfWeek.weekday(0);\r\n                }\r\n            }\r\n            model.mondayOfWeek = mondayOfWeek;\r\n            $scope.showCalendar(mondayOfWeek);\r\n\r\n        }, true);\r\n\r\n        $scope.routeParams = $routeParams;\r\n\r\n        /**\r\n         * Opens the next week view of calendar\r\n         */\r\n        $scope.nextWeek = function() {\r\n            var nextMonday = moment($scope.mondayOfWeek).add(7, 'd');\r\n            $location.path('/calendarView/' + nextMonday.format(CONSTANTS.CAL_DATE_PATTERN));\r\n        };\r\n\r\n        /**\r\n         * Opens the previous week view of calendar\r\n         */\r\n        $scope.previousWeek = function() {\r\n            var nextMonday = moment($scope.mondayOfWeek).add(-7, 'd');\r\n            $location.path('/calendarView/' + nextMonday.format(CONSTANTS.CAL_DATE_PATTERN));\r\n        };\r\n\r\n\r\n        /**\r\n         * Load related data to lessons and homeworks from database\r\n         * @param cb Callback function\r\n         * @param bShowTemplates if true loads calendar templates after data loaded\r\n         * might be used when\r\n         */\r\n        var initialization = function(bShowTemplates, cb?) {\r\n\r\n            // will force quick search panel to load (e.g: when returning to calendar view)\r\n            // see ng-extensions.js -> quickSearch directive\r\n            model.lessonsDropHandled = false;\r\n            model.homeworksDropHandled = false;\r\n\r\n            $scope.countdown = 2;\r\n\r\n            // auto creates diary.teacher\r\n            if (\"ENSEIGNANT\" === model.me.type) {\r\n                var teacher = new Teacher();\r\n                teacher.create(decrementCountdown(bShowTemplates, cb), $rootScope.validationError);\r\n            } else {\r\n                decrementCountdown(bShowTemplates, cb);\r\n            }\r\n\r\n            // subjects and audiences needed to fill in\r\n            // homeworks and lessons props\r\n\r\n            model.childs.syncChildren(function() {\r\n                vm.child = model.child;\r\n                vm.children = model.childs;\r\n                SubjectService.getCustomSubjects(model.isUserTeacher()).then((subjects) => {\r\n                    model.subjects.all = [];\r\n\r\n                    if (subjects) {\r\n                        model.subjects.addRange(subjects);\r\n                    }\r\n                }).then(() => {\r\n                    decrementCountdown(bShowTemplates, cb);\r\n                    model.homeworkTypes.syncHomeworkTypes(function() {\r\n                        // call lessons/homework sync after audiences sync since\r\n                        // lesson and homework objects needs audience data to be built\r\n                        refreshDatas(UtilsService.getUserStructuresIdsAsString(),\r\n                            $scope.mondayOfWeek,\r\n                            model.isUserParent,\r\n                            model.child ? model.child.id : undefined);\r\n\r\n                    }, $rootScope.validationError);\r\n                }).catch((e)=>{\r\n                    $rootScope.validationError();\r\n                    throw e;\r\n                });\r\n            });\r\n        };\r\n\r\n\r\n        var decrementCountdown = function(bShowTemplates, cb) {\r\n            $scope.countdown--;\r\n            if ($scope.countdown == 0) {\r\n                $scope.calendarLoaded = true;\r\n                $scope.currentSchool = model.currentSchool;\r\n\r\n                if (bShowTemplates) {\r\n                    showTemplates();\r\n                }\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n            }\r\n        };\r\n\r\n        /**\r\n         *\r\n         * @param momentMondayOfWeek First day (monday) of week to display lessons and homeworks\r\n         */\r\n        $scope.showCalendar = function(mondayOfWeek) {\r\n            $scope.display.showList = false;\r\n\r\n            $scope.mondayOfWeek = mondayOfWeek;\r\n            if (!$scope.calendarLoaded) {\r\n                initialization(true);\r\n                return;\r\n            }\r\n\r\n            if (!$scope.mondayOfWeek) {\r\n                $scope.mondayOfWeek = moment();\r\n            }\r\n\r\n            $scope.mondayOfWeek = $scope.mondayOfWeek.weekday(0);\r\n\r\n            model.lessonsDropHandled = false;\r\n            model.homeworksDropHandled = false;\r\n            $scope.display.showList = false;\r\n\r\n            // need reload lessons or homeworks if week changed\r\n            var syncItems = true; //momentMondayOfWeek.week() != model.calendar.week;\r\n\r\n\r\n\r\n            refreshDatas(UtilsService.getUserStructuresIdsAsString(),\r\n                $scope.mondayOfWeek,\r\n                model.isUserParent,\r\n                model.child ? model.child.id : undefined);\r\n        };\r\n\r\n\r\n        function refreshDatas(structureIds, mondayOfWeek, isUserParent, childId) {\r\n            var p1;\r\n            var p2;\r\n            if (SecureService.hasRight(CONSTANTS.RIGHTS.SHOW_OTHER_TEACHER)) {\r\n                let teacherItem = model.filters.teacher ? model.filters.teacher.item : undefined;\r\n                if (!teacherItem && !model.filters.audience) {\r\n                    p1 = $q.when([]);\r\n                    p2 = $q.when([]);\r\n                } else {\r\n                    p1 = LessonService.getOtherLessons([model.filters.structure.id], mondayOfWeek, teacherItem, model.filters.audience);\r\n                    p2 = HomeworkService.getOtherHomeworks([model.filters.structure.id], mondayOfWeek, teacherItem, model.filters.audience);\r\n                }\r\n            } else {\r\n                p1 = LessonService.getLessons(structureIds, mondayOfWeek, isUserParent, childId);\r\n                p2 = HomeworkService.getHomeworks(structureIds, mondayOfWeek, isUserParent, childId);\r\n            }\r\n\r\n            //dont load courses if is not at teacher\r\n            var p3 = $q.when([]);\r\n            var p4 = $q.when([]);\r\n            if (model.isUserTeacher()) {\r\n                //TODO use structureIds\r\n                p3 = CourseService.getMergeCourses(model.me.structures[0], model.me.userId, mondayOfWeek);\r\n                if (SecureService.hasRight(CONSTANTS.RIGHTS.MANAGE_MODEL_WEEK)) {\r\n                    p4 = ModelWeekService.getModelWeeks();\r\n                }\r\n            }\r\n\r\n            return $q.all([p1, p2, p3, p4]).then(results => {\r\n                let lessons = results[0];\r\n                let homeworks = results[1];\r\n                $scope.courses = results[2];\r\n                let modelWeeks = results[3];\r\n\r\n                let p = $q.when();\r\n                if ((!$scope.courses || $scope.courses.length === 0) && SecureService.hasRight(CONSTANTS.RIGHTS.MANAGE_MODEL_WEEK)) {\r\n                    //dont get model if the current week is the model\r\n                    if (modelWeeks.A || modelWeeks.B){\r\n                        if  (\r\n                            (!modelWeeks.A || !moment(modelWeeks.A.beginDate).isSame(mondayOfWeek)) &&\r\n                            (!modelWeeks.B || !moment(modelWeeks.B.beginDate).isSame(mondayOfWeek))){\r\n                            p = ModelWeekService.getCoursesModel($scope.mondayOfWeek).then((modelCourses) => {\r\n                                $scope.courses = modelCourses;\r\n                            });\r\n                            $scope.isModelWeek = false;\r\n                        }else{\r\n                            if (modelWeeks.A && moment(modelWeeks.A.beginDate).isSame(mondayOfWeek)){\r\n                                $scope.modelWeekCurrentWeek = 'A';\r\n                            }else{\r\n                                $scope.modelWeekCurrentWeek = 'B';\r\n                            }\r\n                            $scope.isModelWeek = true;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                p.then(() => {\r\n                    $scope.currentModelWeekIndicator = moment($scope.mondayOfWeek).weeks() % 2 ? \"B\" : \"A\";\r\n                    model.lessons.all.splice(0, model.lessons.all.length);\r\n                    model.lessons.addRange(lessons);\r\n                    model.homeworks.all.splice(0, model.homeworks.all.length);\r\n                    model.homeworks.addRange(homeworks);\r\n                    $scope.itemsCalendar = [].concat(model.lessons.all).concat($scope.courses);\r\n                });\r\n            });\r\n        }\r\n\r\n\r\n        $scope.setChildFilter = function(child, cb) {\r\n            refreshDatas(UtilsService.getUserStructuresIdsAsString(), $scope.mondayOfWeek, true, child.id);\r\n        };\r\n\r\n        $scope.showCalendarForChild = function(child) {\r\n            $scope.setChildFilter(child);\r\n        };\r\n\r\n        $scope.$on('show-child',(_,child)=>{\r\n            refreshDatas(UtilsService.getUserStructuresIdsAsString(), $scope.mondayOfWeek, true, child.id);\r\n        });\r\n\r\n        var showTemplates = function() {\r\n            template.open('main', 'main');\r\n            template.open('main-view', 'calendar');\r\n            template.open('create-lesson', 'create-lesson');\r\n            template.open('create-homework', 'create-homework');\r\n            template.open('daily-event-details', 'daily-event-details');\r\n            template.open('daily-event-item', 'daily-event-item');\r\n        };\r\n\r\n        /**\r\n         * Display or hide the homework panel\r\n         * in calendar view\r\n         */\r\n        $scope.toggleHomeworkPanel = function() {\r\n            $scope.display.bShowHomeworks = !$scope.display.bShowHomeworks;\r\n\r\n            if (!$scope.display.bShowHomeworks && !$scope.display.bShowCalendar) {\r\n                $scope.display.bShowCalendar = true;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Display/hide calendar\r\n         */\r\n        $scope.toggleCalendar = function() {\r\n            $scope.display.bShowCalendar = !$scope.display.bShowCalendar;\r\n            if (!$scope.display.bShowHomeworks && !$scope.display.bShowCalendar) {\r\n                $scope.display.bShowHomeworks = true;\r\n            }\r\n        };\r\n\r\n\r\n        $scope.$watch(()=>{\r\n            return  $rootScope.currentRightPanelVisible;\r\n        },(n)=>{\r\n            $scope.currentRightPanelVisible = n;\r\n        });\r\n\r\n        $scope.redirect = function(path) {\r\n            $location.path(path);\r\n\r\n        };\r\n    }]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/calendar/calendar.controller.ts","import { _, idiom as lang, moment, model } from 'entcore';\r\nimport { jsonToJsAttachment, CONSTANTS } from '../tools';\r\nimport http from 'axios';\r\n\r\n\r\n/*\r\n* Homework service as class\r\n* used to manipulate Homework model\r\n*/\r\nexport class HomeworkService {\r\n\r\n    static getHomeworks(userStructuresIds,mondayOfWeek,isUserParent,childId, fromDate?, toDate?){\r\n        var start = moment(mondayOfWeek).day(1).format(CONSTANTS.CAL_DATE_PATTERN);\r\n        var end = moment(mondayOfWeek).day(1).add(1, 'week').format(CONSTANTS.CAL_DATE_PATTERN);\r\n        if (fromDate){\r\n            start = fromDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n            end = toDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n        }\r\n        var urlGetHomeworks = `/diary/homework/${userStructuresIds}/${start}/${end}/`;\r\n\r\n        if (isUserParent && childId) {\r\n            urlGetHomeworks += childId;\r\n        } else {\r\n            urlGetHomeworks += '%20';\r\n        }\r\n\r\n        return http.get(urlGetHomeworks).then((result)=>{\r\n            return this.mappHomework(result.data);\r\n        });\r\n    }\r\n\r\n    static getOtherHomeworks(userStructuresIds,mondayOfWeek,teacher,audience, fromDate?, toDate?){\r\n        var start = moment(mondayOfWeek).day(1).format(CONSTANTS.CAL_DATE_PATTERN);\r\n        var end = moment(mondayOfWeek).day(1).add(1, 'week').format(CONSTANTS.CAL_DATE_PATTERN);\r\n        if (fromDate){\r\n            start = fromDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n            end = toDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n        }\r\n        let type = teacher ? \"teacher\" : \"audience\";\r\n        let id = teacher ? teacher.key : audience.key;\r\n\r\n        var urlGetHomeworks = `/diary/homework/external/${userStructuresIds}/${start}/${end}/${type}/${id}`;\r\n\r\n        return http.get(urlGetHomeworks).then((result)=>{\r\n            return this.mappHomework(result.data);\r\n        });\r\n    }\r\n\r\n    /*\r\n    *   Mapp homeworks\r\n    */\r\n    static mappHomework(homeworks){\r\n        return _.map(homeworks,(sqlHomework) =>{\r\n            let homework:any =   {\r\n                //for share directive you must have _id\r\n                _id:  sqlHomework.id,\r\n                id: sqlHomework.id,\r\n                description: sqlHomework.homework_description,\r\n                audienceId: sqlHomework.audience_id,\r\n                audience: model.audiences.findWhere({ id: sqlHomework.audience_id }),\r\n                subject: model.subjects.findWhere({ id: sqlHomework.subject_id }),\r\n                subjectId: sqlHomework.subject_id,\r\n                subjectLabel: sqlHomework.subject_label,\r\n                type: model.homeworkTypes.findWhere({ id: sqlHomework.homework_type_id }),\r\n                typeId: sqlHomework.homework_type_id,\r\n                typeLabel: sqlHomework.homework_type_label,\r\n                teacherId: sqlHomework.teacher_id,\r\n                structureId: sqlHomework.structureId,\r\n                audienceType: sqlHomework.audience_type,\r\n                audienceLabel: sqlHomework.audience_label,\r\n                teacherName: sqlHomework.teacher_display_name,\r\n                // TODO delete dueDate? (seems redondant info vs date field)\r\n                dueDate: moment(sqlHomework.homework_due_date),\r\n                date: moment(sqlHomework.homework_due_date),\r\n                title: sqlHomework.homework_title,\r\n                color: sqlHomework.homework_color,\r\n                startMoment: moment(sqlHomework.homework_due_date),\r\n                endMoment: moment(sqlHomework.homework_due_date),\r\n                state: sqlHomework.homework_state,\r\n                is_periodic: false,\r\n                lesson_id: sqlHomework.lesson_id\r\n            };\r\n\r\n            if (sqlHomework.attachments) {\r\n                homework.attachments = _.map(JSON.parse(sqlHomework.attachments), jsonToJsAttachment);\r\n            }\r\n\r\n            if('group' === homework.audienceType){\r\n                homework.audienceTypeLabel = lang.translate('diary.audience.group');\r\n            } else {\r\n                homework.audienceTypeLabel = lang.translate('diary.audience.class');\r\n            }\r\n\r\n            return homework;\r\n        });\r\n    }\r\n\r\n\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/services/homework.service.ts","import { angular, ng, model, notify, moment} from 'entcore';\r\n\r\nexport const CalendarDailyEventsController = ng.controller('CalendarDailyEventsController',\r\n    ['$scope', ($scope) => {\r\n\r\n        init();\r\n\r\n        function init(){\r\n            $scope.isUserTeacher = model.isUserTeacher();\r\n\r\n            // default open state of calendar grid\r\n            // and homework panel\r\n            //TODO remove and delegate to calendar controler\r\n\r\n            handlers();\r\n        }\r\n\r\n        /*\r\n        * bind events behaviours\r\n        */\r\n        function handlers(){\r\n            //watch calendar recreation\r\n            $scope.$watch(()=>{\r\n                return model.calendar;\r\n            },()=>{\r\n                $scope.calendar = model.calendar;\r\n                placeCalendarAndHomeworksPanel();\r\n            });\r\n\r\n            //watch toggle options\r\n            $scope.$watch(()=>{\r\n                return \"\"+$scope.bShowCalendar +$scope.bShowHomeworks+$scope.bShowHomeworksMinified;\r\n            },()=>{\r\n                placeCalendarAndHomeworksPanel();\r\n            });\r\n        }\r\n\r\n\r\n        /**\r\n         * Open homeworks details when homeworks info is minimized\r\n         * or vice versa\r\n         * @param day\r\n         * @param $event\r\n         */\r\n        $scope.toggleOpenDailyEvents = function(day, $event) {\r\n            if (!($event.target && $event.target.type === \"checkbox\")) {\r\n                day.openDailyEvents = !day.openDailyEvents;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Redirect to homework or lesson view if homework attached to some lesson\r\n         * @param homework Homework being clicked/selected\r\n         * @param $event\r\n         */\r\n        $scope.editSelectedHomework = function(homework, $event) {\r\n            // prevent redirect on clicking on checkbox\r\n            if (!($event.target && $event.target.type === \"checkbox\")) {\r\n                if (!homework.lesson_id) {\r\n                    window.location.href = window.location.host + '/diary#/editHomeworkView/' + homework.id;\r\n                } else {\r\n                    window.location.href = window.location.host + '/diary#/editLessonView/' + homework.lesson_id + '/' + homework.id;\r\n                }\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Toggle show display homework panel detail of a day\r\n         * Note: jquery oldschool way since with angular could not fix some display problems\r\n         * @param day\r\n         */\r\n        $scope.toggleShowHwDetail = function(day) {\r\n            hideOrShowHwDetail(day, undefined, true);\r\n        };\r\n\r\n        /**\r\n         *\r\n         * @param day\r\n         * @param hideHomeworks\r\n         * @param unselectHomeworksOnHide\r\n         */\r\n        var hideOrShowHwDetail = function(day, hideHomeworks, unselectHomeworksOnHide) {\r\n            if (!day.dailyEvents){\r\n                return;\r\n            }\r\n            var hwDayDetail = $('#hw-detail-' + day.index);\r\n\r\n            var isNotHidden = hwDayDetail.hasClass('show');\r\n\r\n            if (typeof hideHomeworks === 'undefined') {\r\n                hideHomeworks = isNotHidden;\r\n            }\r\n\r\n            if (hideHomeworks) {\r\n                hwDayDetail.removeClass('show');\r\n            } else {\r\n                hwDayDetail.addClass('show');\r\n            }\r\n\r\n            if (hideHomeworks && unselectHomeworksOnHide) {\r\n                day.dailyEvents.forEach(function(dailyEvent) {\r\n                    dailyEvent.selected = false;\r\n                });\r\n            }\r\n        };\r\n\r\n\r\n        /**\r\n         * Get the maximum number of homeworks of a day for current week\r\n         */\r\n        var getMaxHomeworksPerDay = function() {\r\n            var max = 0;\r\n\r\n            $scope.calendar.days.all.forEach(function(day) {\r\n                if (day.dailyEvents && day.dailyEvents.length > max) {\r\n                    max = day.dailyEvents.length;\r\n                }\r\n            });\r\n\r\n            return max;\r\n        };\r\n\r\n\r\n\r\n\r\n        //$scope.show = model.show;\r\n\r\n        /**\r\n         * Minify the homework panel or not\r\n         * If it's minified, will only show one max homework\r\n         * else 3\r\n         */\r\n        $scope.toggleHomeworkPanelMinized = function() {\r\n            placeCalendarAndHomeworksPanel();\r\n        };\r\n\r\n        /**\r\n         *\r\n         * @param day\r\n         * @returns {Number|boolean}\r\n         */\r\n        $scope.showNotAllHomeworks = function(day) {\r\n            return day.dailyEvents && day.dailyEvents.length && !$scope.showAllHomeworks(day);\r\n        };\r\n\r\n        /**\r\n         *\r\n         * @param day Current day\r\n         * @returns {boolean} true if all homeworks of current day\r\n         * should be displayed in homework panel\r\n         */\r\n        $scope.showAllHomeworks = function(day) {\r\n\r\n            if (!day.dailyEvents || (day.dailyEvents && day.dailyEvents.length == 0)) {\r\n                return false;\r\n            }\r\n\r\n            // calendar hidden and homework panel maximized -> show all\r\n            if (!$scope.bShowHomeworksMinified) {\r\n                return !$scope.bShowCalendar || (day.dailyEvents.length <= 1);\r\n            } else {\r\n                return day.dailyEvents.length == 1;\r\n            }\r\n        };\r\n\r\n\r\n\r\n        /**\r\n         * Return the homework panel height that should be set\r\n         * depending on calendar grid displayed state and homework panel minimized state\r\n         * @param bShowCalendar True if calendar grid is visible\r\n         * @param bShowHomeworks True if homeworks panel is visible\r\n         * @returns {number} Homework panel height\r\n         */\r\n        var getHomeworkPanelHeight = function(bShowCalendar, bShowHomeworks) {\r\n\r\n            /**\r\n             * Height of a single homework in homework panel\r\n             * @type {number}\r\n             */\r\n            const HW_HEIGHT = 40;\r\n            var homeworksPerDayDisplayed = 0;\r\n\r\n            if (!bShowHomeworks) {\r\n                return 0;\r\n            }\r\n\r\n            if (!bShowCalendar) {\r\n                homeworksPerDayDisplayed = getMaxHomeworksPerDay();\r\n            } else {\r\n                homeworksPerDayDisplayed = 1;\r\n            }\r\n\r\n            // max homeworks per day displayed used for drag and drop directive\r\n            // to detect dropped day of the week area\r\n            model.homeworksPerDayDisplayed = homeworksPerDayDisplayed;\r\n\r\n\r\n            return homeworksPerDayDisplayed * HW_HEIGHT;\r\n        };\r\n\r\n\r\n        /**\r\n         * Display homeworks and lessons and set open state of homework panel\r\n         * and calendar grid\r\n         */\r\n        function placeCalendarAndHomeworksPanel() {\r\n\r\n            var bShowCalendar = $scope.bShowCalendar;\r\n            let bShowHomeworks = null; //var bShowHomeworks = $scope.bShowHomeworks;\r\n            var bShowHomeworksMinified = $scope.bShowHomeworksMinified;\r\n\r\n\r\n\r\n            /**\r\n             * Calendar height\r\n             * @type {number}\r\n             */\r\n\r\n            return;\r\n            /*const CAL_HEIGHT = 775;\r\n\r\n            var newHwPanelHeight = getHomeworkPanelHeight(bShowCalendar, bShowHomeworks);\r\n\r\n            // reduce height of homework panel if requested\r\n\r\n            var prevTimeslotsBar = $('.previous-timeslots');\r\n            var nextTimeslotsBar = $('.next-timeslots');\r\n\r\n            // hours legend at left\r\n            var hoursBar = $('.timeslots');\r\n            var calItems = $('calendar .schedule-item-content');\r\n            var calGrid = $('.schedule .days');\r\n\r\n            // show/hide calendar items\r\n            hoursBar.css('display', bShowCalendar ? 'inherit' : 'none');\r\n            calItems.css('display', bShowCalendar ? 'inherit' : 'none');\r\n\r\n            // do not hide previous timeslots bar\r\n            // or else would make so hole/gap\r\n            if (bShowCalendar) {\r\n                prevTimeslotsBar.removeAttr('disabled');\r\n            } else {\r\n                prevTimeslotsBar.attr('disabled', 'disabled');\r\n            }\r\n\r\n            nextTimeslotsBar.css('display', bShowCalendar ? 'inherit' : 'none');\r\n\r\n            calGrid.height(bShowCalendar ? (newHwPanelHeight + CAL_HEIGHT) : 0);\r\n\r\n            hoursBar.css('margin-top', newHwPanelHeight);\r\n            $('legend.timeslots').css('margin-top', '');\r\n            $('legend.timeslots').css('top', newHwPanelHeight+\"px\");\r\n            nextTimeslotsBar.css('top', CAL_HEIGHT + newHwPanelHeight);\r\n\r\n            $('.schedule-item').css('margin-top', bShowCalendar ? newHwPanelHeight : 0);\r\n            calGrid.height(CAL_HEIGHT + (bShowCalendar ? newHwPanelHeight : 0));\r\n\r\n            // set homework panel size with max number of homeworks\r\n\r\n            //$('.homeworkpanel').css('height', newHwPanelHeight +\"px\");\r\n            $('.homeworkpanel').css('display', bShowHomeworks ? 'inherit' : 'none');\r\n\r\n            // toggle buttons\r\n            $('.show-homeworks').css('opacity', bShowHomeworks ? 1 : 0.3);\r\n            $('.show-calendar-grid').css('opacity', bShowCalendar ? 1 : 0.3);\r\n\r\n\r\n            $('#minimize_hw_span').css('display', (newHwPanelHeight > 0) ? 'inherit' : 'none');\r\n\r\n            if (!bShowCalendar) {\r\n                model.calendar.days.all.forEach(function(day) {\r\n                    hideOrShowHwDetail(day, true, true);\r\n                });\r\n            }*/\r\n\r\n        }\r\n\r\n\r\n        function setDaysContent() {\r\n            model.calendar.days.forEach(function(day) {\r\n                day.dailyEvents = [];\r\n            });\r\n\r\n\r\n            $scope.ngModel.forEach(function(item) {\r\n                var refDay = moment(model.calendar.dayForWeek).day(1);\r\n                model.calendar.days.forEach(function(day) {\r\n\r\n                    if (item.dueDate && item.dueDate.format('YYYY-MM-DD') === refDay.format('YYYY-MM-DD')) {\r\n                        day.dailyEvents.push(item);\r\n                    }\r\n\r\n                    refDay.add('day', 1);\r\n                });\r\n            });\r\n\r\n            $scope.calendar = model.calendar;\r\n\r\n            var timeslots = $('.timeslots');\r\n\r\n            if (timeslots.length === 8) {\r\n                placeCalendarAndHomeworksPanel();\r\n            }\r\n            // if days timeslots are not yet positioned\r\n            // wait until they are to create the homework panel\r\n            else {\r\n                var timerOccurences = 0;\r\n                var timer = setInterval(\r\n                    function() {\r\n                        timeslots = $('.timeslots');\r\n                        if (timeslots.length === 8) {\r\n                            clearInterval(timer);\r\n                            placeCalendarAndHomeworksPanel();\r\n                        }\r\n                        timerOccurences++;\r\n                        // 5s should be far than enough to have all timeslots loaded\r\n                        if (timerOccurences > 50) {\r\n                            clearInterval(timer);\r\n                        }\r\n                    }, 100);\r\n            }\r\n        }\r\n\r\n        model.on('calendar.date-change', function() {\r\n            setDaysContent();\r\n            $scope.$apply();\r\n        });\r\n\r\n        $scope.$watchCollection('ngModel', function(newVal) {\r\n            setDaysContent();\r\n        });\r\n    }]);\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/calendar/calendar-daily-events.controller.ts","import { ng, model, moment } from 'entcore';\r\nimport {HomeworkService} from \"../../services/homework.service\";\r\nimport {LessonService} from \"../../services/lessons.service\";\r\nimport {UtilsService} from \"../../services/utils.service\";\r\nimport {SecureService} from \"../../services/secure.service\";\r\nimport {CONSTANTS} from \"../../tools\";\r\n\r\nexport const CalendarListViewController = ng.controller('CalendarListViewController',\r\n    ['$scope', '$timeout', '$q', '$location', ($scope, $timeout, $q, $location) => {\r\n\r\n        let vm = this;\r\n        $timeout(init);\r\n\r\n        function init() {\r\n\r\n\r\n            if (model.mondayOfWeek){\r\n                model.filters.startDate = moment(model.mondayOfWeek);\r\n                model.filters.endDate = moment(model.filters.startDate).add(7, 'd');\r\n            }else{\r\n                if (!model.filters.startDate) {\r\n                    model.filters.startDate = moment().startOf('week');\r\n                    model.filters.endDate = moment(model.filters.startDate).add(7, 'd');\r\n                }\r\n            }\r\n\r\n\r\n            vm.getDatas();\r\n\r\n            //reset filter;\r\n            $scope.$watch(() => {\r\n                return model.filters.selectedSubject;\r\n            }, (n) => {\r\n                if (!n) {\r\n                    model.filters.selectedSubject = undefined;\r\n                }\r\n            });\r\n\r\n\r\n            $scope.$watch(() => {\r\n                return model.filters.teacher;\r\n            }, (n, o) => {\r\n                if (n !== o && n) {\r\n                    $timeout(vm.getDatas);\r\n\r\n                }\r\n            });\r\n            $scope.$watch(() => {\r\n                return model.filters.audience;\r\n            }, (n, o) => {\r\n                if (n !== o && n) {\r\n                    $timeout(vm.getDatas);\r\n                }\r\n            });\r\n\r\n\r\n        }\r\n\r\n\r\n        $scope.$on('show-child',(_,child)=>{\r\n            vm.getDatas();\r\n        });\r\n\r\n\r\n        $scope.$on('refresh-list',()=>{\r\n            vm.getDatas();\r\n        });\r\n\r\n        vm.getDatas = function() {\r\n            var p1;\r\n            var p2;\r\n            model.filters.startDate = moment(model.filters.startDate);\r\n            model.filters.endDate = moment(model.filters.endDate);\r\n            let childId = model.child ? model.child.id : undefined;\r\n            if (SecureService.hasRight(CONSTANTS.RIGHTS.SHOW_OTHER_TEACHER)) {\r\n                let teacherItem = model.filters.teacher ? model.filters.teacher.item : undefined;\r\n\r\n                if (!teacherItem && !model.filters.audience) {\r\n                    return;\r\n                }\r\n\r\n                p1 = LessonService.getOtherLessons([model.filters.structure.id], model.filters.startDate, teacherItem, model.filters.audience, model.filters.startDate, model.filters.endDate);\r\n                p2 = HomeworkService.getOtherHomeworks([model.filters.structure.id], model.filters.startDate, teacherItem, model.filters.audience, model.filters.startDate, model.filters.endDate);\r\n            } else {\r\n                p1 = LessonService.getLessons(UtilsService.getUserStructuresIdsAsString(), model.filters.startDate, model.isUserParent, childId, model.filters.startDate, model.filters.endDate);\r\n                p2 = HomeworkService.getHomeworks(UtilsService.getUserStructuresIdsAsString(), model.filters.startDate, model.isUserParent, childId, model.filters.startDate, model.filters.endDate);\r\n            }\r\n\r\n            return $q.all([p1, p2]).then(results => {\r\n                let lessons = results[0];\r\n                let homeworks = results[1];\r\n                vm.createStructure(lessons, homeworks);\r\n                model.filters.subjects = vm.getSubjects();\r\n\r\n                let selectedDay = model.selectedDay;\r\n                if (selectedDay) {\r\n                    model.selectedDay = undefined;\r\n\r\n                    vm.dayItems.map((item) => {\r\n                        if (item.key === selectedDay.key) {\r\n                            item.selected = true;\r\n                            model.selectedDay = item;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        };\r\n\r\n        vm.goToItemDetail = function(item) {\r\n\r\n            let id = item.item.lesson_id || item.item.id;\r\n            let type;\r\n\r\n            if (item.type == 'homework' && !item.item.lesson_id) {\r\n                type = 'Homework';\r\n            } else {\r\n                type = 'Lesson';\r\n            }\r\n            //item.type[0].toUpperCase() + item.type.slice(1);\r\n            //let action = item.item.locked || item.type === 'homework'\r\n            let url;\r\n            if (item.item.locked) {\r\n                url = '/showLessonView/';\r\n            } else {\r\n                url = '/edit' + type + 'View/';\r\n            }\r\n\r\n            if (item.item.lesson_id) {\r\n                url = url + item.item.lesson_id + \"/\" + item.item.id;\r\n            } else {\r\n                url = url + item.item.id;\r\n            }\r\n\r\n            $location.url(url);\r\n\r\n        };\r\n\r\n        vm.selectDay = function(day) {\r\n            vm.dayItems.map((day) => {\r\n                day.selected = false;\r\n            });\r\n            day.selected = true;\r\n            model.selectedDay = day;\r\n        };\r\n\r\n        vm.createStructure = function(lessons, homework) {\r\n            vm.dayItems = {};\r\n\r\n            model.lessons.all.splice(0, model.lessons.all.length);\r\n            model.lessons.addRange(lessons);\r\n            model.homeworks.all.splice(0, model.homeworks.all.length);\r\n            model.homeworks.addRange(homework);\r\n\r\n            vm.addArray(model.lessons.all, 'lesson');\r\n            vm.addArray(model.homeworks.all, 'homework');\r\n            vm.dayItems = vm.restructure(vm.dayItems);\r\n        };\r\n\r\n        vm.addArray = function(array, type) {\r\n            array.forEach((item) => {\r\n                let key = item.date.format('YYYY-MM-DD');\r\n                if (!vm.dayItems[key]) {\r\n                    vm.dayItems[key] = [];\r\n                }\r\n                vm.dayItems[key].push({\r\n                    type: type,\r\n                    item: item,\r\n                    day: item.date\r\n                });\r\n            });\r\n        };\r\n        vm.getSubjects = function() {\r\n            let subjectResults = {};\r\n            vm.dayItems.forEach((day) => {\r\n                day.items.forEach((item) => {\r\n                    if (item.item.subject && item.item.subject.label) {\r\n                        subjectResults[item.item.subject.label] = true;\r\n                    }\r\n                });\r\n            });\r\n\r\n            return Object.keys(subjectResults);\r\n\r\n        };\r\n        vm.restructure = function(map) {\r\n            let result = [];\r\n            for (let dayAsMapKey in vm.dayItems) {\r\n                let items = vm.dayItems[dayAsMapKey];\r\n                result.push({\r\n                    key: dayAsMapKey,\r\n                    items: items,\r\n                    shortName: items[0].day.format(\"dddd DD MMMM YYYY\").substring(0, 2),\r\n                    shortDate: items[0].day.format(\"DD/MM\")\r\n                });\r\n            }\r\n            return result;\r\n        };\r\n\r\n    }]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/calendar/calendar-list-view.controller.ts","import {ng, model, moment, _, notify, $q } from 'entcore';\r\nimport {DATE_FORMAT } from '../../tools';\r\nimport { Lesson } from '../../models/index';\r\nimport {SubjectService} from \"../../services/subject.service\";\r\nimport {PedagogicItemService} from \"../../services/pedagogic-item.service\";\r\n\r\n\r\nexport const EditLessonController = ng.controller('EditLessonController',\r\n    ['$scope', '$rootScope', '$routeParams', ($scope, $rootScope, $routeParams) => {\r\n\r\n        var vm = this;\r\n        init();\r\n\r\n        async function init() {\r\n            //existing lesson\r\n            $scope.tabs.showAnnotations = false;\r\n            await loadSubjects();\r\n            await loadHomeworkTypes();\r\n\r\n            if ($routeParams.idLesson) {\r\n                model.newLesson = null;\r\n                loadExistingLesson();\r\n            } else if(model.newLesson){\r\n                createNewLessonFromPedagogicItem();\r\n            }else if ($routeParams.progressionId){\r\n                //show the EditProgressionLessonController\r\n                loadNewLesson();\r\n                return ;\r\n            }else{\r\n                //new lesson\r\n                loadNewLesson();\r\n            }\r\n\r\n            $scope.data.tabSelected = 'lesson';\r\n\r\n            //add watch on selection\r\n            $scope.$watch('lesson.audience',()=>{\r\n                if(vm.lesson && vm.lesson.previousLessons){\r\n                    $scope.loadPreviousLessonsFromLesson(vm.lesson);\r\n                }\r\n            });\r\n            //add watch on selection\r\n            $scope.$watch('lesson.subject',()=>{\r\n                if (vm.lesson && vm.lesson.previousLessons){\r\n                    $scope.loadPreviousLessonsFromLesson(vm.lesson);\r\n                }\r\n            });\r\n            // $q.all([\r\n            //     //need subjects\r\n            //     loadSubjects(),\r\n            //     //need homework types\r\n            //     loadHomeworkTypes()\r\n            // ]).then(()=>{\r\n            //     if ($routeParams.idLesson) {\r\n            //         model.newLesson = null;\r\n            //         loadExistingLesson();\r\n            //     } else if(model.newLesson){\r\n            //         createNewLessonFromPedagogicItem();\r\n            //     }else if ($routeParams.progressionId){\r\n            //         //show the EditProgressionLessonController\r\n            //         loadNewLesson();\r\n            //         return ;\r\n            //     }else{\r\n            //         //new lesson\r\n            //         loadNewLesson();\r\n            //     }\r\n            //\r\n            //     $scope.data.tabSelected = 'lesson';\r\n            //\r\n            //     //add watch on selection\r\n            //     $scope.$watch('lesson.audience',()=>{\r\n            //         if(vm.lesson && vm.lesson.previousLessons){\r\n            //             $scope.loadPreviousLessonsFromLesson(vm.lesson);\r\n            //         }\r\n            //     });\r\n            //     //add watch on selection\r\n            //     $scope.$watch('lesson.subject',()=>{\r\n            //         if (vm.lesson && vm.lesson.previousLessons){\r\n            //             $scope.loadPreviousLessonsFromLesson(vm.lesson);\r\n            //         }\r\n            //     });\r\n            // });\r\n        }\r\n\r\n        async function loadHomeworkTypes(){\r\n            console.log('load  Homework types');\r\n            if (!model.homeworkTypes || !model.homeworkTypes.all || model.homeworkTypes.all.length === 0){\r\n                try {\r\n                    await model.homeworkTypes.syncHomeworkTypes();\r\n                } catch  (e) {\r\n                    $rootScope.validationError(e);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        async function loadSubjects(){\r\n            if (!model.subjects || !model.subjects.all || model.subjects.all.length === 0) {\r\n                const subjects = await SubjectService.getCustomSubjects(model.isUserTeacher());\r\n                model.subjects.all = [];\r\n                if (subjects) {\r\n                    model.subjects.addRange(subjects);\r\n                }\r\n            } else {\r\n                return false;\r\n            }\r\n            // if (!model.subjects || !model.subjects.all || model.subjects.all.length === 0){\r\n            //     return SubjectService.getCustomSubjects(model.isUserTeacher()).then((subjects)=>{\r\n            //         model.subjects.all=[];\r\n            //         if(subjects){\r\n            //             model.subjects.addRange(subjects);\r\n            //         }\r\n            //     });\r\n            // }else{\r\n            //     return $q.when();\r\n            // }\r\n        }\r\n\r\n        function createNewLessonFromPedagogicItem (){\r\n            vm.lesson = model.newLesson;\r\n            model.newLesson=null;\r\n            //$scope.newItem = vm.lesson.newItem;\r\n            populateExistingLesson();\r\n        }\r\n\r\n        function populateExistingLesson(){\r\n            $scope.tabs.createLesson = $routeParams.idHomework ? 'homeworks' : 'lesson';\r\n\r\n            $scope.tabs.showAnnotations = !!vm.lesson.annotations;\r\n            // open existing lesson for edit\r\n\r\n            vm.lesson.previousLessonsLoaded = false; // will force reload\r\n            $scope.newItem = {\r\n                date: moment(vm.lesson.date),\r\n                beginning: vm.lesson.startMoment, //moment(vm.lesson.beginning),\r\n                end: vm.lesson.endMoment //moment(vm.lesson.end)\r\n            };\r\n\r\n            $scope.loadHomeworksForCurrentLesson(function() {\r\n                vm.lesson.homeworks.forEach(function(homework) {\r\n                    if (vm.lesson.homeworks.length || ($routeParams.idHomework && $routeParams.idHomework == homework.id)) {\r\n                        homework.expanded = true;\r\n                    }\r\n\r\n                    model.loadHomeworksLoad(homework, moment(homework.date).format(\"YYYY-MM-DD\"), vm.lesson.audience.id);\r\n                });\r\n            });\r\n\r\n        }\r\n        /*\r\n        * load existing lesson\r\n        */\r\n        function loadExistingLesson() {\r\n            var lesson = new Lesson();\r\n            model.lesson = lesson;\r\n            lesson.id = parseInt($routeParams.idLesson);\r\n\r\n            $scope.lessonDescriptionIsReadOnly = false;\r\n            $scope.homeworkDescriptionIsReadOnly = false;\r\n            vm.lesson = lesson;\r\n            lesson.load(true, ()=> {\r\n                populateExistingLesson();\r\n            }, function(cbe) {\r\n                notify.error(cbe.message);\r\n            });\r\n        }\r\n\r\n        function loadNewLesson(){\r\n            var selectedDate = $scope.selectedDateInTheFuture();\r\n\r\n            vm.lesson = model.initLesson((\"timeFromCalendar\" === $routeParams.timeFromCalendar), selectedDate);\r\n            $scope.newItem = vm.lesson.newItem;\r\n        }\r\n        /**\r\n         * Load homeworks for current lesson being edited\r\n         * @param cb Callback function\r\n         */\r\n        $scope.loadHomeworksForCurrentLesson = function(cb) {\r\n\r\n            // lesson not yet created do not retrieve homeworks\r\n            if (!vm.lesson.id) {\r\n                return;\r\n            }\r\n\r\n            var needSqlSync = false;\r\n\r\n            // if homeworks ever retrieved from db don't do it again!\r\n            vm.lesson.homeworks.forEach(function(homework) {\r\n                if (!homework.loaded) {\r\n                    needSqlSync = true;\r\n                }\r\n            });\r\n\r\n            // only reload homeworks if necessary\r\n            if (needSqlSync) {\r\n                model.loadHomeworksForLesson(vm.lesson,\r\n\r\n                    function() {\r\n                        if (typeof cb !== 'undefined') {\r\n                            cb();\r\n                        }\r\n                    },\r\n                    function(e) {\r\n                        $rootScope.validationError(e);\r\n                    });\r\n            } else {\r\n                if (typeof cb !== 'undefined') {\r\n                    cb();\r\n                }\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Create or update lesson to database from page fields\r\n         * @param goMainView if true will switch to calendar or list view\r\n         * after create/update else stay on current page\r\n         */\r\n        var createOrUpdateLesson = function(goMainView?, cb?) {\r\n\r\n            $scope.currentErrors = [];\r\n\r\n            vm.lesson.startTime = $scope.newItem.beginning;\r\n            vm.lesson.endTime = $scope.newItem.end;\r\n            vm.lesson.date = $scope.newItem.date;\r\n\r\n            return vm.lesson.save(function() {\r\n                notify.info('lesson.saved');\r\n                vm.lesson.audience = model.audiences.findWhere({\r\n                    id: vm.lesson.audience.id\r\n                });\r\n                if (goMainView) {\r\n                    vm.lesson = null;\r\n                    $scope.homework = null;\r\n                }\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n            }).catch(function(e) {\r\n                vm.errorValid = true;\r\n                throw e;\r\n            });\r\n        };\r\n\r\n        $scope.loadMorePreviousLessonsFromLesson = function (currentLesson) {\r\n            if (currentLesson.allPreviousLessonsLoaded || currentLesson.previousLessonsLoading){\r\n                return;\r\n            }\r\n            $scope.loadPreviousLessonsFromLesson(currentLesson, true);\r\n        };\r\n\r\n\r\n\r\n        var defaultCount = 6;\r\n        var idx_start = 0;\r\n        var idx_end = idx_start + defaultCount;\r\n\r\n\r\n        $scope.loadPreviousLessonsFromLesson = function (lesson,useDeltaStep) {\r\n\r\n            if (!useDeltaStep) {\r\n                lesson.allPreviousLessonsLoaded = false;\r\n            }\r\n\r\n            if (useDeltaStep) {\r\n                idx_start += defaultCount;\r\n                idx_end += defaultCount;\r\n            }\r\n            //const DATE_FORMAT = \"dd/MM/yyyy\";\r\n            let params:any = {\r\n                offset : idx_start,\r\n                limit : idx_end,\r\n                excludeLessonId : lesson.id ? lesson.id : null,\r\n                startDate : moment(lesson.date).add(-2, 'month').format(DATE_FORMAT),\r\n                subject : lesson.subject.id,\r\n                audienceId : lesson.audience.id,\r\n                returnType : 'lesson',\r\n                homeworkLinkedToLesson : \"true\",\r\n                sortOrder : \"DESC\"\r\n            };\r\n\r\n            // tricky way to detect if string date or moment date ...\r\n            // 12:00:00\r\n            if (lesson.endTime.length === 8) {\r\n                params.endDateTime = lesson.date.format(DATE_FORMAT) + ' ' + lesson.endTime;\r\n            } else {\r\n                params.endDateTime = lesson.date.format(DATE_FORMAT) + ' ' + moment(lesson.endTime).format(\"HH:mm\");\r\n            }\r\n\r\n            if (!lesson.previousLessons) {\r\n                lesson.previousLessons = [];\r\n            }\r\n\r\n            lesson.previousLessonsLoading = true;\r\n            PedagogicItemService.getPedagogicItems(params).then((pedagogicItems) => {\r\n                //lesson.previousLessonsDisplayed = [];\r\n                if (pedagogicItems.length < defaultCount){\r\n                    lesson.allPreviousLessonsLoaded = true;\r\n                }\r\n\r\n                var groupByItemType = _.groupBy(pedagogicItems, 'type_item');\r\n                var previousLessons = groupByItemType.lesson;\r\n\r\n                if (previousLessons) {\r\n                    var previousLessonIds = [];\r\n\r\n                    previousLessons.forEach(function (lesson) {\r\n                        previousLessonIds.push(lesson.id);\r\n                    });\r\n\r\n                    // load linked homeworks of previous lessons\r\n                    var paramsHomeworks = {\r\n                        returnType : 'homework',\r\n                        homeworkLessonIds : previousLessonIds\r\n                    };\r\n\r\n                    PedagogicItemService.getPedagogicItems(paramsHomeworks).then((previousHomeworks)=>{\r\n                        previousLessons.forEach(function (lesson) {\r\n                            lesson.homeworks = _.where(previousHomeworks, {lesson_id: lesson.id});\r\n                        });\r\n                        if (idx_start !==0){\r\n                            lesson.previousLessons = lesson.previousLessons.concat(previousLessons);\r\n                        }else{\r\n                            lesson.previousLessons = previousLessons;\r\n                        }\r\n                        lesson.previousLessonsLoaded = true;\r\n                        lesson.previousLessonsLoading = false;\r\n                        /*if (typeof cb === 'function') {\r\n                            cb();\r\n                        }*/\r\n                    });\r\n\r\n                } else {\r\n                    lesson.previousLessons = [];\r\n                    lesson.previousLessonsLoaded = true;\r\n                    lesson.previousLessonsLoading = false;\r\n                    /* if (typeof cb === 'function') {\r\n                         cb();\r\n                     }*/\r\n                }\r\n\r\n            });\r\n        };\r\n\r\n        $scope.createAndPublishLesson = function (lesson, isPublish, goMainView) {\r\n            return createOrUpdateLesson().then(() =>{\r\n                return $scope.publishLesson(lesson, isPublish).then(()=>{\r\n                    $rootScope.back();\r\n                });\r\n            });\r\n        };\r\n\r\n        $scope.createOrUpdateLesson = function(){\r\n            return createOrUpdateLesson().then(() =>{\r\n                $rootScope.back();\r\n            });\r\n        };\r\n    }]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/lesson/edit-lesson.controller.ts","import {_, moment, model } from 'entcore';\r\nimport { PedagogicItem } from \"../models/PedagogicItem.model\";\r\nimport http from 'axios';\r\n\r\nexport class PedagogicItemService {\r\n    static getPedagogicItems(params){\r\n        let options = {\r\n            method : 'POST',\r\n            url : `/diary/pedagogicItems/list`,\r\n            data : params\r\n        };\r\n\r\n        return http(options).then((result) =>{\r\n            return _.map(result.data, this.mapPedagogicItem);\r\n        } );\r\n    }\r\n\r\n    static mapPedagogicItem(data) {\r\n        var item = new PedagogicItem();\r\n        item.type_item = data.type_item;\r\n        item.id = data.id;\r\n        //for share directive you must have _id\r\n        item._id = data.id;\r\n        item.lesson_id = data.lesson_id;\r\n        item.title = data.title;\r\n        item.subject = data.subject;\r\n        item.audience = data.audience;\r\n        item.start_hour = (data.type_item == \"lesson\") ? moment(data.day).minutes(model.getMinutes(data.start_time)).format(\"HH[h]mm\") : \"\";\r\n        item.end_hour = (data.type_item == \"lesson\") ? moment(data.day).minutes(model.getMinutes(data.end_time)).format(\"HH[h]mm\") : \"\";\r\n        item.type_homework = data.type_homework;\r\n        item.teacher = data.teacher;\r\n        item.description = data.description;\r\n        item.expanded_description = false;\r\n        item.state = data.state;\r\n        item.color = data.color;\r\n        item.getPreviewDescription();\r\n        item.room = data.room;\r\n        item.day = data.day;\r\n        item.turn_in = (data.type_item == \"lesson\") ? \"\" : data.turn_in_type;\r\n        item.selected = false;\r\n\r\n        if (data.day) {\r\n            item.dayFormatted = moment(data.day).format(\"DD/MM/YYYY\");\r\n            item.dayOfWeek = moment(data.day).format(\"dddd\");\r\n        }\r\n        return item;\r\n    }\r\n\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/services/pedagogic-item.service.ts","import { ng, model, idiom as lang, notify } from 'entcore';\r\nimport {ProgressionService} from \"../../services/progression.service\";\r\n\r\nexport const EditProgressionLessonController = ng.controller('EditProgressionLessonController',\r\n    ['$scope', '$timeout', '$rootScope', '$routeParams', ($scope, $timeout, $rootScope, $routeParams) => {\r\n\r\n            let vm = this;\r\n\r\n            $timeout(init);\r\n\r\n            function init() {\r\n\r\n                if ($routeParams.progressionId) {\r\n                    $scope.data.tabSelected = 'lesson';\r\n                    vm.isProgressionLesson = true;\r\n\r\n                    if ($routeParams.editProgressionLessonId!== 'new'){\r\n                      loadLesson($routeParams.editProgressionLessonId);\r\n                    }\r\n                }\r\n            }\r\n            function loadLesson(lessonId){\r\n                ProgressionService.getLessonProgression(lessonId).then((lesson)=>{\r\n                \r\n                    $scope.$parent.editLessonCtrl.lesson = lesson;\r\n                });\r\n            }\r\n\r\n            vm.cancel = function() {\r\n                $rootScope.redirect('/progressionManagerView/' + $routeParams.progressionId);\r\n            };\r\n\r\n            vm.saveLesson = function(lesson) {\r\n                if (!lesson.progressionId){\r\n                    lesson.progressionId = $routeParams.progressionId;\r\n                }\r\n                ProgressionService.saveLessonProgression(lesson).then((newLesson) => {\r\n                    notify.info(lang.translate('progression.content.saved'));\r\n                    lesson.id = newLesson.id;\r\n                    $rootScope.redirect('/progressionManagerView/' + $routeParams.progressionId);\r\n                });\r\n            };\r\n\r\n            vm.addHomework = function(lesson){\r\n                if (!lesson.homeworks ){\r\n                    lesson.homeworks=[];\r\n                }\r\n                let homework = model.initHomework();\r\n                lesson.homeworks.push(homework);\r\n            };\r\n\r\n            vm.loadLesson = function(lessonId){\r\n\r\n            };\r\n    }]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/lesson/edit-progression-lesson.controller.ts","import {angular, model, moment, _, notify, $http, $q, $sce, Collection} from 'entcore';\r\n\r\nexport class ProgressionService {\r\n    constructor() {\r\n    }\r\n\r\n    static getProgressions() {\r\n        let url = `/diary/progression`;\r\n        return $http.get(url).then(result => {\r\n            let progressions = result.data;\r\n            _.each(progressions, (progression) => {\r\n                progression.lessons = _.map(progression.lessons, this.mapApiToLesson);\r\n            });\r\n            return progressions;\r\n        });\r\n    }\r\n\r\n    static saveProgression(progression) {\r\n        let progressionLight = angular.copy(progression);\r\n        let lessonItems = progressionLight.lessonItems;\r\n        let nbLessons = progressionLight.nbLessons;\r\n        delete progressionLight.lessonItems;\r\n        delete progressionLight.nbLessons;\r\n\r\n\r\n        let url = `/diary/progression`;\r\n        return $http({\r\n            url: url,\r\n            method: 'POST',\r\n            data: progressionLight\r\n        }).then(result => {\r\n            if (!lessonItems && !nbLessons) {\r\n                nbLessons = 0;\r\n            }\r\n            result.data.lessonItems = lessonItems;\r\n            result.data.nbLessons = nbLessons;\r\n\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    static deleteProgression(progressionId) {\r\n        let url = `/diary/progression/${progressionId}`;\r\n\r\n        return $http({\r\n            url: url,\r\n            method: 'DELETE'\r\n        }).then(result => {\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    static deleteLessons(lessons) {\r\n\r\n        let lessonsIds = _.map(lessons, lesson => {\r\n            return lesson.id;\r\n        });\r\n\r\n        let url = `/diary/progression/lessons`;\r\n\r\n        return $http({\r\n            url: url,\r\n            method: 'DELETE',\r\n            data: lessonsIds\r\n        }).then(result => {\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    static saveLessonProgression(lesson) {\r\n        let url = `/diary/progression/lesson`;\r\n\r\n        let subjectPromise = $q.when();\r\n        if(!lesson.subject.id){\r\n            subjectPromise = lesson.subject.save().then((subject)=>{\r\n                subject.data = {\r\n                    id : subject.id,\r\n                    label : subject.label,\r\n                    school_id : subject.school_id\r\n                };\r\n            });\r\n        }\r\n        return subjectPromise.then(()=>{\r\n\r\n            return $http({\r\n                url: url,\r\n                method: 'POST',\r\n                data: this.mapLessonToApi(lesson)\r\n            }).then(result => {\r\n                return result.data;\r\n            });\r\n        });\r\n    }\r\n\r\n    static getLessonsProgression(progressionId) {\r\n\r\n        let url = `/diary/progression/${progressionId}/lessons`;\r\n        var that = this;\r\n        return $http.get(url).then(result => {\r\n            return _.map(result.data, (lesson) => that.mapApiToLesson(lesson));\r\n        });\r\n    }\r\n\r\n    static getLessonProgression(lessonId) {\r\n        let url = `/diary/progression/lesson/${lessonId}`;\r\n        var that =  this;\r\n        return $http.get(url).then(result => {\r\n            return that.mapApiToLesson(result.data);\r\n        });\r\n    }\r\n\r\n    static saveLessonOrder(progression) {\r\n        let url = `/diary/progression/order`;\r\n\r\n        return $http({\r\n            url: url,\r\n            method: 'POST',\r\n            data: this.extractOrderInformations(progression)\r\n        });\r\n    }\r\n\r\n    static mapApiToLesson(apiLesson) {\r\n        let lesson = apiLesson; //angular.copy(apiLesson);\r\n        lesson.subject = JSON.parse(lesson.subject);\r\n        lesson.type_item = 'progression';\r\n        if (lesson.description) {\r\n            lesson.descriptionTrusted = $sce.trustAsHtml(lesson.description);\r\n        }\r\n\r\n\r\n        lesson.homeworks = JSON.parse(lesson.homeworks);\r\n        _.each(lesson.homeworks, (homework) => {\r\n            if (homework.description) {\r\n                homework.descriptionTrusted = $sce.trustAsHtml(homework.description);\r\n            }\r\n            homework.type = _.find(model.homeworkTypes.all,{'label':homework.type.label});\r\n        });\r\n\r\n        let homeworks = new Collection();\r\n        homeworks.all = lesson.homeworks;\r\n        lesson.homeworks = homeworks;\r\n        return lesson;\r\n    }\r\n\r\n    static mapHomeworkToApi(homework) {\r\n        return JSON.stringify(homework.data);\r\n    }\r\n\r\n    static mapAttachementsToApi(attachment) {\r\n        return attachment;\r\n    }\r\n\r\n    static mapLessonToApi(lesson) {\r\n\r\n        let result:any = {\r\n            id: lesson.id,\r\n            title: lesson.title,\r\n            description: lesson.description,\r\n            subjectLabel: lesson.subject.label,\r\n            color: lesson.color,\r\n            annotations: lesson.annotations,\r\n            orderIndex: lesson.orderIndex,\r\n            //subject: lesson.subject,\r\n            progressionId: lesson.progressionId,\r\n            homeworks: lesson.homeworks && lesson.homeworks.all ? _.map(lesson.homeworks.all, this.mapHomeworkToApi) : [],\r\n        };\r\n\r\n        if (lesson.homeworks) {\r\n            result.homeworks = JSON.stringify(_.map(lesson.homeworks.all, this.mapObject));\r\n        }\r\n        //let subject = lesson.subject.data.label ? lesson.subject.data : lesson.subject;\r\n        result.subject = JSON.stringify(lesson.subject.data);\r\n        return result;\r\n    }\r\n\r\n    static mapObject(obj) {\r\n        obj.toJSON = undefined;\r\n        return obj;\r\n    }\r\n\r\n    static extractOrderInformations(progression) {\r\n        let lessonsOrder = [];\r\n        _.each(progression.lessonItems, (lesson) => {\r\n            lessonsOrder.push({\r\n                id: lesson.id,\r\n                orderIndex: lesson.orderIndex\r\n            });\r\n        });\r\n        return lessonsOrder;\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/services/progression.service.ts","import { angular, ng, model, moment, _, idiom as lang, notify } from 'entcore';\r\nimport { ProgressionService } from \"../../services/progression.service\";\r\n\r\n\r\nexport const ProgressionManagerController = ng.controller('ProgressionManagerController',\r\n    ['$scope', '$timeout', '$rootScope', '$routeParams', ($scope, $timeout, $rootScope, $routeParams) => {\r\n\r\n\r\n        let vm = this;\r\n        function init(){\r\n            vm.loadProgressions();\r\n        }\r\n        $timeout(init);\r\n\r\n        vm.edit = function(){\r\n            vm.originalProgressionItem = angular.copy(vm.selectedProgressionItem);\r\n            vm.selectedProgressionItem.edit=true;\r\n        };\r\n\r\n        vm.resizePanel = function(){\r\n            $timeout(()=>{\r\n                $('[diary-sortable-list]').css('height',($(window).outerHeight() - $('[diary-sortable-list]').offset().top - 50 ) +'px');\r\n            });\r\n        };\r\n\r\n        vm.hasProgressItem = function(){\r\n            return vm.selectedProgressionItem === undefined;\r\n        };\r\n        vm.cancel = function(){\r\n            if (vm.selectedProgressionItem.id){\r\n                vm.selectedProgressionItem.title = vm.originalProgressionItem.title;\r\n                vm.selectedProgressionItem.level = vm.originalProgressionItem.level;\r\n                vm.selectedProgressionItem.description = vm.originalProgressionItem.description;\r\n                vm.originalProgressionItem=null;\r\n                vm.selectedProgressionItem.edit=false;\r\n            }else{\r\n                vm.selectedProgressionItem=undefined;\r\n            }\r\n        };\r\n        vm.setNewProgression = function(){\r\n            vm.selectedProgressionItem = {\r\n                edit : true\r\n            };\r\n        };\r\n\r\n        vm.selectProgression = function(progressionItem){\r\n            $rootScope.redirect('/progressionManagerView/'+progressionItem.id );\r\n            vm.selectedProgressionItem=progressionItem;\r\n            progressionItem.edit=false;\r\n            vm.loadLessonsFromProgression(vm.selectedProgressionItem);\r\n        };\r\n\r\n        vm.addNewLesson = function(){\r\n            $rootScope.redirect('/progressionEditLesson/'+vm.selectedProgressionItem.id+'/new' );\r\n        };\r\n\r\n        vm.editLesson = function(id){\r\n            $rootScope.redirect('/progressionEditLesson/'+vm.selectedProgressionItem.id+'/'+id );\r\n        };\r\n\r\n\r\n\r\n        vm.loadProgressions = function(){\r\n            ProgressionService.getProgressions().then((progressions)=>{\r\n                vm.progressionItems = progressions;\r\n                if ($routeParams.selectedProgressionId !== 'none'){\r\n                    let progressionToLoad = _.findWhere(vm.progressionItems,{id :parseInt($routeParams.selectedProgressionId)});\r\n                    if (progressionToLoad){\r\n                        vm.selectProgression(progressionToLoad);\r\n                    }\r\n                }\r\n            });\r\n        };\r\n\r\n        vm.loadLessonsFromProgression = function(progression){\r\n            progression.lessonItems = null;\r\n            ProgressionService.getLessonsProgression(progression.id).then((lessons) =>{\r\n                progression.lessonItems = lessons;\r\n            });\r\n        };\r\n\r\n        vm.saveLesson = function(lesson){\r\n            ProgressionService.saveLessonProgression(lesson).then((newLesson)=>{\r\n                lesson.id = newLesson.id;\r\n                notify.info(lang.translate('progression.content.saved'));\r\n            });\r\n        };\r\n\r\n        vm.selectedContent = function(){\r\n            return _.filter(vm.selectedProgressionItem.lessonItems,{'selected' : true});\r\n        };\r\n\r\n\r\n        vm.saveProgression = function(progression){\r\n            ProgressionService.saveProgression(progression).then((newProgression)=>{\r\n                if (!progression.id){\r\n                    vm.progressionItems.push(newProgression);\r\n                }else{\r\n                    let oldProgressionItems=_.findWhere(vm.progressionItems,{'id':newProgression.id});\r\n                    if (oldProgressionItems){\r\n                        vm.progressionItems[vm.progressionItems.indexOf(oldProgressionItems)] = newProgression;\r\n                    }\r\n                }\r\n                vm.selectedProgressionItem = newProgression;\r\n                notify.info(lang.translate('progression.progression.saved'));\r\n            });\r\n        };\r\n\r\n        vm.saveOrder = function(progression){\r\n            ProgressionService.saveLessonOrder(progression);\r\n        };\r\n\r\n        vm.removeSelectedContent = function(){\r\n            ProgressionService.deleteLessons(vm.selectedContent()).then(()=>{\r\n                vm.loadLessonsFromProgression(vm.selectedProgressionItem);\r\n                notify.info(lang.translate('progression.content.deleted'));\r\n            });\r\n        };\r\n\r\n        vm.removeProgression = function(){\r\n            ProgressionService.deleteProgression(vm.selectedProgressionItem.id).then(()=>{\r\n                vm.selectedProgressionItem=undefined;\r\n                notify.info(lang.translate('progression.progression.deleted'));\r\n                vm.loadProgressions();\r\n            });\r\n        };\r\n\r\n        vm.editSelectedContent = function(){\r\n            vm.editLesson(vm.selectedContent()[0].id);\r\n        };\r\n    }]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/progression/progression-manager.controller.ts","import { ng } from 'entcore';\r\nimport {ProgressionService} from \"../../services/progression.service\";\r\n\r\nexport const ProgressionRightPanelController = ng.controller('ProgressionRightPanelController',\r\n    ['$scope', '$location', ($scope, $location) => {\r\n\r\n\r\n        let vm = this;\r\n\r\n        init();\r\n\r\n        function init(){\r\n            ProgressionService.getProgressions().then((progressions)=>{\r\n                vm.progressionItems = progressions;\r\n            });\r\n        }\r\n\r\n        vm.selectProgression = function(progression){\r\n            vm.selected='detail' ;\r\n            vm.progressionSelected=progression;\r\n            vm.filterLesson = undefined;\r\n            progression.lessonItems = null;\r\n            ProgressionService.getLessonsProgression(progression.id).then((lessons) =>{\r\n                progression.lessonItems = lessons;\r\n            });\r\n        };\r\n\r\n        $scope.redirect = function (path) {\r\n            $location.path(path);\r\n        };\r\n\r\n        vm.dragCondition = function (item) {\r\n            return true;\r\n        };\r\n\r\n        vm.dropCondition = function (targetItem) {\r\n            return false;\r\n        };\r\n\r\n        vm.drag = function(item, $originalEvent) {\r\n            try {\r\n                $originalEvent.dataTransfer.setData('application/json', JSON.stringify(item));\r\n            } catch (e) {\r\n                $originalEvent.dataTransfer.setData('Text', JSON.stringify(item));\r\n            }\r\n        };\r\n\r\n    }]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/progression/progression-right-panel.controller.ts","import { ng, model, _ } from 'entcore';\r\nimport {VisaService} from \"../../services/visa.service\";\r\n\r\n\r\nexport const HabilitationController = ng.controller('HabilitationController',\r\n    ['$scope', '$timeout', '$rootScope', ($scope, $timeout, $rootScope) => {\r\n\r\n        let vm = this;\r\n\r\n        function init() {\r\n            vm.filter = {};\r\n            vm.getInspector(model.me.structures[0]);\r\n            vm.rended = true;\r\n\r\n            //watch change inspector\r\n            $scope.$watch(() => {\r\n                return vm.filter.inspector;\r\n            }, (n, o) => {\r\n                if (o !== n && n) {\r\n                    vm.getInspectTeachers(vm.structure.id, vm.filter.inspector.key);\r\n                }\r\n            });\r\n\r\n            //watch change teacher\r\n            $scope.$watch(() => {\r\n                return vm.filter.teacher;\r\n            }, (n, o) => {\r\n                if (o !== n && n) {\r\n                    vm.selectTeacher(n.item);\r\n                    vm.filter.teacher=undefined;\r\n                }\r\n            });\r\n        }\r\n        $timeout(init);\r\n\r\n        vm.selectTeacher = function(teacher){\r\n            let existantTeacher = _.findWhere(vm.selectedTeachers,{'key' : teacher.key});\r\n            if (!existantTeacher){\r\n                vm.selectedTeachers.push(teacher);\r\n                vm.save();\r\n            }\r\n        };\r\n\r\n        vm.getInspector = function(structureId) {\r\n            vm.filter.teacher = undefined;\r\n            VisaService.getInspectorList().then((inspectors) => {\r\n                vm.filters = {\r\n                    inspectors: inspectors\r\n                };\r\n            });\r\n        };\r\n        vm.removeTeacher = function (teacher) {\r\n            vm.selectedTeachers = _.filter(vm.selectedTeachers,(t)=>{\r\n                return t.key !== teacher.key;\r\n            });\r\n            vm.save();\r\n        };\r\n        vm.cancel = function() {\r\n            vm.getInspectTeachers(vm.structure.id, vm.filter.inspector.key);\r\n        };\r\n\r\n        vm.getInspectTeachers = function(structureId, inspectorId) {\r\n            vm.filters.teachers = undefined;\r\n            vm.selectedTeachers = undefined;\r\n            vm.filter.teacher = undefined;\r\n\r\n            VisaService.getInspectTeachers(structureId, vm.filter.inspector.key).then((result) => {\r\n                vm.filters.teachers = result.availableTeachers;\r\n                vm.selectedTeachers = result.onInspectorTeachers;\r\n            });\r\n        };\r\n\r\n        vm.save = function() {\r\n            VisaService.applyInspectorRight(vm.structure.id, vm.filter.inspector.key, vm.selectedTeachers).then(() => {\r\n                vm.getInspectTeachers(vm.structure.id, vm.filter.inspector.key);\r\n\r\n            });\r\n        };\r\n\r\n\r\n    }\r\n\r\n    ]);\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/visa/habilitations.controller.ts","import {_, model, moment, $http} from 'entcore';\r\nimport * as FileSaver from 'file-saver';\r\nimport http from 'axios';\r\n\r\n\r\n/*\r\n * Visa service as class\r\n * used to manipulate Visa modelH\r\n */\r\nexport class VisaService {\r\n\r\n    static getFilters(structureId) {\r\n\r\n        let url = `/diary/visa/filters/${structureId}`;\r\n\r\n        return http.get(url).then((result)=>{\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    static getInspectorFilters(structureId,inspectorId) {\r\n        let url = `/diary/visa/filtersinspector/${structureId}/${inspectorId}`;\r\n        return http.get(url).then((result)=>{\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    static getAgregatedVisas(structureId, filter){\r\n        let url = `/diary/visa/agregs`;\r\n        return http({\r\n            url : url,\r\n            method : 'GET',\r\n            params : {\r\n                structureId : structureId,\r\n                teacherId: filter.teacher && filter.teacher.item ? filter.teacher.item.key : undefined,\r\n                audienceId: filter.audience ? filter.audience.key : undefined,\r\n                subjectId: filter.subject ? filter.subject.key : undefined,\r\n                statut : filter.state.key //? (filter.state.key == \"TODO\" ? true : undefined): undefined\r\n            }\r\n        }).then((result)=>{\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    static applyVisa(applyVisa,lock){\r\n        let url = `/diary/visa/apply/${lock}`;\r\n        return http({\r\n            url : url,\r\n            method : 'POST',\r\n            data : applyVisa\r\n        }).then((result)=>{\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    static getLessonForVisa(resultVisaList){\r\n        let url = `/diary/visa/lessons`;\r\n        return http({\r\n            url : url,\r\n            method : 'POST',\r\n            data : resultVisaList\r\n        }).then((result)=>{\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    static getPdfForVisa(resultVisaList){\r\n        let url = `/diary/visa/pdf`;\r\n        http({\r\n            url: url,\r\n            method: \"POST\",\r\n            data: resultVisaList,\r\n            responseType: 'arraybuffer'\r\n        }).then(function (data) {\r\n            var blob = new Blob([data], {type: \" application/pdf\"});\r\n            let date = moment().format(\"YYYY-MM-DD_HH-mm-ss\");\r\n            let fileName = `ent-visa-generation_${date}.pdf`;\r\n            FileSaver.saveAs(blob,fileName);\r\n        });\r\n    }\r\n\r\n    static applyInspectorRight(structureId,inspectorId,teachers){\r\n        let url = `/diary/inspect/right/${structureId}/${inspectorId}`;\r\n        return http({\r\n            url: url,\r\n            method: \"POST\",\r\n            data: teachers,\r\n        });\r\n    }\r\n\r\n    static getInspectTeachers(structureId,inspectorId){\r\n        let url = `/diary/inspect/getTeacher/${structureId}/${inspectorId}`;\r\n        return http({\r\n            url : url,\r\n            method : 'GET'\r\n        }).then((result)=>{\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    static getInspectorList(){\r\n        let url = `/diary/inspect/getInspectors`;\r\n        return http({\r\n            url : url,\r\n            method : 'GET'\r\n        }).then((result)=>{\r\n            return result.data;\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/services/visa.service.ts","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.2\n * 2016-06-16 18:25:19\n *\n * By Eli Grey, http://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n\t\t, is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t// the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n\t\t, arbitrary_revoke_timeout = 1000 * 40 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\t// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name, no_auto_bom) {\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, force = type === force_saveable_type\n\t\t\t\t, object_url\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\tif ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n\t\t\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\t\t\tvar popup = view.open(url, '_blank');\n\t\t\t\t\t\t\tif(!popup) view.location.href = url;\n\t\t\t\t\t\t\turl=undefined; // release reference before dispatching\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (!object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar opened = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (!opened) {\n\t\t\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfs_error();\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name, no_auto_bom) {\n\t\t\treturn new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name, no_auto_bom) {\n\t\t\tname = name || blob.name || \"download\";\n\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function(){};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd !== null)) {\n  define(\"FileSaver.js\", function() {\n    return saveAs;\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/file-saver/FileSaver.js\n// module id = 103\n// module chunks = 0","module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-define.js\n// module id = 104\n// module chunks = 0","module.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 105\n// module chunks = 0","import { ng, angular, model, _, idiom as lang, notify } from 'entcore';\r\nimport {SecureService} from \"../../services/secure.service\";\r\nimport {VisaService} from \"../../services/visa.service\";\r\nimport {CONSTANTS} from \"../../tools\";\r\n\r\n\r\nexport const VisaManagerController = ng.controller('VisaManagerController',\r\n    ['$scope', '$timeout', '$rootScope', ($scope, $timeout, $rootScope) => {\r\n\r\n            let vm = this;\r\n\r\n            vm.items = [{name : 'teacher1'},{name : 'teacher2'}];\r\n            init();\r\n            function init(){\r\n                var getFilterPromise;\r\n                if (SecureService.hasRight(CONSTANTS.RIGHTS.VISA_ADMIN)){\r\n                    getFilterPromise = VisaService.getFilters(model.me.structures[0]);\r\n                }else if (SecureService.hasRight(CONSTANTS.RIGHTS.VISA_INSPECTOR)){\r\n                    getFilterPromise= VisaService.getInspectorFilters(model.me.structures[0],model.me.userId);\r\n                }\r\n\r\n                getFilterPromise.then((filters)=>{\r\n                    vm.filters = filters;\r\n                    vm.filters.states = [\r\n                        { key : 'TODO_ONLY', value :lang.translate('diary.visa.state.todo')},\r\n                        { key :'ALL' , value :lang.translate('diary.visa.state.all')},\r\n                        { key :'DID_ONLY' , value :lang.translate('diary.visa.state.did')}\r\n                    ];\r\n                    vm.filter = {\r\n                        state : vm.filters.states[0]\r\n                    };\r\n                });\r\n\r\n            }\r\n\r\n            vm.listLessonHeight = function(){\r\n                vm.lessonHeight = ($('.popup-visa-lesson-list .content').innerHeight() -\r\n                     $('.popup-visa-lesson-list .forheigth > h1').outerHeight() -\r\n                    $($('.popup-visa-lesson-list .forheigth > div')[0]).outerHeight() -\r\n                    50 ) + 'px';\r\n                setTimeout(()=>{\r\n                    vm.listLessonHeight();\r\n                    $scope.$apply();\r\n                },500);\r\n            };\r\n\r\n            vm.searchAvailable = function(){\r\n              return vm.filter && (vm.filter.teacher || vm.filter.subject || vm.filter.audience);\r\n            };\r\n            vm.search = function(){\r\n                VisaService.getAgregatedVisas(model.me.structures[0],vm.filter).then((result)=>{\r\n                    vm.agregatedVisa = result;\r\n                });\r\n            };\r\n\r\n            vm.selectedContent = function(){\r\n                if (!vm.agregatedVisa){\r\n                    return [];\r\n                }\r\n                return vm.agregatedVisa.filter((e)=>{\r\n                    return e.selected;\r\n                });\r\n            };\r\n\r\n            vm.calcRecapSelected = function(){\r\n                vm.recap = {\r\n                    nbLesson : vm.getNbLesson(vm.currentAgregVisas),\r\n                    nbTeacher : vm.getNbProps(vm.currentAgregVisas,\"teacherId\"),\r\n                    nbSubject : vm.getNbProps(vm.currentAgregVisas,\"subjectId\"),\r\n                    nbAudience : vm.getNbProps(vm.currentAgregVisas,\"audienceId\")\r\n                };\r\n            };\r\n\r\n            vm.getNbLesson = function(agregVisas){\r\n                return agregVisas.reduce((acc,e) =>{\r\n                    return acc +\r\n                      e.nbNotVised + (e.visas[0] ? e.visas[0].nbDirty : 0);\r\n                },0);\r\n            };\r\n\r\n            vm.getNbProps = function(agregVisas,props){\r\n                let map = {};\r\n                agregVisas.map((e)=>{\r\n                    map[e[props]] = true;\r\n                });\r\n                return Object.keys(map).length;\r\n            };\r\n\r\n            vm.createLightVisas = function(agregVisas){\r\n                return _.map(agregVisas,(e)=>{\r\n                  let result = angular.copy(e);\r\n                  delete result.visas;\r\n                  return result;\r\n              });\r\n          };\r\n\r\n            vm.applyVisa = function(withLock){\r\n                applyVisa(vm.currentAgregVisas,withLock);\r\n            };\r\n\r\n\r\n            function applyVisa(agregVisas,lock){\r\n                let applyVisa = {\r\n                    comment : vm.comment,\r\n                    resultVisaList: vm.createLightVisas(agregVisas),\r\n                    ownerId : model.me.userId,\r\n                    ownerName : model.me.username,\r\n                    ownerType : SecureService.hasRight(CONSTANTS.RIGHTS.VISA_ADMIN) ? 'director' : 'inspector'\r\n                };\r\n                VisaService.applyVisa(applyVisa,lock).then(()=>{\r\n                    vm.closeAllPopup();\r\n                    vm.search();\r\n                    //notify.info(lang.translate('progression.progression.saved'));\r\n                    notify.info(lang.translate(\"diary.visa.notify.saved\"));\r\n                });\r\n            }\r\n\r\n            vm.closeAllPopup = function(){\r\n                $rootScope.$broadcast('closeallpop');\r\n            };\r\n\r\n            vm.showDetailVisa = function(agregVisa){\r\n                vm.currentAgregVisas = [agregVisa];\r\n                VisaService.getLessonForVisa(vm.currentAgregVisas).then((lessons) =>{\r\n                  vm.selectedLessons = lessons;\r\n                });\r\n            };\r\n            vm.initSelectContent = function(){\r\n                vm.currentAgregVisas = vm.selectedContent();\r\n            };\r\n\r\n            vm.showSelected = function(){\r\n                vm.currentAgregVisas = vm.selectedContent();\r\n                VisaService.getLessonForVisa(vm.createLightVisas(vm.currentAgregVisas)).then((lessons) =>{\r\n                  vm.selectedLessons = lessons;\r\n                });\r\n            };\r\n\r\n            vm.checkAll = function(checkAll){\r\n                vm.agregatedVisa.map((e)=>{\r\n                    if ((e.nbNotVised + (e.visas[0] ? e.visas[0].nbDirty : 0))  > 0){\r\n                        e.selected = checkAll;\r\n                    }\r\n                });\r\n            };\r\n\r\n            vm.closepopup = function(){\r\n              $rootScope.$broadcast('closeallpop');\r\n            };\r\n\r\n            vm.pdf = function(){\r\n                VisaService.getPdfForVisa(vm.createLightVisas(vm.currentAgregVisas));\r\n            };\r\n\r\n        }\r\n\r\n    ]);\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/visa/visa.controller.ts","import { model, ng } from 'entcore';\r\nimport {HistoryService} from \"../services/history.service\";\r\n\r\nexport const HistoryController = ng.controller('HistoryController',\r\n    ['$scope', ($scope) => {\r\n        let vm = this;\r\n        init();\r\n        function init(){\r\n            HistoryService.getFilters(model.me.structures[0]).then((histories)=>{\r\n                vm.yearHistories = histories;\r\n            });\r\n        }\r\n\r\n        vm.loadpdf = function(key,value){\r\n            let teacherId,audienceId;\r\n            if (vm.toogle==='teacher'){\r\n                teacherId=key;\r\n            }else{\r\n                audienceId=key;\r\n                if (model.isUserTeacher()){\r\n                    teacherId = model.me.userId;\r\n                }\r\n            }\r\n\r\n            HistoryService.getPdfArchive(vm.selectedYearItem.yearLabel,vm.toogle,teacherId,audienceId,value);\r\n        };\r\n\r\n    }]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/controllers/history.controller.ts","import {moment, model, $http, _} from 'entcore';\r\n\r\nimport * as FileSaver from 'file-saver';\r\n/*\r\n * History service as class\r\n * used to manipulate History model\r\n */\r\nexport class HistoryService {\r\n\r\n    static getFilters(structureId){\r\n        let url = `/diary/history/filters`;\r\n\r\n        return $http({\r\n            method : 'GET',\r\n            url : url,\r\n            params : {\r\n                structureId:structureId\r\n            }\r\n        }).then((result)=>{\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    static getPdfArchive(yearLabel,type,teacherId,audienceId,value){\r\n        let url = `/diary/history/pdf`;\r\n\r\n        let params:any = {\r\n            yearLabel : yearLabel\r\n        };\r\n\r\n\r\n        params.teacherId = teacherId;\r\n        params.audienceId = audienceId;\r\n\r\n\r\n        $http({\r\n            url: url,\r\n            method: \"GET\",\r\n            params: params,\r\n            responseType: 'arraybuffer'\r\n        }).success(function (data, status, headers, config) {\r\n            var blob = new Blob([data], {type: \" application/pdf\"});\r\n            let date = moment().format(\"YYYY-MM-DD_HH-mm-ss\");\r\n            let fileName = `CDT-archive_${value}_${yearLabel}.pdf`;\r\n            FileSaver.saveAs(blob,fileName);\r\n        }).error(function (data, status, headers, config) {\r\n            //upload failed\r\n        });\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/services/history.service.ts","export * from './calendar-daily-events.directive';\nexport * from './confirm.directive';\nexport * from './diary-drop-down.directive';\nexport * from './ent-drop-down.directive';\nexport * from './item-calendar.directive';\nexport * from './multi-calendar-filter.directive';\nexport * from './on-finish-render.directive';\nexport * from './right-panel.directive';\nexport * from './search-drop-down.directive';\nexport * from './secure.directive';\nexport * from './structure-selector.directive';\nexport * from './subject-picker.directive';\nexport * from './quick-search/diary-timeslot-item.directive';\nexport * from './quick-search/quick-search.directive';\nexport * from './quick-search/quick-search-item.directive';\nexport * from './attachment/attachment.directive';\nexport * from './attachment/attachmentsx.directive';/*\nexport * from './common/calendar/calendar.directive';\nexport * from './common/calendar/schedule-item.directive';\nexport * from './common/sortable-list/diary-sortable-list.directive';\nexport * from './common/tooltip.directive';*/\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/index.ts","import { angular, ng, model } from 'entcore';\r\n\r\n\r\nexport const calendarDailyEvents = ng.directive('calendarDailyEvents', function () {\r\n    return {\r\n        scope: {\r\n            ngModel: '=',\r\n            bShowCalendar : '=',\r\n            bShowHomeworks : '=',\r\n            bShowHomeworksMinified : '='\r\n        },\r\n        restrict: 'E',\r\n        templateUrl: '/diary/public/template/directives/calendar-daily-events/calendar-daily-events.template.html',\r\n        controller: 'CalendarDailyEventsController',\r\n\r\n        link: function(scope, element, attributes) {\r\n\r\n            $('body').on('click', function(e) {\r\n                if (e.target !== element[0] && element.find(e.target).length === 0) {\r\n                    model.calendar.days.forEach(function(day) {\r\n                        day.openDailyEvents = false;\r\n                    });\r\n                    scope.$apply();\r\n                }\r\n            });\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/calendar-daily-events.directive.ts","import {ng} from 'entcore';\r\nvar zIndex = 100000;\r\nexport const confirmPopup = ng.directive('confirmPopup', function ($compile) {\r\n    return {\r\n        restrict : 'A',\r\n        /*controller : function($scope){\r\n          setTimeout(()=>{\r\n            $scope.apply\r\n          });\r\n        },*/\r\n        link: function (scope, element, attr) {\r\n            zIndex++;\r\n            var clickAction = attr.confirmedClick;\r\n            var html =  `\r\n                     <lightbox show=\"display\" class=\"${scope.confirmClass}\" on-close=\"remove()\" style=\"z-index : ${zIndex}\" >\r\n                       <div class=\"row\" ng-if=\"!confirmTemplate\">\r\n                          <h2> [[msg]] </h2>\r\n                           <div class=\"row\">\r\n                               <button class=\"right-magnet \" ng-click=\"confirm()\">[[yes]]</button>\r\n                               <input type=\"button\" class=\"right-magnet cancel\" i18n-value=\"[[cancel]]\" ng-click=\"remove()\"  />\r\n                           </div>\r\n                       </div>\r\n                       <div class=\"row\" ng-if=\"confirmTemplate\">\r\n                          <div ng-include=\"confirmTemplate\">\r\n                          </div>\r\n                       </div>\r\n                     </lightbox>\r\n                     `;\r\n            var lightbox;\r\n            element.bind('click',function (event) {\r\n                scope.msg = attr.confirmClick || \"Etes vous sur?\";\r\n                scope.yes = attr.confirmYes || \"Ok\";\r\n                scope.confirmClass = attr.confirmClass || \"\";\r\n                scope.confirmTemplate = attr.confirmTemplate ;\r\n                scope.cancel = attr.confirmCancel || \"Annuler\";\r\n                scope.display = true;\r\n\r\n                lightbox = $compile(html)(scope);\r\n                $('body').append(lightbox);\r\n\r\n                lightbox.addClass(scope.confirmClass);\r\n                scope.$apply();\r\n            });\r\n            scope.$on('closeallpop',()=>{\r\n                scope.remove();\r\n            });\r\n            scope.remove = function(){\r\n                scope.display = false;\r\n                if (lightbox){\r\n                    lightbox.remove();\r\n                }\r\n            };\r\n            scope.confirm = function(){\r\n                scope.$eval(clickAction);\r\n                scope.remove();\r\n            };\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/confirm.directive.ts","import {ng} from 'entcore';\r\n\r\nexport const diaryDropDown = ng.directive('diaryDropDown', function () {\r\n    return {                restrict: \"E\",\r\n        templateUrl: \"diary/public/template/directives/diary-drop-down/diary-drop-down.template.html\",\r\n        scope: {\r\n            placeholder: \"@\",\r\n            list: \"=\",\r\n            selected: \"=\",\r\n            property: \"@\",\r\n            nullable:\"=\"\r\n        },\r\n        controller: function($scope) {\r\n            $scope.selectItem = function(item) {\r\n                if ($scope.list) {\r\n                    $scope.list.map((e) => {\r\n                        e.selected = false;\r\n                    });\r\n                    if (item){\r\n                        item.selected = true;\r\n                    }\r\n                    $scope.selected = item;\r\n                    $scope.listVisible = false;\r\n                }\r\n            };\r\n        },\r\n        link: function(scope, element, attr) {\r\n\r\n            $(document).bind('click', function(event) {\r\n                var isClickedElementChildOfPopup = element\r\n                    .find(event.target)\r\n                    .length > 0;\r\n\r\n                if (isClickedElementChildOfPopup)\r\n                    return;\r\n\r\n                scope.$apply(function() {\r\n                    scope.listVisible = false;\r\n                });\r\n            });\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/diary-drop-down.directive.ts","import { angular, ng, model, idiom as lang, _} from 'entcore';\r\nimport http from 'axios';\r\n\r\n\r\nexport const entDropdown = ng.directive('entDropdown', function () {\r\n    return {\r\n        restrict: \"E\",\r\n        templateUrl: \"diary/public/template/ent-dropdown.html\",\r\n        scope: {\r\n            placeholder: \"@\",\r\n            list: \"=\",\r\n            selected: \"=\",\r\n            property: \"@\",\r\n            school: \"=\",\r\n            refreshFunc: \"&\",\r\n            loadPreviousFunc: \"&\",\r\n            lesson: \"=\",\r\n            homework: \"=\"\r\n        },\r\n        link: function(scope, element, attrs) {\r\n            scope.listVisible = false;\r\n            scope.isPlaceholder = true;\r\n            scope.searchPerformed = false;\r\n            scope.otherAudiences = [];\r\n            scope.translated_placeholder = lang.translate(scope.placeholder);\r\n\r\n            scope.select = function(audience) {\r\n                scope.isPlaceholder = false;\r\n                scope.selected = audience;\r\n                scope.listVisible = false;\r\n            };\r\n\r\n            scope.isSelected = function(audience) {\r\n                return scope.selected !== undefined && scope.selected != null && audience[scope.property] === scope.selected[scope.property];\r\n            };\r\n\r\n            scope.show = function() {\r\n                scope.listVisible = true;\r\n            };\r\n\r\n            scope.searchAudiences = function (cbe?) {\r\n                http.get('diary/classes/list/' + scope.school)\r\n                    .then(function (res) {\r\n                        let structureData = res.data;\r\n                        scope.otherAudiences = _.map(structureData, function (data) {\r\n                            let audience:any = {};\r\n                            audience.structureId = scope.school;\r\n                            audience.type = 'class';\r\n                            audience.typeLabel = (data.className === 'class') ? lang.translate('diary.audience.class') :  lang.translate('diary.audience.group');\r\n                            audience.id= data.classId;\r\n                            audience.name = data.className;\r\n                            return audience;\r\n                        });\r\n\r\n                        scope.otherAudiences = _.reject(scope.otherAudiences, function(audience) {\r\n                            return _.contains(_.pluck(scope.list, 'name') , audience.name);\r\n                        });\r\n\r\n                        scope.searchPerformed = true;\r\n                        scope.listVisible = true;\r\n                        scope.$apply();\r\n                    }).catch(function (error) {\r\n                    if (typeof cbe === 'function') {\r\n                        cbe(model.parseError(error));\r\n                    }\r\n                })\r\n\r\n            };\r\n\r\n            scope.$watch(\"selected\", function(value) {\r\n                scope.isPlaceholder = true;\r\n                if (scope.selected !== null && scope.selected !== undefined) {\r\n                    scope.isPlaceholder = scope.selected[scope.property] === undefined;\r\n                    scope.display = scope.selected[scope.property];\r\n\r\n                    if (scope.lesson && scope.lesson.audience && scope.lesson.audience.id && scope.lesson.endTime) {\r\n                        if (scope.lesson.homeworks.all.length > 0) {\r\n                            scope.$parent.refreshHomeworkLoads(scope.lesson);\r\n                        }\r\n\r\n                        scope.lesson.previousLessonsLoaded = false;\r\n                        //scope.$parent.loadPreviousLessonsFromLesson(scope.lesson);\r\n                    }\r\n\r\n                    if (scope.homework && scope.homework.audience) {\r\n                        scope.$parent.showHomeworksLoad(scope.homework, null, null);\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n            function handler(event) {\r\n                var isClickedElementChildOfPopup = element\r\n                    .find(event.target)\r\n                    .length > 0;\r\n\r\n                if (isClickedElementChildOfPopup)\r\n                    return;\r\n\r\n                scope.$apply(function() {\r\n                    scope.listVisible = false;\r\n                });\r\n            }\r\n            $(document).bind('click',handler );\r\n\r\n            //free on detraoy element & handlers\r\n            scope.$on(\"$destroy\", function() {\r\n                $(document).unbind('click',handler );\r\n            });\r\n\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/ent-drop-down.directive.ts","import {ng} from 'entcore';\r\nexport const itemCalendar = ng.directive('itemCalendar', function () {\r\n    return {\r\n        restrict : 'E',\r\n        templateUrl : '/diary/public/template/directives/item-calendar/item-calendar.template.html'\r\n    };\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/item-calendar.directive.ts","import { ng, module, model } from 'entcore';\r\nimport {VisaService} from \"../services/visa.service\";\r\nimport {SecureService} from \"../services/secure.service\";\r\nimport {CONSTANTS} from \"../tools\";\r\n\r\nexport const diaryMultiCalendarFilter = ng.directive('diaryMultiCalendarFilter', function () {\r\n    return {\r\n        restrict: \"E\",\r\n        templateUrl: \"/diary/public/template/directives/diary-multi-calendar-filter/diary-multi-calendar-filter.template.html\",\r\n        scope: {\r\n            structure: '=',\r\n            audience: '=',\r\n            teacher: '='\r\n        },\r\n        controller: function ($scope) {\r\n            let promiseFilter;\r\n            $scope.RIGHTS = CONSTANTS.RIGHTS;\r\n            $scope.filters = {};\r\n\r\n            $scope.getFilters = function (structureId) {\r\n                if (!promiseFilter) {\r\n                    if (SecureService.hasRight(CONSTANTS.RIGHTS.VISA_ADMIN)) {\r\n                        promiseFilter = VisaService.getFilters(structureId);\r\n                    } else if (SecureService.hasRight(CONSTANTS.RIGHTS.VISA_INSPECTOR)) {\r\n                        promiseFilter = VisaService.getInspectorFilters(structureId, model.me.userId);\r\n                    }\r\n                }\r\n                if (promiseFilter) {\r\n                    promiseFilter.then((filters) => {\r\n                        $scope.filters = filters;\r\n                    });\r\n                }\r\n            };\r\n\r\n            init();\r\n\r\n            function init() {\r\n                $scope.$watch(\"audience\", (n, o) => {\r\n                    if (n) {\r\n                        $scope.teacher = undefined;\r\n                    }\r\n                });\r\n                $scope.$watch(\"teacher\", (n, o) => {\r\n                    if (n) {\r\n                        $scope.audience = undefined;\r\n                    }\r\n                });\r\n                $scope.$watch(\"structure\", (n, o) => {\r\n                    if (n !== o && n) {\r\n                        $scope.getFilters(n.id);\r\n                    }\r\n                });\r\n                if ($scope.structure) {\r\n                    $scope.getFilters($scope.structure.id);\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/multi-calendar-filter.directive.ts","import {ng} from 'entcore';\r\n\r\nexport const onFinishRender = ng.directive('onFinishRender', function ($timeout) {\r\n\r\n    return {\r\n        restrict: 'A',\r\n        link: function(scope, element, attr) {\r\n            if (scope.$last === true) {\r\n                $timeout(function() {\r\n                    scope.$evalAsync(attr.onFinishRender);\r\n                });\r\n            }\r\n        }\r\n    };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/on-finish-render.directive.ts","import {ng} from 'entcore';\r\n\r\nexport const rightPanel = ng.directive('rightPanel', function () {\r\n    return {\r\n        restrict: \"E\",\r\n        templateUrl: \"/diary/public/template/progression/right-panel/right-panel.html\",\r\n        scope: {\r\n            label : '@',\r\n            contentUrl : '='\r\n        },\r\n        controller : function ($scope, $rootScope) {\r\n            $rootScope.currentRightPanelVisible = undefined;\r\n            let id = Date.now();\r\n            var vm = this;\r\n            $scope.panelVisible = false;\r\n\r\n            // $('.mainDiaryContainer').width('84%');\r\n            //$('.quick-search').width('16%');\r\n            $scope.$watch(() => {\r\n                return $rootScope.currentRightPanelVisible;\r\n            }, (n) => {\r\n                $scope.currentRightPanelVisible = n;\r\n            });\r\n\r\n            $scope.toggle = function (show) {\r\n                if (show) {\r\n                    $rootScope.currentRightPanelVisible = show;\r\n                } else {\r\n                    $rootScope.currentRightPanelVisible = undefined;\r\n                }\r\n            }\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/right-panel.directive.ts","import {ng, angular} from 'entcore';\r\n\r\nexport const searchDropDown = ng.directive('searchDropDown', function () {\r\n    return {\r\n        restrict: \"E\",\r\n        templateUrl: \"/diary/public/template/directives/search-drop-down/search-drop-down.template.html\",\r\n        scope: {\r\n            items: '=',\r\n            showExpression : '@',\r\n            selectedItem: '=',\r\n            placeHolder : '@',\r\n            freeField : '='\r\n        },\r\n        controller: function ($scope, $sce, $timeout) {\r\n\r\n            $scope.showDropDown = false;\r\n            if (!$scope.showExpression) {\r\n                $scope.showExpression = 'item';\r\n            }\r\n\r\n            $scope.$watch('items', init);\r\n            $scope.$watch('searchFilter', init);\r\n\r\n            function init() {\r\n                if (!$scope.items) {\r\n                    return;\r\n                }\r\n                $scope.itemsToShow = $scope.items.map((item) => {\r\n                    let result = \"\";\r\n                    let value = eval($scope.showExpression);\r\n                    let hightlightedText = highlight(value, $scope.searchFilter);\r\n                    return {\r\n                        text: value,\r\n                        hightlightedText: hightlightedText,\r\n                        item: item\r\n                    };\r\n                });\r\n\r\n                $scope.itemsToShow = $scope.itemsToShow.filter((e) => {\r\n                    if (!e.text || !$scope.searchFilter) {\r\n                        return true;\r\n                    }\r\n                    return e.text.toLowerCase().indexOf($scope.searchFilter.toLowerCase()) > -1;\r\n                });\r\n            }\r\n\r\n            function highlight(text, phrase) {\r\n                if (phrase) text = text.replace(new RegExp('(' + phrase + ')', 'gi'), '<span class=\"highlighted\">$1</span>');\r\n                return text;\r\n            }\r\n\r\n            $scope.eraseSelected = function ($event) {\r\n                $scope.selectedItem = undefined;\r\n                angular.element($event.target).parent().parent().find('input')[0].focus();\r\n            };\r\n            $scope.selectItem = function (option) {\r\n                $scope.searchFilter = undefined;\r\n                $scope.selectedItem = option;\r\n                $scope.showDropDown = false;\r\n            };\r\n            $scope.blur = function () {\r\n                $timeout(() => {\r\n                    $scope.showDropDown = false;\r\n                    $scope.searchFilter = undefined;\r\n                });\r\n            };\r\n            $scope.enter = function (keyEvent) {\r\n\r\n                if (keyEvent.which === 13) {\r\n                    if (!$scope.searchFilter) {\r\n                        return;\r\n                    }\r\n                    let item = $scope.itemsToShow.find((e) => {\r\n                        return e.text.toLowerCase() === $scope.searchFilter.toLowerCase();\r\n                    });\r\n                    if (item) {\r\n                        $scope.selectItem(item);\r\n                    }\r\n                }\r\n            };\r\n            $scope.change = function () {\r\n                $scope.showDropDown = $scope.searchFilter.length > 0;\r\n                $scope.selectedItem = undefined;\r\n            };\r\n        }\r\n    };\r\n});\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/search-drop-down.directive.ts","import {ng} from 'entcore';\r\nimport {SecureService} from \"../services/secure.service\";\r\n\r\nexport const secure = ng.directive('secure', function () {\r\n    return {\r\n        restrict: \"A\",\r\n        link: function (scope, elem, attrs) {\r\n            if (!SecureService.hasRight(attrs.secure)) {\r\n                elem[0].remove();\r\n            }\r\n        },\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/secure.directive.ts","import { angular, ng, model } from 'entcore';\r\n\r\n\r\nexport const structureDropDown = ng.directive('structureDropDown', function () {\r\n    return {\r\n        restrict: \"E\",\r\n        template : `\r\n                <diary-drop-down\r\n                    ng-if=\"!(hideIfSolo && structureList.length === 1)\"\r\n                    placeholder=\"select.structure\"\r\n                    list=\"structureList\"\r\n                    selected=\"structure\"\r\n                    nullable=\"false\"\r\n                    property=\"name\">\r\n                </diary-drop-down>\r\n                `,\r\n        scope: {\r\n            structure : \"=\",\r\n            hideIfSolo : \"=\",\r\n            isHidden : \"=\"\r\n        },\r\n        controller: function($scope) {\r\n            $scope.structureList = [];\r\n            let i=0;\r\n            model.me.structures.forEach((structure)=>{\r\n                $scope.structureList.push({\r\n                    id : structure,\r\n                    name : model.me.structureNames[i++],\r\n                });\r\n            });\r\n            if (!$scope.structure){\r\n                $scope.structure = $scope.structureList[0];\r\n            }\r\n            $scope.isHidden = ($scope.hideIfSolo && $scope.structureList.length === 1);\r\n        },\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/structure-selector.directive.ts","import { angular, ng, model, _} from 'entcore';\r\nimport {sansAccent} from '../tools';\r\nimport { Subject } from '../models/Subject.model';\r\n\r\nexport const subjectPicker = ng.directive('subjectPicker', function () {\r\n    return {\r\n        scope: {\r\n            ngModel: '=',\r\n            ngChange: '&',\r\n            lesson: \"=\",\r\n            homework: \"=\"\r\n        },\r\n        transclude: true,\r\n        replace: true,\r\n        restrict: 'E',\r\n        templateUrl: 'diary/public/template/subject-picker.html',\r\n        link: function(scope, element) {\r\n            var sortBySubjectLabel = function(a, b) {\r\n                if (a.label > b.label)\r\n                    return 1;\r\n                if (a.label < b.label)\r\n                    return -1;\r\n                return 0;\r\n            };\r\n\r\n            scope.search = null;\r\n            scope.displaySearch = false;\r\n\r\n            // init suggested subjects with all subjects\r\n            scope.suggestedSubjects = [];\r\n\r\n            // custom subject collection\r\n            // containing base subject collection + current ones being created by used\r\n            var subjects = [];\r\n\r\n            /*model.subjects.all.forEach(function(subject) {\r\n                subjects.push(subject);\r\n            });\r\n\r\n            subjects.sort(sortBySubjectLabel);\r\n            */\r\n\r\n            var setNewSubject = function(subjectLabel) {\r\n\r\n                if (!subjectLabel) {\r\n                    return;\r\n                }\r\n\r\n                subjectLabel = subjectLabel.trim();\r\n\r\n                var existingSubject = null;\r\n\r\n                for (var i = 0; i < subjects.length; i++) {\r\n                    if (sansAccent(subjects[i].label).toUpperCase() === sansAccent(subjectLabel).toUpperCase()) {\r\n                        existingSubject = subjects[i];\r\n                    }\r\n                }\r\n\r\n                if (!existingSubject) {\r\n                    scope.ngModel = new Subject();\r\n                    scope.ngModel.label = subjectLabel;\r\n                    scope.ngModel.id = null;\r\n\r\n                    if (scope.lesson && scope.lesson.audience){\r\n                        scope.ngModel.school_id = scope.lesson.audience.structureId;\r\n                    }else if (scope.homework && scope.homework.audience){\r\n                        scope.ngModel.school_id = scope.homework.audience.structureId ;\r\n                    }\r\n                    if (!scope.ngModel.school_id){\r\n                        scope.ngModel.school_id = model.me.structures[0];\r\n                    }\r\n                    //scope.ngModel.school_id = scope.lesson ? scope.lesson.audience.structureId : scope.homework && scope.homework.audience ?scope.homework.audience.structureId : undefined;\r\n                    scope.ngModel.teacher_id = model.me.userId;\r\n                    subjects.push(scope.ngModel);\r\n                } else {\r\n                    scope.ngModel = existingSubject;\r\n                }\r\n            };\r\n            scope.$watch('lesson.audience.structureId', function() {\r\n                if (scope.ngModel && scope.lesson && scope.lesson.audience && scope.lesson.audience.structureId) {\r\n                    scope.ngModel.school_id = scope.lesson ? scope.lesson.audience.structureId : scope.homework.audience.structureId;\r\n                }\r\n            });\r\n            var initSuggestedSubjects = function() {\r\n                scope.suggestedSubjects = [];\r\n\r\n                subjects = [];\r\n\r\n                model.subjects.all.forEach(function(subject) {\r\n                    subjects.push(subject);\r\n                });\r\n\r\n                subjects.sort(sortBySubjectLabel);\r\n\r\n                for (var i = 0; i < subjects.length; i++) {\r\n                    scope.suggestedSubjects.push(subjects[i]);\r\n                }\r\n            };\r\n\r\n\r\n            scope.$watch(()=>{\r\n                return model.subjects ? model.subjects.length() : undefined;\r\n            },()=>{\r\n                initSuggestedSubjects();\r\n            });\r\n            scope.goToSearchMode = function() {\r\n                scope.displaySearch = true;\r\n                scope.search = '';\r\n                initSuggestedSubjects();\r\n            };\r\n\r\n            scope.isSelected = function(subject) {\r\n\r\n                if (scope.ngModel && subject) {\r\n                    if (scope.ngModel.id) {\r\n                        return scope.ngModel.id === subject.id;\r\n                    }\r\n                    // subject may not have id if it's new one\r\n                    else {\r\n                        return sansAccent(scope.ngModel.label) === sansAccent(subject.label);\r\n                    }\r\n                } else {\r\n                    return false;\r\n                }\r\n            };\r\n\r\n            /**\r\n             * Search subject from input by user\r\n             */\r\n            scope.searchSubject = function(event) {\r\n\r\n                if (event.type === 'keydown' && event.keyCode === 9) {\r\n                    scope.displaySearch = false;\r\n\r\n                    if (scope.search != '') {\r\n                        setNewSubject(scope.search);\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                scope.search = scope.search.trim();\r\n\r\n                if (scope.search != '') {\r\n                    var matchingSubjects = model.findSubjectsByLabel(scope.search);\r\n                    scope.suggestedSubjects = new Array();\r\n\r\n                    for (var i = 0; i < matchingSubjects.length; i++) {\r\n                        scope.suggestedSubjects.push(matchingSubjects[i]);\r\n                    }\r\n\r\n                } else {\r\n                    initSuggestedSubjects();\r\n                }\r\n            };\r\n\r\n            scope.selectSubject = function(subject) {\r\n                scope.ngModel = subject;\r\n                scope.displaySearch = false;\r\n                if (scope.lesson) {\r\n                    scope.lesson.previousLessonsLoaded = false;\r\n                }\r\n            };\r\n\r\n            $(element.context.ownerDocument).click(function(event) {\r\n                if (!$(event.target).is(\"item-suggest\") && !$(event.target).is(\"#remove-subject\") && !$(event.target).is(\"#input-subject\")) {\r\n                    scope.displaySearch = false;\r\n\r\n                    // new subject that will need to be created on lesson/homework save\r\n                    if (scope.suggestedSubjects.length === 0) {\r\n                        setNewSubject(scope.search);\r\n                    }\r\n                    scope.$apply();\r\n                }\r\n            });\r\n\r\n\r\n            // function handler(event) {\r\n            //         var isClickedElementChildOfPopup = element\r\n            //                 .find(event.target)\r\n            //                 .length > 0;\r\n            //\r\n            //         if (isClickedElementChildOfPopup)\r\n            //                 return;\r\n            //\r\n            //         scope.$apply(function() {\r\n            //             scope.displaySearch = false;\r\n            //             if (scope.suggestedSubjects.length === 0) {\r\n            //                 setNewSubject(scope.search);\r\n            //             }\r\n            //         });\r\n            // }\r\n            // $(document).bind('click',handler );\r\n            //\r\n            // //free on detraoy element & handlers\r\n            // scope.$on(\"$destroy\", function() {\r\n            //         $(document).unbind('click',handler );\r\n            // });\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/subject-picker.directive.ts","import { angular, ng, model, moment, _, Collection } from 'entcore';\r\n\r\nimport { Homework } from '../../models/Homework.model';\r\nimport { Lesson } from '../../models/Lesson.model';\r\nimport {AudienceService} from \"../../services/audiences.service\";\r\n\r\n\r\nexport const diaryTimeslotItem = ng.directive('diaryTimeslotItem', function ($rootScope) {\r\n\r\n    return {\r\n        restrict: \"A\",\r\n        scope: false,\r\n        link: function(scope, element) {\r\n\r\n            var timeslot = element;\r\n\r\n            let dragCounter = 0;\r\n\r\n            timeslot.on('dragover', function($event) {\r\n                $event.preventDefault();\r\n            });\r\n\r\n            timeslot.bind('dragenter', onenter);\r\n            function onenter(event) {\r\n\r\n                dragCounter ++;\r\n                timeslot.addClass(\"dragin\");\r\n                //event.preventDefault();\r\n                return false;\r\n            }\r\n\r\n\r\n            timeslot.bind('dragleave',onleave);\r\n            function onleave (event) {\r\n\r\n                dragCounter--;\r\n                if(dragCounter === 0){\r\n                    timeslot.removeClass(\"dragin\");\r\n                }\r\n            }\r\n\r\n            function extractBeginEnd(){\r\n                var begin = moment().startOf('year').add(scope.day.index - 1,'d');\r\n                var end = moment(begin);\r\n                begin = begin.add(scope.timeslot.start,'h');\r\n                end = end.add(scope.timeslot.end,'h');\r\n                return {\r\n                    startDate : begin,\r\n                    endDate : end\r\n                };\r\n            }\r\n\r\n            timeslot.on('drop', function($event) {\r\n                timeslot.removeClass(\"dragin\");\r\n                let scheduleItem = scope.$parent.item;\r\n\r\n                $event.preventDefault();\r\n\r\n                timeslot.css('background-color', '');\r\n\r\n                // duplicate dragged lesson\r\n                var pedagogicItemOfTheDay = JSON.parse($event.originalEvent.dataTransfer.getData(\"application/json\"));\r\n\r\n\r\n                if (pedagogicItemOfTheDay.type_item !== 'lesson' && pedagogicItemOfTheDay.type_item !== 'progression' && pedagogicItemOfTheDay.type_item !== 'homework') {\r\n                    return;\r\n                }\r\n\r\n\r\n                if (pedagogicItemOfTheDay.type_item === 'homework'){\r\n                    initHomeworkFromCalendar(pedagogicItemOfTheDay);\r\n                    return;\r\n                }\r\n\r\n                var newLesson = new Lesson();\r\n                newLesson.id = pedagogicItemOfTheDay.id;\r\n\r\n                // do not drop if item type is not a lesson\r\n                if (pedagogicItemOfTheDay.type_item === 'progression') {\r\n                    initLessonFromProgression(newLesson,pedagogicItemOfTheDay);\r\n                    return;\r\n                }\r\n\r\n                // do not drop if item type is not a lesson\r\n                if (pedagogicItemOfTheDay.type_item === 'lesson') {\r\n                    initLessonFromPreviousLesson(newLesson,scheduleItem);\r\n                    return;\r\n                }\r\n\r\n            });\r\n\r\n            function initLessonFromPreviousLesson(newLesson,scheduleItem){\r\n                var timeslotsPerDay = $('.days .timeslot').length / 7;\r\n                var index = scope.$parent.$index * timeslotsPerDay + scope.$index;\r\n                var newLessonDayOfWeek = Math.floor(index / timeslotsPerDay) + 1;\r\n                var newLessonStartTime = model.startOfDay + (index % timeslotsPerDay);\r\n                var newLessonEndTime = newLessonStartTime + 1;\r\n\r\n                newLesson.load(true, function() {\r\n                    // will force new lesson to be created in DB\r\n                    newLesson.id = null;\r\n                    // startTime and end format from db is \"HH:MM:SS\" as text type\r\n                    // for lesson save startTime need to be moment time type with date\r\n                    newLesson.date = moment(newLesson.date);\r\n                    newLesson.startTime = moment(newLesson.date.format('YYYY-MM-DD') + ' ' + newLesson.startTime);\r\n                    newLesson.startTime.hour(newLessonStartTime);\r\n                    newLesson.startTime.minute(0);\r\n                    newLesson.startTime.day(newLessonDayOfWeek);\r\n\r\n                    newLesson.endTime = moment(newLesson.date.format('YYYY-MM-DD') + ' ' + newLesson.endTime);\r\n                    newLesson.endTime.hour(newLessonEndTime);\r\n                    newLesson.endTime.minute(0);\r\n                    newLesson.endTime.day(newLessonDayOfWeek);\r\n                    newLesson.endTime.week(model.calendar.week);\r\n\r\n                    newLesson.date.day(newLessonDayOfWeek);\r\n                    newLesson.date.week(model.calendar.week);\r\n\r\n                    newLesson.state = 'draft';\r\n                    if (newLesson.homeworks && newLesson.homeworks.all.length>0){\r\n                        newLesson.homeworks.all = _.map(newLesson.homeworks.all,homeworkCloneMap);/*(h)=>{\r\n                                    var homework = new Homework();\r\n\r\n                                    homework.dueDate = h.dueDate;\r\n                                    homework.date = h.date;\r\n                                    homework.title = h.title;\r\n                                    homework.description = h.description;\r\n                                    homework.color = h.color;\r\n                                    homework.state = 'draft';\r\n                                    homework.type = _.findWhere(model.homeworkTypes.all,{'label' : h.type.label} );\r\n                                    homework.subject = _.findWhere(model.subjects.all,{'label' : h.subject.label} );\r\n                                    homework.expanded = true;\r\n                                    return homework;\r\n                                });*/\r\n                    }\r\n\r\n                    if (scheduleItem){\r\n                        newLesson.date = moment(scheduleItem.startDate);\r\n                        newLesson.startTime=moment(scheduleItem.startDate);\r\n                        newLesson.startMoment=moment(scheduleItem.startDate);\r\n                        newLesson.endTime=moment(scheduleItem.endDate);\r\n                        newLesson.endMoment=moment(scheduleItem.endDate);\r\n                        AudienceService.getAudiencesAsMap(model.me.structures).then(function (audienceMap) {\r\n                            //get audience\r\n                            if (scheduleItem.data && scheduleItem.data.classes && scheduleItem.data.classes.length > 0) {\r\n                                newLesson.audience = audienceMap[scheduleItem.data.classes[0]];\r\n\r\n                            }\r\n                            //get room\r\n                            if (scheduleItem.data && scheduleItem.data.roomLabels && scheduleItem.data.roomLabels.length > 0) {\r\n                                newLesson.room = scheduleItem.data.roomLabels[0];\r\n                            }\r\n                        });\r\n\r\n                        model.newLesson =newLesson;\r\n                        window.location.href = window.location.host + '/diary#/createLessonView/timeFromCalendar' ;\r\n                    }else{\r\n\r\n                        newLesson.save(function(data) {\r\n                            window.location.href = window.location.host + '/diary#/editLessonView/' + newLesson.id;\r\n                        }, function(error) {\r\n                            console.error(error);\r\n                        });\r\n                    }\r\n                }, function(error) {\r\n                    console.error(error);\r\n                });\r\n            }\r\n\r\n            function homeworkCloneMap(h){\r\n                var homeworkClone = new Homework();\r\n                homeworkClone.dueDate = h.dueDate;\r\n                homeworkClone.date = h.date;\r\n                homeworkClone.type = _.findWhere(model.homeworkTypes.all,{'label' : h.type.label} );\r\n                homeworkClone.subject = _.findWhere(model.subjects.all,{'label' : h.subject.label} );\r\n                homeworkClone.title = h.title;\r\n                homeworkClone.description = h.description;\r\n                homeworkClone.color = h.color;\r\n                homeworkClone.state = 'draft';\r\n                homeworkClone.expanded = true;\r\n                return homeworkClone;\r\n            }\r\n            function initLessonFromProgression(lesson,pedagogicItemOfTheDay){\r\n\r\n                lesson.id = null;\r\n                // startTime and end format from db is \"HH:MM:SS\" as text type\r\n                // for lesson save startTime need to be moment time type with date\r\n                lesson.title=pedagogicItemOfTheDay.title;\r\n                lesson.description=pedagogicItemOfTheDay.description;\r\n                lesson.color=pedagogicItemOfTheDay.color;\r\n                lesson.subject= pedagogicItemOfTheDay.subject;\r\n                lesson.annotations=pedagogicItemOfTheDay.annotations;\r\n                lesson.type_item = 'progression';\r\n\r\n                lesson.homeworks = new Collection();\r\n                if (pedagogicItemOfTheDay.homeworks && pedagogicItemOfTheDay.homeworks.length>0){\r\n\r\n                    lesson.homeworks.all = _.map(pedagogicItemOfTheDay.homeworks,homeworkCloneMap); /*(h)=>{\r\n                                var homeworkClone = new Homework();\r\n                                homeworkClone.dueDate = h.dueDate;\r\n                                homeworkClone.date = h.date;\r\n                                homeworkClone.type = _.findWhere(model.homeworkTypes.all,{'label' : h.type.label} );\r\n                                homeworkClone.subject = _.findWhere(model.subjects.all,{'label' : h.subject.label} );\r\n                                homeworkClone.title = h.title;\r\n                                homeworkClone.description = h.description;\r\n                                homeworkClone.color = h.color;\r\n                                homeworkClone.state = 'draft';\r\n                                homeworkClone.expanded = true;\r\n                                return homeworkClone;\r\n                            });*/\r\n                }\r\n\r\n\r\n                let timeslotDates = extractBeginEnd();\r\n\r\n                lesson.date = moment(timeslotDates.startDate);\r\n                lesson.startTime=moment(timeslotDates.startDate);\r\n                lesson.startMoment=moment(timeslotDates.startDate);\r\n                lesson.endTime=moment(timeslotDates.endDate);\r\n                lesson.endMoment=moment(timeslotDates.endDate);\r\n\r\n\r\n                model.newLesson =lesson;\r\n                window.location.href = window.location.host + '/diary#/createLessonView/timeFromCalendar' ;\r\n            }\r\n\r\n            function initHomeworkFromCalendar(pedagogicItemOfTheDay){\r\n                let timeslotDates = extractBeginEnd();\r\n\r\n                var homework = new Homework();\r\n                homework.dueDate = moment(timeslotDates.startDate);\r\n                homework.date = moment(timeslotDates.startDate);\r\n                homework.type = _.findWhere(model.homeworkTypes.all,{'label' : pedagogicItemOfTheDay.type_homework} );\r\n                homework.subject = _.findWhere(model.subjects.all,{'label' : pedagogicItemOfTheDay.subject} );\r\n                homework.audience = _.findWhere(model.audiences.all,{'name' : pedagogicItemOfTheDay.audience} );\r\n                homework.title = pedagogicItemOfTheDay.title;\r\n                homework.description = pedagogicItemOfTheDay.description;\r\n                homework.color = pedagogicItemOfTheDay.color;\r\n                homework.state = 'draft';\r\n\r\n                homework.save(function(data) {\r\n                    var homeworkBd = model.homeworks.findWhere({\r\n                        id: parseInt(homework.id)\r\n                    });\r\n                    model.homeworks.remove(homeworkBd);\r\n                    window.location.href = window.location.host + '/diary#/editHomeworkView/' + homework.id;\r\n                }, function(error) {\r\n                    console.error(error);\r\n                });\r\n            }\r\n\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/quick-search/diary-timeslot-item.directive.ts","import { ng, moment, idiom as lang, model, _ } from 'entcore';\r\nimport { SearchForm, PedagogicDay, Homework } from \"../../models/index\";\r\nimport {PedagogicItemService} from \"../../services/pedagogic-item.service\";\r\n\r\nexport const quickSearch = ng.directive('quickSearch', function () {\r\n\r\n    return {\r\n        restrict: \"E\",\r\n        templateUrl: \"/diary/public/template/directives/quick-search/quick-search.html\",\r\n        scope: {\r\n            /**\r\n             * Item type 'lesson' or 'homework'\r\n             */\r\n            itemType: \"@\"\r\n        },\r\n        link: function (scope, element, attrs, location) {\r\n        },\r\n        controller: function ($scope, $rootScope) {\r\n            var vm = this;\r\n\r\n            let id = Date.now();\r\n            /**\r\n             * Number of items displayed by default\r\n             * @type {number}\r\n             */\r\n            var defaultMaxPedagogicItemsDisplayed = 6;\r\n\r\n            $scope.maxPedagogicItemsDisplayed = defaultMaxPedagogicItemsDisplayed;\r\n\r\n            /**\r\n             * Max pedagofic items step increament\r\n             * @type {number}\r\n             */\r\n            var pedagogicDaysDisplayedStep = defaultMaxPedagogicItemsDisplayed;\r\n\r\n            /**\r\n             * If true the search if detailled panel is minified else not\r\n             * (by default minified/not visible)\r\n             * @type {boolean}\r\n             */\r\n            $scope.panelVisible = false;\r\n\r\n            /**\r\n             * Pedagogic items search results\r\n             * @type {Array}\r\n             */\r\n            $scope.pedagogicItems = [];\r\n\r\n            /**\r\n             * Last pressed key time\r\n             * Prevent searching\r\n             */\r\n            $scope.lastPressedKeyTime;\r\n\r\n            /**\r\n             * Pedagogic items of the day displayed.\r\n             * Max\r\n             */\r\n            $scope.quickSearchPedagogicDaysDisplayed = [];\r\n\r\n            /**\r\n             * Default search time = end of current week\r\n             */\r\n            $scope.endDate = moment().endOf('week');\r\n\r\n            /**\r\n             * Text for searching through label, title, ...\r\n             * @type {string}\r\n             */\r\n            $scope.multiSearch = \"\";\r\n\r\n            var timeout;\r\n\r\n            /**\r\n             * Flag indicating it's first search (used for not displaying the 'show more' arrow\r\n             * @type {boolean}\r\n             */\r\n            $scope.isFirstSearch = true;\r\n\r\n            var pedagogicItemDisplayedIdxStart = 0;\r\n            var pedagogicItemDisplayedIdxEnd = defaultMaxPedagogicItemsDisplayed - 1; // array index starts at 0\r\n            var isQuickSearchLesson = ($scope.itemType === 'lesson') ? true : false;\r\n\r\n            initQuickSearch();\r\n\r\n            /*\r\n             * initialisation\r\n             */\r\n            function initQuickSearch() {\r\n\r\n                $scope.endDate = moment().endOf('week');\r\n                $scope.quickSearchPedagogicDays = [];\r\n                $scope.itemType = isQuickSearchLesson ? 'lesson' : 'homework';\r\n                $scope.panelLabel = isQuickSearchLesson ? lang.translate('diary.lessons') : lang.translate('diary.homeworks');\r\n            }\r\n\r\n\r\n            $scope.$on('rightpanel.open', function (_, rightpanelid) {\r\n\r\n                if (id !== rightpanelid && $scope.panelVisible) {\r\n                    $scope.setPanelVisible(false, true);\r\n                }\r\n                /*else{\r\n                    if ($scope.panelVisible) {\r\n                        $('.mainDiaryContainer').width('84%');\r\n                        $('.quick-search').width('16%');\r\n                    }\r\n                }*/\r\n            });\r\n\r\n            $scope.$watch(() => {\r\n                return $rootScope.currentRightPanelVisible;\r\n            }, (n) => {\r\n                $scope.currentRightPanelVisible = n;\r\n            });\r\n\r\n            $scope.toogle = function (show) {\r\n                if (show) {\r\n                    $rootScope.currentRightPanelVisible = show;\r\n                    if ($scope.isFirstSearch) {\r\n                        $scope.quickSearch(true);\r\n                    }\r\n                } else {\r\n                    $rootScope.currentRightPanelVisible = undefined;\r\n                }\r\n            }\r\n\r\n            $scope.setPanelVisible = function (isVisible, dontHide) {\r\n\r\n                /*\r\n                $scope.panelVisible = isVisible;\r\n                */\r\n\r\n\r\n                if ($scope.isFirstSearch) {\r\n                    $scope.quickSearch(true);\r\n                }\r\n                /*\r\n                // hide the other panel (panel or homework)\r\n                if ($scope.itemType == 'lesson') {\r\n                    // tricky way to get the other directive for homeworks\r\n                    if (isQuickSearchLesson && !dontHide) {\r\n                        $scope.$parent.$$childTail.panelVisible = false;\r\n                    }\r\n                } else if ($scope.itemType == 'homework') {\r\n                    if (!isQuickSearchLesson && !dontHide) {\r\n                        $scope.$parent.$$childHead.panelVisible = false;\r\n                    }\r\n                }\r\n\r\n                // let enough room to display quick search panel maximized\r\n                if (isVisible) {\r\n                    $rootScope.$broadcast('rightpanel.open',id);\r\n                } else {\r\n                    if (!dontHide){\r\n                        $('.mainDiaryContainer').width('97%');\r\n                        $('.quick-search').width('2%');\r\n                    }\r\n                }\r\n                */\r\n            };\r\n\r\n            /**\r\n             * By default X pedagogic items are displayed.\r\n             * This allows to display more items\r\n             */\r\n            $scope.quickSearchNextPedagogicDays = function () {\r\n\r\n                if (!$scope.isNextPedagogicDaysDisplayed) {\r\n                    return;\r\n                }\r\n\r\n                pedagogicItemDisplayedIdxStart += pedagogicDaysDisplayedStep;\r\n                pedagogicItemDisplayedIdxEnd += pedagogicDaysDisplayedStep;\r\n\r\n                $scope.maxPedagogicItemsDisplayed = Math.max($scope.maxPedagogicItemsDisplayed, pedagogicItemDisplayedIdxEnd);\r\n\r\n                $scope.quickSearch(false);\r\n            };\r\n\r\n            /**\r\n             *\r\n             */\r\n            $scope.quickSearchPreviousPedagogicDays = function () {\r\n\r\n                if (!$scope.isPreviousPedagogicDaysDisplayed) {\r\n                    return;\r\n                }\r\n\r\n                pedagogicItemDisplayedIdxStart -= pedagogicDaysDisplayedStep;\r\n                pedagogicItemDisplayedIdxStart = Math.max(0, pedagogicItemDisplayedIdxStart);\r\n                pedagogicItemDisplayedIdxEnd -= pedagogicDaysDisplayedStep;\r\n\r\n                $scope.quickSearch(false);\r\n            };\r\n\r\n            /**\r\n             *  If true will display the orange arrow to display more items\r\n             *  else not.\r\n             * @type {boolean}\r\n             */\r\n            $scope.isNextPedagogicDaysDisplayed = false;\r\n\r\n            /**\r\n             * Displays \"no results\" if true else blank\r\n             * @type {boolean}\r\n             */\r\n            $scope.displayNoResultsText = false;\r\n\r\n            /**\r\n             * Compute if the button for recent items should be displayed\r\n             * @returns {boolean}\r\n             */\r\n            var isPreviousPedagogicDaysDisplayed = function () {\r\n                return !$scope.isFirstSearch && 0 < pedagogicItemDisplayedIdxStart && $scope.quickSearchPedagogicDaysDisplayed.length > 0;\r\n            };\r\n\r\n            /**\r\n             * Returns true if the \"next\" arrow button should be displayed meaning\r\n             * there are other items\r\n             * @returns {boolean}\r\n             */\r\n            var isNextPedagogicDaysDisplayed = function (pedagogicItemCount) {\r\n                return !$scope.isFirstSearch &&\r\n                    pedagogicItemDisplayedIdxStart <= pedagogicItemCount &&\r\n                    $scope.quickSearchPedagogicDaysDisplayed.length > 0 &&\r\n                    $scope.quickSearchPedagogicDaysDisplayed.length >= pedagogicDaysDisplayedStep;\r\n            };\r\n\r\n\r\n            var performQuickSearch = function () {\r\n\r\n                clearTimeout(timeout); // this way will not run infinitely\r\n\r\n                var params = new SearchForm(true);\r\n                params.initForTeacher();\r\n                params.isQuickSearch = true;\r\n                params.limit = $scope.maxPedagogicItemsDisplayed + 1; // +1 thingy will help to know if extra items can be displayed\r\n                var period = moment(model.calendar.dayForWeek).day(1);\r\n                period.add(-60, 'days').format('YYYY-MM-DD');\r\n                params.startDate = period.format('YYYY-MM-DD');\r\n                params.endDate = moment($scope.endDate).add(1, 'days');\r\n                params.sortOrder = \"DESC\";\r\n\r\n                if ($scope.itemType == 'lesson') {\r\n                    params.multiSearchLesson = $scope.multiSearch.trim();\r\n                } else {\r\n                    params.multiSearchHomework = $scope.multiSearch.trim();\r\n                }\r\n\r\n                params.returnType = $scope.itemType;\r\n\r\n                model.pedagogicDaysQuickSearch = [];\r\n                $scope.quickSearchPedagogicDaysDisplayed.length = 0;\r\n\r\n\r\n                $scope.performPedagogicItemSearch(params, model.isUserTeacher());\r\n\r\n            };\r\n\r\n            /*\r\n             * search pedagogic item\r\n             */\r\n            $scope.performPedagogicItemSearch = function (params, isTeacher) {\r\n                // global quick search panel\r\n                if (params.isQuickSearch) {\r\n                    if (params.returnType === 'lesson') {\r\n                        model.pedagogicDaysQuickSearchLesson = [];\r\n                    } else {\r\n                        model.pedagogicDaysQuickSearchHomework = [];\r\n                    }\r\n                }\r\n                // 'classical' view list\r\n                else {\r\n                    model.pedagogicDays.reset();\r\n                }\r\n\r\n                // get pedagogicItems\r\n                return PedagogicItemService.getPedagogicItems(params).then((pedagogicItems) => {\r\n                    var days = _.groupBy(pedagogicItems, 'day');\r\n                    var pedagogicDays = [];\r\n                    var aDayIsSelected = false;\r\n\r\n                    for (var day in days) {\r\n                        if (days.hasOwnProperty(day)) {\r\n                            var pedagogicDay = new PedagogicDay();\r\n                            pedagogicDay.selected = false;\r\n                            //TODO is constants\r\n                            pedagogicDay.dayName = moment(day).format(\"dddd DD MMMM YYYY\");\r\n                            pedagogicDay.shortName = pedagogicDay.dayName.substring(0, 2);\r\n                            //TODO is constants\r\n                            pedagogicDay.shortDate = moment(day).format(\"DD/MM\");\r\n                            pedagogicDay.pedagogicItemsOfTheDay = days[day];\r\n\r\n                            var countItems = _.groupBy(pedagogicDay.pedagogicItemsOfTheDay, 'type_item');\r\n\r\n                            pedagogicDay.nbLessons = countItems.lesson ? countItems.lesson.length : 0;\r\n                            pedagogicDay.nbHomeworks = countItems.homework ? countItems.homework.length : 0;\r\n\r\n                            //select default day\r\n                            if (isTeacher) {\r\n                                if (!aDayIsSelected) {\r\n                                    pedagogicDay.selected = true;\r\n                                    aDayIsSelected = true;\r\n                                }\r\n                            } else {\r\n                                if (pedagogicDay.nbHomeworks > 0 && !aDayIsSelected) {\r\n                                    pedagogicDay.selected = true;\r\n                                    aDayIsSelected = true;\r\n                                }\r\n                            }\r\n                            pedagogicDays.push(pedagogicDay);\r\n                        }\r\n                    }\r\n\r\n                    if (pedagogicDays[0] && !aDayIsSelected) {\r\n                        pedagogicDays[0].selected = true;\r\n                    }\r\n\r\n                    // global quick search panel\r\n                    if (params.isQuickSearch) {\r\n                        if (params.returnType === 'lesson') {\r\n                            model.pedagogicDaysQuickSearchLesson = model.pedagogicDaysQuickSearchLesson.concat(pedagogicDays);\r\n                        } else {\r\n                            model.pedagogicDaysQuickSearchHomework = model.pedagogicDaysQuickSearchHomework.concat(pedagogicDays);\r\n                        }\r\n                    } else {\r\n                        model.pedagogicDays.pushAll(pedagogicDays);\r\n                    }\r\n\r\n                    model.initSubjects();\r\n\r\n                    $scope.isFirstSearch = false;\r\n                    $scope.quickSearchPedagogicDays = isQuickSearchLesson ? model.pedagogicDaysQuickSearchLesson : model.pedagogicDaysQuickSearchHomework;\r\n                    $scope.displayNoResultsText = ($scope.quickSearchPedagogicDays.length === 0);\r\n\r\n                    var idxSearchPedagogicItem = 0;\r\n                    $scope.quickSearchPedagogicDaysDisplayed = [];\r\n\r\n                    // count number of displayed items\r\n                    $scope.quickSearchPedagogicDays.forEach(function (pedagogicDay) {\r\n\r\n                        pedagogicDay.pedagogicItemsOfTheDay.forEach(function (pedagogicItemOfTheDay) {\r\n                            if ((pedagogicItemDisplayedIdxStart <= idxSearchPedagogicItem) && (idxSearchPedagogicItem <= pedagogicItemDisplayedIdxEnd)) {\r\n                                $scope.quickSearchPedagogicDaysDisplayed.push(pedagogicItemOfTheDay);\r\n                            }\r\n                            idxSearchPedagogicItem++;\r\n                        });\r\n                    });\r\n\r\n                    // enable/disable next/previous items arrow buttons\r\n                    $scope.isPreviousPedagogicDaysDisplayed = isPreviousPedagogicDaysDisplayed();\r\n                    $scope.isNextPedagogicDaysDisplayed = isNextPedagogicDaysDisplayed(idxSearchPedagogicItem);\r\n\r\n                });\r\n\r\n            };\r\n\r\n            $scope.quickSearch = function (resetMaxDisplayedItems) {\r\n\r\n                if (resetMaxDisplayedItems) {\r\n                    $scope.maxPedagogicItemsDisplayed = defaultMaxPedagogicItemsDisplayed;\r\n                    pedagogicItemDisplayedIdxStart = 0;\r\n                    pedagogicItemDisplayedIdxEnd = defaultMaxPedagogicItemsDisplayed - 1;\r\n                }\r\n\r\n                if (timeout) {\r\n                    clearTimeout(timeout);\r\n                    timeout = null;\r\n                }\r\n\r\n                // start searching after 0.4s (prevent spamming request to backend)\r\n                timeout = setTimeout(performQuickSearch, 400);\r\n            };\r\n\r\n\r\n            var handleCalendarHomeworksDrop = function () {\r\n\r\n                var timeslots = $('.homeworkpanel');\r\n\r\n                var homeworkSlotsPerDay = model.homeworksPerDayDisplayed; // 1;//timeslots.length / 7;\r\n\r\n                timeslots.each(function (index) {\r\n\r\n                    var timeslot = $(this);\r\n\r\n                    // allow drag\r\n                    timeslot.on('dragover', function (event) {\r\n                        event.preventDefault();\r\n                    });\r\n\r\n                    timeslot.on('dragenter', function ($event) {\r\n                        // FIXME red color not visible because overidden by grey color !important\r\n                        timeslot.css('border', 'blue 2px dashed');\r\n                        timeslot.css('border-radius', '3px');\r\n                        //timeslot.css('background-color', 'red');\r\n                    });\r\n\r\n                    timeslot.on('dragleave', function (event) {\r\n                        //timeslot.css('css', 'color: blue !important');\r\n                        timeslot.css('border', '');\r\n                        timeslot.css('border-radius', '');\r\n                    });\r\n\r\n                    timeslot.on('drop', function ($event) {\r\n                        $event.preventDefault();\r\n                        timeslot.css('background-color', '');\r\n\r\n                        // duplicate dragged lesson\r\n                        var pedagogicItemOfTheDay = JSON.parse($event.originalEvent['dataTransfer'].getData(\"application/json\"));\r\n\r\n                        // do not drop if item type is not a lesson\r\n                        if (pedagogicItemOfTheDay.type_item !== 'homework') {\r\n                            return;\r\n                        }\r\n\r\n                        var newHomework = new Homework();\r\n                        newHomework.id = pedagogicItemOfTheDay.id;\r\n\r\n                        var newHomeworkDayOfWeek = Math.floor(index / homeworkSlotsPerDay) + 1;\r\n\r\n                        newHomework.load(function () {\r\n                            // will force new lesson to be created in DB\r\n                            newHomework.id = null;\r\n                            newHomework.lesson_id = null;\r\n                            newHomework.state = \"draft\"\r\n\r\n                            // startTime and end format from db is \"HH:MM:SS\" as text type for lesson save startTime need to be moment time type with date\r\n                            newHomework.dueDate = moment(newHomework.dueDate);\r\n                            newHomework.startTime = moment(newHomework.date.format('YYYY-MM-DD') + ' ' + newHomework.startTime);\r\n                            newHomework.startTime.day(newHomeworkDayOfWeek);\r\n\r\n                            // TODO refactor endTime = startTime + 1h\r\n                            newHomework.endTime = moment(newHomework.date.format('YYYY-MM-DD') + ' ' + newHomework.endTime);\r\n                            newHomework.endTime.day(newHomeworkDayOfWeek);\r\n                            newHomework.endTime.week(model.calendar.week);\r\n\r\n                            newHomework.dueDate.day(newHomeworkDayOfWeek);\r\n                            newHomework.dueDate.week(model.calendar.week);\r\n\r\n\r\n                            newHomework.save(function (data) {\r\n                                // remove homework from model so will force reload\r\n                                // needed because homework.dueDate need a specific format !\r\n                                var homework = model.homeworks.findWhere({\r\n                                    id: parseInt(newHomework.id)\r\n                                });\r\n                                model.homeworks.remove(homework);\r\n                                window.location.href = window.location.host + '/diary#/editHomeworkView/' + newHomework.id;\r\n                            }, function (error) {\r\n                                console.error(error);\r\n                            });\r\n                        }, function (error) {\r\n                            console.error(error);\r\n                        });\r\n                    });\r\n                });\r\n            };\r\n\r\n            // wait until calendar loaded\r\n            if (!model.homeworksDropHandled) {\r\n                setTimeout(handleCalendarHomeworksDrop, 2000);\r\n                model.homeworksDropHandled = true;\r\n            }\r\n\r\n\r\n        }\r\n    };\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/quick-search/quick-search.directive.ts","import {ng, angular} from 'entcore';\r\n\r\nexport const quickSearchItem = ng.directive('quickSearchItem', function () {\r\n    return {\r\n        restrict: \"E\",\r\n        templateUrl: \"/diary/public/template/directives/quick-search/quick-search-item.html\",\r\n        scope: false,\r\n        link: function (scope, element) {\r\n\r\n            var angElement = angular.element(element);\r\n\r\n            angElement.on('drag', function(event){\r\n                angElement.css('opacity', 0.9);\r\n            });\r\n\r\n            scope.dragCondition = function (item) {\r\n                return true;\r\n            };\r\n\r\n            scope.dropCondition = function (targetItem) {\r\n                return false;\r\n            };\r\n\r\n            scope.drag = function(item, $originalEvent) {\r\n                try {\r\n                    $originalEvent.dataTransfer.setData('application/json', JSON.stringify(item));\r\n                } catch (e) {\r\n                    $originalEvent.dataTransfer.setData('Text', JSON.stringify(item));\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/quick-search/quick-search-item.directive.ts","import {ng, angular, notify } from 'entcore';\r\n\r\nexport const attachment = ng.directive('attachment', function () {\r\n    return {\r\n        restrict: \"E\",\r\n        require: '^attachmentsx',\r\n        templateUrl: \"diary/public/template/attachment.html\",\r\n        scope: {\r\n            /**\r\n             * Attachment\r\n             */\r\n            attachment: '=',\r\n            /**\r\n             * Reference to lesson or homework\r\n             */\r\n            item: '=',\r\n            /**\r\n             *  If true, user won't be able to add or modify current attachments (for student for example)\r\n             */\r\n            readonly: '='\r\n        },\r\n        link: function (scope, element, attrs, location) {\r\n\r\n            /**\r\n             * As seen from entcore, behaviour.js\r\n             * @param attachment\r\n             */\r\n            scope.downloadAttachment = function () {\r\n                scope.attachment.download();\r\n            };\r\n\r\n            // detachFromItem = function (itemId, itemType, cb, cbe) {\r\n            /**\r\n             * Removes attachment from lesson or homework\r\n             * but DOES NOT remove the file physically\r\n             */\r\n            scope.removeAttachment = function () {\r\n\r\n                // do not modify current attachment if readonly\r\n                if (scope.readonly === true) {\r\n                    return;\r\n                }\r\n\r\n                scope.attachment.detachFromItem(scope.item,\r\n                    // callback function\r\n                    function (cb) {\r\n                        notify.info(cb.message);\r\n                    },\r\n                    // callback on error function\r\n                    function (cbe) {\r\n                        notify.error(cbe.message);\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/attachment/attachment.directive.ts","import { angular, ng, model, notify, _ } from 'entcore';\r\nimport { Attachment } from '../../models/index';\r\n\r\nexport const attachmentsx = ng.directive('attachmentsx', function () {\r\n    return {\r\n\r\n        restrict: \"E\",\r\n        templateUrl: \"diary/public/template/attachments.html\",\r\n        scope: {\r\n            /**\r\n             * Lesson or homework\r\n             */\r\n            item: '=',\r\n            /**\r\n             * If true, user won't be able to add or modify current attachments (for student for example)\r\n             */\r\n            readonly: '='\r\n        },\r\n        controller: function(){},\r\n        link: function($scope){\r\n            //$scope.selectedAttachments = new Array();\r\n            $scope.display = {};\r\n            $scope.display.showPersonalAttachments = false;\r\n            $scope.mediaLibraryScope = null;\r\n\r\n            /**\r\n             * Set selected or not documents within\r\n             * media library documents\r\n             */\r\n            var syncSelectedDocumentsFromItemAttachments = function(){\r\n\r\n                var theScope = getMediaLibraryScope();\r\n\r\n                theScope.documents.forEach(function(document){\r\n                    document.selected = hasAttachmentInItem(document._id);\r\n                });\r\n\r\n                theScope.$apply();\r\n            };\r\n\r\n            /**\r\n             *\r\n             * @returns {*}\r\n             */\r\n            var getMediaLibraryScope = function () {\r\n\r\n                if ($scope.mediaLibraryScope != null) {\r\n                    return $scope.mediaLibraryScope;\r\n                }\r\n\r\n                // tricky way to get that mediaLibrary directive ...\r\n                var i = 0;\r\n                var mediaLibraryScope = null;\r\n\r\n                for (var cs = $scope.$$childHead; cs; cs = cs.$$nextSibling) {\r\n                    if (i === 0 && !cs.attachment) {\r\n                        mediaLibraryScope = cs.$$nextSibling.$$childTail.$$childTail.$$childTail;\r\n                        break;\r\n                    }\r\n                    i++;\r\n                }\r\n\r\n                $scope.mediaLibraryScope = mediaLibraryScope;\r\n            };\r\n\r\n            var mediaLibraryScope = null;\r\n\r\n            // open up personal storage\r\n            $scope.showPersonalAttachments = function(){\r\n                $scope.display.showPersonalAttachments = true;\r\n                setTimeout(function(){\r\n                    // FIXME can't find mediaLibrary scopre at first time !!\r\n                    syncSelectedDocumentsFromItemAttachments();\r\n                }, 300);\r\n            };\r\n\r\n            $scope.hidePersonalAttachments = function(){\r\n                $scope.display.showPersonalAttachments = false;\r\n            };\r\n\r\n\r\n            /**\r\n             * Selected attachments from media library directive\r\n             * see attachments.html\r\n             * @param selectedAttachments Selected attachments in personal storage view\r\n             */\r\n            $scope.updateSelectedAttachments = function (selectedAttachments) {\r\n                // TODO DELETE\r\n            };\r\n\r\n            /**\r\n             *\r\n             * @param documentId\r\n             */\r\n            var hasAttachmentInItem = function(documentId) {\r\n\r\n                var hasAttachment = false;\r\n\r\n                if(!$scope.item.attachments || $scope.item.attachments.length === 0){\r\n                    hasAttachment = false;\r\n                } else {\r\n                    $scope.item.attachments.forEach(function(itemAttachment){\r\n\r\n                        if(itemAttachment.document_id === documentId){\r\n                            hasAttachment = true;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                return hasAttachment;\r\n            };\r\n\r\n            /**\r\n             *\r\n             * @returns {*}\r\n             */\r\n            var getSelectedDocuments = function () {\r\n                var selectedDocuments = _.where(getMediaLibraryScope().documents, {\r\n                    selected: true\r\n                });\r\n\r\n                return selectedDocuments;\r\n            };\r\n\r\n            /**\r\n             *\r\n             * @param selectedAttachments Selected documents in media library directive\r\n             */\r\n            var addSelectedDocumentsToItem = function (newSelectedAttachments) {\r\n\r\n                if (!newSelectedAttachments || newSelectedAttachments.length === 0) {\r\n                    return;\r\n                }\r\n\r\n                var newAttachments = new Array();\r\n\r\n                newSelectedAttachments.forEach(function (selectedAttachment) {\r\n\r\n                    if (!hasAttachmentInItem(selectedAttachment._id)) {\r\n                        let itemAttachment:any = new Attachment();\r\n\r\n                        itemAttachment.user_id = model.me.userId;\r\n                        itemAttachment.document_id = selectedAttachment._id;\r\n                        itemAttachment.document_label = selectedAttachment.name;\r\n\r\n                        newAttachments.push(itemAttachment);\r\n                        $scope.item.addAttachment(itemAttachment);\r\n                    }\r\n                });\r\n            };\r\n\r\n\r\n            /**\r\n             * Associates the selected attachments from directive\r\n             * to current item (lesson or homework)\r\n             */\r\n            $scope.linkAttachmentsToItem = function () {\r\n\r\n                if (mediaLibraryScope == null) {\r\n                    mediaLibraryScope = getMediaLibraryScope();\r\n                }\r\n\r\n                var selectedAttachments = getSelectedDocuments();\r\n\r\n                if (selectedAttachments.length === 0) {\r\n                    notify.info('diary.attachments.selectattachmentstolink');\r\n                }\r\n\r\n                else {\r\n                    addSelectedDocumentsToItem(selectedAttachments);\r\n                    // close media library directive\r\n                    $scope.hidePersonalAttachments();\r\n                }\r\n\r\n            };\r\n\r\n            /**\r\n             * Removes the attachment from item (lesson or homework)\r\n             * @param attachment\r\n             */\r\n            $scope.removeAttachment = function (attachment) {\r\n\r\n                attachment.detachFromItem($scope.item.id, $scope.itemType,\r\n                    // callback function TODO handle\r\n                    function () {\r\n\r\n                    },\r\n                    // callback on error function TODO handle\r\n                    function () {\r\n\r\n                    }\r\n                );\r\n            };\r\n\r\n\r\n            setInterval(function () {\r\n                var addButton = $('.right-magnet.vertical-spacing-twice');\r\n                addButton.hide();\r\n            }, 400);\r\n        }\r\n    }\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/attachment/attachmentsx.directive.ts","export * from './array-to-string.filter';\nexport * from './format-hour.filter';\nexport * from './highlight.filter';\nexport * from './max-char.filter';\nexport * from './same-day.filter';\nexport * from './translate.filter';\nexport * from './trust-html.filter';\n\n\n\n// WEBPACK FOOTER //\n// ./ts/filters/index.ts","import {ng, _} from 'entcore';\r\n\r\nexport const arraytostring = ng.filter('arraytostring', () => {\r\n\r\n    return (item) => {\r\n\r\n        // return the current `item`, but call `toUpperCase()` on it\r\n\r\n        if (!item){\r\n            return \"\";\r\n        }\r\n        let result = \"\";\r\n        _.each(item,(it)=>{\r\n            result+= it + \",\";\r\n        });\r\n        result = result.substring(0,result.length -1);\r\n        return result;\r\n    };\r\n\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/filters/array-to-string.filter.ts","import { ng } from 'entcore';\r\n\r\nexport const formatHour = ng.filter('formatHour', () => {\r\n\r\n    return (text) => {\r\n\r\n\r\n\r\n        if (!text){\r\n            return text;\r\n        }\r\n        return text.substring(0,5).replace(\":\",\"h\");\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/filters/format-hour.filter.ts","import {ng, $sce} from 'entcore';\r\n\r\nexport const highlight = ng.filter('highlight', () => {\r\n\r\n    return (text, phrase) => {\r\n\r\n\r\n        if (phrase) text = text.replace(new RegExp('(' + phrase + ')', 'gi'), '<span class=\"highlighted\">$1</span>');\r\n        return $sce.trustAsHtml(text);\r\n    };\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/filters/highlight.filter.ts","import {ng, $sce} from 'entcore';\r\n\r\nexport const maxChar = ng.filter('maxChar', () => {\r\n\r\n    return (item, maxChar) => {\r\n        if (!item) {\r\n            return item;\r\n        }\r\n        if (!item.indexOf) {\r\n            item = item.toString();\r\n        }\r\n\r\n        item = item.replace(/<\\/?[^>]+(>|$)/g, \" \");\r\n\r\n        let dynamicMaxChar = maxChar;\r\n\r\n        /*if (item.indexOf('</div>') < dynamicMaxChar){\r\n            dynamicMaxChar = item.indexOf('</div>') + 6;\r\n        }*/\r\n        if (item.length < dynamicMaxChar) {\r\n            return item;\r\n        } else {\r\n            return item.substring(0, dynamicMaxChar) + \" ...\";\r\n        }\r\n\r\n    };\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/filters/max-char.filter.ts","import { ng, moment } from 'entcore';\r\n\r\nexport const sameDate = ng.filter('sameDate', () => {\r\n\r\n    return (items, properties) => {\r\n\r\n        let d = properties[Object.keys(properties)[0]];\r\n        if (!d){\r\n            return items;\r\n        }\r\n        let valueCompare = moment(d);\r\n        let result = items.filter((item)=>{\r\n            let valueItem = moment(item.date);\r\n            return valueItem.isSame(valueCompare,'d');\r\n        });\r\n        return result;\r\n    };\r\n\r\n\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/filters/same-day.filter.ts","import { ng, idiom as lang } from 'entcore';\r\n\r\nexport const translate = ng.filter('translate', () => {\r\n\r\n    return (text) => {\r\n\r\n\r\n        return lang.translate(text);\r\n    };\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/filters/translate.filter.ts","import {ng, $sce} from 'entcore';\r\n\r\nexport const trusthtml = ng.filter('trusthtml', () => {\r\n\r\n    return (text) => {\r\n\r\n        return $sce.trustAsHtml(text);\r\n    };\r\n});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/filters/trust-html.filter.ts"],"sourceRoot":""}