{"version":3,"sources":["webpack:///webpack/bootstrap d2fb014452ec64ee12c2","webpack:///./ts/app.ts","webpack:///external \"entcore\"","webpack:///./ts/controller.ts","webpack:///./ts/tools.ts","webpack:///./ts/model/PedagogicItem.model.ts","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/axios.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/utils.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/bind.js","webpack:///C:/CGI/dev/cahier-de-textes/~/is-buffer/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/Axios.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/defaults.js","webpack:///C:/CGI/dev/cahier-de-textes/~/process/browser.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/normalizeHeaderName.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/adapters/xhr.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/settle.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/createError.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/enhanceError.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/buildURL.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/parseHeaders.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/isURLSameOrigin.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/btoa.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/cookies.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/InterceptorManager.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/dispatchRequest.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/core/transformData.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/isCancel.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/isAbsoluteURL.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/combineURLs.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/Cancel.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/CancelToken.js","webpack:///C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/spread.js","webpack:///./ts/model/Homework.model.ts","webpack:///./ts/model/Lesson.model.ts","webpack:///./ts/model/Subject.model.ts","webpack:///./ts/model.ts","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/minicast.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/eventer.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/selection.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.crud.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/crud.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/index.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/axios.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/utils.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/bind.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/Axios.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/defaults.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/normalizeHeaderName.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/adapters/xhr.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/settle.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/createError.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/enhanceError.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/buildURL.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/parseHeaders.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/isURLSameOrigin.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/btoa.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/cookies.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/InterceptorManager.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/dispatchRequest.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/transformData.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/isCancel.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/isAbsoluteURL.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/combineURLs.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/Cancel.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/CancelToken.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/spread.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.collection.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/collection.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.model.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/model.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/provider.js","webpack:///C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/autosaver.js","webpack:///./ts/model/PedagogicDay.model.ts","webpack:///./ts/model/Child.model.ts","webpack:///./ts/model/SearchForm.model.ts","webpack:///./ts/service/courses.service.ts","webpack:///./ts/service/subject.service.ts","webpack:///./ts/service/utils.service.ts","webpack:///./ts/service/lessons.service.ts","webpack:///./ts/service/attachment.service.ts","webpack:///./ts/model/Attachment.model.ts","webpack:///./ts/directives/secure/secure.service.ts","webpack:///./ts/service/audiences.service.ts"],"names":[],"mappings":"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;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;;ACnDA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,aAAa;AACxB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC,OAAO;AAC1C;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,SAAS,GAAG,SAAS;AAC5C,4BAA2B;AAC3B;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA,wCAAuC,OAAO;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC9SA;;AAEA;AACA;AACA;AACA,oBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACpBA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA,kDAAiD,gBAAgB;AACjE;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iDAAgD;AAChD;AACA;AACA,MAAK;AACL;AACA,EAAC;;AAED;AACA;AACA;AACA,iDAAgD;AAChD;AACA;AACA;AACA,MAAK;AACL;AACA,EAAC;;AAED;;;;;;;ACrFA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAwE;AACxE;AACA;AACA;AACA,wDAAuD;AACvD;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,QAAO,YAAY;AACnB;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA,EAAC;;AAED;;;;;;;;AC3FA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sCAAqC;;AAErC;AACA;AACA;;AAEA,4BAA2B;AAC3B;AACA;AACA;AACA,6BAA4B,UAAU;;;;;;;ACvLtC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;;;;;ACXA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA4C;AAC5C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;;;;;;;ACnLA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzBA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;;;;;;ACjBA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACnEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,eAAe;;AAEhC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;;;;;;ACpCA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;;;;;ACnEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACnCA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,yCAAwC;AACxC,QAAO;;AAEP;AACA,2DAA0D,wBAAwB;AAClF;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,iCAAgC;AAChC,8BAA6B,aAAa,EAAE;AAC5C;AACA;AACA,IAAG;AACH;;;;;;;ACpDA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;ACnDA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAA+B;AAC/B,wCAAuC;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;;;;;;;AC9EA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,cAAc;AACzB,YAAW,MAAM;AACjB,YAAW,eAAe;AAC1B,cAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;;;;;;ACnBA;;AAEA;AACA;AACA;;;;;;;ACJA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACbA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;;;;;;ACbA;;AAEA;AACA;AACA;AACA;AACA,YAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;AClBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACxDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA;AACA,iCAAgC,aAAa;AAC7C;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA,gCAA+B,YAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACtIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAAyD,gBAAgB,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,kCAAkC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA,EAAC;AACD;;;;;;;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,+BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,+BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD;;;;;;;AClGA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACjBA,0C;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,MAAM;AAClB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;;ACnDA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,aAAa;AACxB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC,OAAO;AAC1C;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,SAAS,GAAG,SAAS;AAC5C,4BAA2B;AAC3B;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA,wCAAuC,OAAO;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1SA;;AAEA;AACA;AACA;AACA,oBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;;;;;;;ACVA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA,kDAAiD,gBAAgB;;AAEjE;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iDAAgD;AAChD;AACA;AACA,MAAK;AACL;AACA,EAAC;;AAED;AACA;AACA;AACA,iDAAgD;AAChD;AACA;AACA;AACA,MAAK;AACL;AACA,EAAC;;AAED;;;;;;;ACpFA;;AAEA;AACA;;AAEA,iCAAgC;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAwE;AACxE;AACA;AACA;AACA,wDAAuD;AACvD;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,QAAO,YAAY;AACnB;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA,EAAC;;AAED;;;;;;;;AC5FA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;;;;;ACXA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA4C;AAC5C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;;;;;;;AChLA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxBA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;;;;;;AChBA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACnEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,eAAe;;AAEhC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;;;;;;ACpCA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;;;;;ACnEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACnCA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,yCAAwC;AACxC,QAAO;;AAEP;AACA,2DAA0D,wBAAwB;AAClF;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,iCAAgC;AAChC,8BAA6B,aAAa,EAAE;AAC5C;AACA;AACA,IAAG;AACH;;;;;;;ACpDA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;ACnDA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAA+B;AAC/B,wCAAuC;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;;;;;;;AC9EA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,cAAc;AACzB,YAAW,MAAM;AACjB,YAAW,eAAe;AAC1B,cAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;;;;;;ACnBA;;AAEA;AACA;AACA;;;;;;;ACJA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACbA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;;;;;;;ACXA;;AAEA;AACA;AACA;AACA;AACA,YAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;AClBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACxDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA,YAAW,SAAS;AACpB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1BA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD;;;;;;;ACxCA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACjBA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACxBA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACjBA;AACA;AACA;AACA,oCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,mCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,gCAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,MAAK;AACL;AACA;AACA,cAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,aAAY;AACZ,uBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC;AACvC,mCAAkC,SAAS;AAC3C,mCAAkC,WAAW,UAAU;AACvD,0CAAyC,cAAc;AACvD;AACA,8GAA6G,OAAO,UAAU;AAC9H,iFAAgF,iBAAiB,OAAO;AACxG,yDAAwD,gBAAgB,QAAQ,OAAO;AACvF,+CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,kCAAiC;AACjC;AACA;AACA,UAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,oCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iEAAgE,kBAAkB,EAAE;AACpF,sBAAqB;AACrB,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,gBAAgB;AAChD,+CAA8C,6CAA6C,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD,0BAA0B,EAAE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;;;AC9DA,wCAAoC;AAEpC;KASI;SARA,aAAQ,GAAG,KAAK,CAAC;SACjB,YAAO,GAAG,gBAAM,EAAE,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;SAC/C,cAAS,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;SACxC,cAAS,GAAG,gBAAM,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SACrC,2BAAsB,GAAG,EAAE,CAAC;SAC5B,cAAS,GAAG,CAAC,CAAC;SACd,gBAAW,GAAG,CAAC,CAAC;SAIhB,kBAAa,GAAG;aACZ,MAAM,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;SAC7C,CAAC,CAAC;SAEF,qBAAgB,GAAG;aACf,IAAI,UAAU,GAAG,WAAC,CAAC,OAAO,CAAC,IAAI,CAAC,sBAAsB,EAAE,WAAW,CAAC,CAAC;aACrE,IAAI,CAAC,SAAS,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;aAC1E,IAAI,CAAC,WAAW,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,GAAG,UAAU,CAAC,UAAU,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;SACpF,CAAC,CAAC;KAVc,CAAC;KAWrB,mBAAC;AAAD,EAAC;AApBY,qCAAY;;;;;;;;;ACFzB;KAAA;SAKI,aAAQ,GAAG,KAAK,CAAC;KACrB,CAAC;KAAD,YAAC;AAAD,EAAC;AANY,uBAAK;;;;;;;;;ACAlB,wCAAsC;AACtC,sCAAuC;AAEvC;KAwBI,oBAAY,aAAa;SAtBzB,cAAS,GAAG,EAAE,CAAC;SACf,YAAO,GAAG,EAAE,CAAC;SACb,iBAAY,GAAG,EAAE,CAAC;SAClB,eAAU,GAAG,EAAE,CAAC;SAChB,kBAAa,GAAG,EAAE,CAAC;SACnB,oBAAe,GAAG,EAAE,CAAC;SACrB,eAAU,GAAG,EAAE,CAAC;SAChB,aAAQ,GAAG,EAAE,CAAC;SACd,oBAAe,GAAG,IAAI,CAAC;SACvB,oBAAe,GAAG,EAAE,CAAC;SAiBrB,mBAAc,GAAG;aACb,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;aACvB,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;aACzB,IAAI,MAAM,GAAG,gBAAM,CAAC,eAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aACtD,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,mBAAW,CAAC,CAAC;aAC5C,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,mBAAW,CAAC,CAAC;aAC1D,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC1B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;aAC5B,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;SACzB,CAAC,CAAC;SAEF,mBAAc,GAAG;aACb,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;aAChC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;aACzB,IAAI,MAAM,GAAG,gBAAM,CAAC,eAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aACtD,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,mBAAW,CAAC,CAAC;aAC5C,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,mBAAW,CAAC,CAAC;aAC1D,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;aAC3B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;SAChC,CAAC,CAAC;SAEF,cAAS,GAAG;aAER,IAAI,MAAM,GAAO,EAAE,CAAC;aACpB,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;aAClC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;aAC9B,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;aACxC,MAAM,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;aAEpC,EAAE,CAAC,CAAC,eAAK,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;iBACvB,MAAM,CAAC,UAAU,GAAG,eAAK,CAAC,KAAK,CAAC,OAAO,CAAC;aAC5C,CAAC;aACD,MAAM,CAAC,MAAM,CAAC;SAClB,CAAC,CAAC;SApCE,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;KACvC,CAAC;KAoCL,iBAAC;AAAD,EAAC;AA9DY,iCAAU;AA8DtB,EAAC;;;;;;;;;ACjEF,wCAAqD;AACrD,sCAAoC;AACpC,iDAAiD;AAEjD;;;GAGE;AACF;KAAA;KAgEA,CAAC;KA9DS,6BAAe,GAAtB,UAAuB,WAAW,EAAE,SAAS,EAAE,cAAc;SAA7D,iBASE;SARG,MAAM,CAAC,YAAE,CAAC,GAAG,CAAC;aACV,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,SAAS,EAAE,cAAc,CAAC;aAC/D,gCAAc,CAAC,yBAAyB,CAAC,WAAW,CAAC;UACxD,CAAC,CAAC,IAAI,CAAC,iBAAO;aACX,IAAI,OAAO,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;aACzB,IAAI,QAAQ,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;aAC1B,MAAM,CAAC,KAAI,CAAC,cAAc,CAAC,OAAO,EAAC,QAAQ,CAAC,CAAC;SACjD,CAAC,CAAC,CAAC;KACP,CAAC;KAEM,wBAAU,GAAjB,UAAkB,MAAM;SACpB,MAAM,CAAC,IAAI,GAAG,gBAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;SACvC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,eAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SAEtC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;SAC3D,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;SAEvD,MAAM,CAAC,SAAS,GAAG,gBAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;SAC/D,MAAM,CAAC,OAAO,GAAG,gBAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;SAE3D,MAAM,CAAC,YAAY,GAAG,QAAQ,CAAC;SAC/B,MAAM,CAAC,MAAM,GAAC,IAAI,CAAC;SACnB,MAAM,CAAC,WAAW,GAAE,KAAK,CAAC;SAC1B,MAAM,CAAC,kBAAkB,GAAC,IAAI,CAAC;KACnC,CAAC;KAEM,oBAAM,GAAb,UAAc,IAAI;SACd,qBAAqB;SACrB,6DAA6D;SAC7D,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,eAAK,CAAC,YAAY,EAAC,MAAM,CAAC,CAAC;SAChD,EAAE,CAAC,CAAE,IAAI,GAAG,CAAC,IAAK,IAAI,GAAG,CAAC,CAAC,EAAC;aACxB,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;aAC7B,IAAI,CAAC,SAAS,CAAC,eAAK,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC,CAAC;aAC/C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;SAC1B,CAAC;SACD,MAAM,CAAC,IAAI,CAAC;KAChB,CAAC;KAEM,4BAAc,GAArB,UAAsB,OAAO,EAAC,QAAQ;SAAtC,iBAMC;SALG,WAAC,CAAC,IAAI,CAAC,OAAO,EAAC,gBAAM;aACjB,MAAM,CAAC,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;aAC5C,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;SAC5B,CAAC,CAAC,CAAC;SACH,MAAM,CAAC,OAAO,CAAC;KACnB,CAAC;KAEM,gCAAkB,GAAzB,UAA0B,WAAW,EAAE,SAAS,EAAE,cAAc;SAC5D,IAAI,KAAK,GAAG,gBAAM,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,iBAAS,CAAC,gBAAgB,CAAC,CAAC;SACtE,IAAI,GAAG,GAAG,gBAAM,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,iBAAS,CAAC,gBAAgB,CAAC,CAAC;SAEhF,IAAI,GAAG,GAAG,kCAAgC,WAAW,SAAI,KAAK,SAAI,GAAK,CAAC;SACxE,IAAI,MAAM,GAAG;aACT,MAAM,EAAG;iBACL,SAAS,EAAG,SAAS;cACxB;UACJ,CAAC;SACF,MAAM,CAAC,eAAK,CAAC,GAAG,CAAC,GAAG,EAAC,MAAM,CAAC,CAAC,IAAI,CAAC,gBAAM;aACpC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;SACvB,CAAC,CAAC,CAAC;KACP,CAAC;KAEL,oBAAC;AAAD,EAAC;AAhEY,uCAAa;AAgEzB,EAAC;;;;;;;;;ACvEF,wCAAkC;AAClC,+CAA+C;AAC/C,+CAA6C;AAE7C;;;IAGG;AACH;KAAA;KAgEA,CAAC;KA5DG;;;OAGE;KACK,wCAAyB,GAAhC,UAAiC,WAAW;SACxC,MAAM,CAAC,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;aACtD,IAAI,QAAQ,GAAG,MAAM,CAAC;aACtB,IAAI,OAAO,GAAG,EAAE,CAAC;aACjB,WAAC,CAAC,IAAI,CAAC,QAAQ,EAAC,iBAAO;iBACnB,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,OAAO,CAAC;aACzC,CAAC,CAAC,CAAC;aACH,MAAM,CAAC,OAAO,CAAC;SACnB,CAAC,CAAC,CAAC;KACP,CAAC;KAED;;;OAGE;KACK,mCAAoB,GAA3B,UAA4B,WAAW;SACnC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,EAAC;aAC3C,IAAI,GAAG,GAAG,mCAAiC,WAAa,CAAC;aACzD,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,WAAW,CAAC,GAAG,eAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,gBAAM;iBACjE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;aACvB,CAAC,CAAC,CAAC;SACP,CAAC;SACD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;KACpD,CAAC;KAGD;;;OAGE;KACK,gCAAiB,GAAxB,UAAyB,SAAS;SAC9B,IAAI,cAAc,GAAG,EAAE,CAAC;SACxB,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;aACZ,cAAc,GAAG,2BAA2B,CAAC;SACjD,CAAC;SAAA,IAAI,EAAC;aACF,cAAc,GAAG,sBAAsB,GAAG,4BAAY,CAAC,4BAA4B,EAAE,CAAC;SAC1F,CAAC;SAED,MAAM,CAAC,eAAK,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;aACzC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;SACvB,CAAC,CAAC,CAAC;KACP,CAAC;KAED;;OAEE;KACK,gCAAiB,GAAxB,UAAyB,OAAO;SAC5B,IAAI,MAAM,GAAG,IAAI,uBAAO,EAAE,CAAC;SAE3B,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC;SACjB,MAAM,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;SACrC,MAAM,CAAC,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC;SACpC,MAAM,CAAC,iBAAiB,GAAG,OAAO,CAAC,SAAS,CAAC;SAC7C,MAAM,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;SACvC,MAAM,CAAC,MAAM,CAAC;KAClB,CAAC;KA9DM,sBAAO,GAAG;SACb,cAAc,EAAE,EAAE;MACrB,CAAC;KA6DN,qBAAC;EAAA;AAhEY,yCAAc;;;;;;;;;ACT3B,wCAAgD;AAEhD;;;IAGG;AACH;KAAA;KAmDA,CAAC;KAjDS,yCAA4B,GAAnC;SACK,IAAI,YAAY,GAAG,EAAE,CAAC;SAEtB,eAAK,CAAC,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,UAAS,WAAW;aAC5C,YAAY,IAAI,WAAW,GAAG,GAAG,CAAC;SACtC,CAAC,CAAC,CAAC;SAEH,MAAM,CAAC,YAAY,CAAC;KACxB,CAAC;KAED;;;;QAIG;KACI,2CAA8B,GAArC,UAAsC,MAAM;SACxC,IAAI,WAAW,GAAG,MAAM,CAAC,KAAK,GAAG,IAAI,GAAG,eAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;SAC3E,IAAI,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC;SAEpC,wBAAwB;SACxB,EAAE,CAAC,CAAC,WAAW,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;aACnC,WAAW,IAAI,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC;SACxC,CAAC;SAED,2CAA2C;SAC3C,EAAE,CAAC,CAAC,WAAW,GAAG,GAAG,CAAC,CAAC,CAAC;aACpB,WAAW,IAAI,MAAM,GAAG;iBACpB,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;cACpC,GAAG,GAAG,GAAG;iBACN,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;cACpC,CAAC;aACF,WAAW,IAAI,MAAM,GAAG;iBACpB,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;cAClC,GAAG,GAAG,GAAG;iBACN,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;cAClC,CAAC;SACN,CAAC;SAED,gCAAgC;SAChC,EAAE,CAAC,CAAC,WAAW,GAAG,GAAG,IAAI,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;aAC3C,WAAW,IAAI,MAAM,GAAG,MAAM,CAAC,YAAY,CAAC;SAChD,CAAC;SAED,WAAW,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC;SAEjC,MAAM,CAAC,WAAW,CAAC;KACvB,CAAC;KAGL,mBAAC;AAAD,EAAC;AAnDY,qCAAY;AAmDxB,EAAC;;;;;;;;;ACzDF,wCAA+D;AAC/D,gDAAmD;AACnD,+CAAiD;AACjD,sCAAqC;AACrC,+CAA6C;AAC7C,oDAAuD;AAGvD;;;IAGG;AACH;KAAA;KAwHA,CAAC;KAtHU,wBAAU,GAAjB,UAAkB,iBAAiB,EAAC,YAAY,EAAC,YAAY,EAAC,OAAO,EAAE,QAAQ,EAAE,MAAM;SAAvF,iBAqBC;SAnBG,IAAI,KAAK,GAAG,gBAAM,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,iBAAS,CAAC,gBAAgB,CAAC,CAAC;SAC3E,IAAI,GAAG,GAAG,gBAAM,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,iBAAS,CAAC,gBAAgB,CAAC,CAAC;SAExF,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAC;aACV,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,iBAAS,CAAC,gBAAgB,CAAC,CAAC;aACpD,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAS,CAAC,gBAAgB,CAAC,CAAC;SACpD,CAAC;SAED,IAAI,aAAa,GAAG,mBAAiB,iBAAiB,SAAI,KAAK,SAAI,GAAG,MAAG,CAAC;SAE1E,EAAE,CAAC,CAAC,YAAY,IAAI,OAAO,CAAC,CAAC,CAAC;aAC1B,aAAa,IAAI,OAAO,CAAC;SAC7B,CAAC;SAAC,IAAI,CAAC,CAAC;aACJ,aAAa,IAAI,KAAK,CAAC;SAC3B,CAAC;SAED,MAAM,CAAC,eAAK,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;aACxC,MAAM,CAAC,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SACzC,CAAC,CAAC,CAAC;KACP,CAAC;KAEM,6BAAe,GAAtB,UAAuB,iBAAiB,EAAC,YAAY,EAAC,OAAO,EAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM;SAAxF,iBAgBC;SAdG,IAAI,KAAK,GAAG,gBAAM,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,iBAAS,CAAC,gBAAgB,CAAC,CAAC;SAC3E,IAAI,GAAG,GAAG,gBAAM,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,iBAAS,CAAC,gBAAgB,CAAC,CAAC;SACxF,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAC;aACV,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,iBAAS,CAAC,gBAAgB,CAAC,CAAC;aACpD,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAS,CAAC,gBAAgB,CAAC,CAAC;SACpD,CAAC;SACD,IAAI,IAAI,GAAG,OAAO,GAAG,SAAS,GAAG,UAAU,CAAC;SAC5C,IAAI,EAAE,GAAG,OAAO,GAAG,OAAO,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC;SAE9C,IAAI,aAAa,GAAG,4BAA0B,iBAAiB,SAAI,KAAK,SAAI,GAAG,SAAI,IAAI,SAAI,EAAI,CAAC;SAEhG,MAAM,CAAC,eAAK,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;aACxC,MAAM,CAAC,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SACzC,CAAC,CAAC,CAAC;KACP,CAAC;KAED;;OAEE;KACK,yBAAW,GAAlB,UAAmB,OAAO;SAA1B,iBAIC;SAHG,MAAM,CAAC,WAAC,CAAC,GAAG,CAAC,OAAO,EAAC,UAAC,UAAU;aAC5B,MAAM,CAAC,KAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;SACtC,CAAC,CAAC,CAAC;KACP,CAAC;KAED;;OAEE;KACK,uBAAS,GAAhB,UAAiB,UAAU;SACvB,IAAI,eAAe,GAAG,EAAE,CAAC;SAEzB,+CAA+C;SAC/C,eAAe;SACf,EAAE,CAAC,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC;aAC1B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;iBACtD,IAAI,QAAQ,GAAG,IAAI,yBAAQ,EAAE,CAAC;iBAC9B,QAAQ,CAAC,EAAE,GAAG,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;iBACzC,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;iBACpD,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC,4CAA4C;iBACrE,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACnC,CAAC;SACL,CAAC;SAED,IAAI,MAAM,GAAQ;aACd,uCAAuC;aACvC,GAAG,EAAG,UAAU,CAAC,SAAS;aAC1B,EAAE,EAAE,UAAU,CAAC,SAAS;aACxB,KAAK,EAAE,UAAU,CAAC,YAAY;aAC9B,QAAQ,EAAE,eAAK,CAAC,SAAS,CAAC,SAAS,CAAC,EAAC,EAAE,EAAE,UAAU,CAAC,WAAW,EAAC,CAAC;aACjE,UAAU,EAAE,UAAU,CAAC,WAAW;aAClC,aAAa,EAAE,UAAU,CAAC,cAAc;aACxC,YAAY,EAAE,UAAU,CAAC,aAAa;aACtC,WAAW,EAAE,UAAU,CAAC,kBAAkB;aAC1C,OAAO,EAAE,eAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAC,EAAE,EAAE,UAAU,CAAC,UAAU,EAAC,CAAC;aAC9D,SAAS,EAAE,UAAU,CAAC,UAAU;aAChC,YAAY,EAAE,UAAU,CAAC,aAAa;aACtC,WAAW,EAAE,UAAU,CAAC,oBAAoB;aAC5C,WAAW,EAAE,UAAU,CAAC,SAAS;aACjC,IAAI,EAAE,gBAAM,CAAC,UAAU,CAAC,WAAW,CAAC;aACpC,SAAS,EAAE,UAAU,CAAC,iBAAiB;aACvC,OAAO,EAAE,UAAU,CAAC,eAAe;aACnC,KAAK,EAAE,UAAU,CAAC,YAAY;aAC9B,IAAI,EAAE,UAAU,CAAC,WAAW;aAC5B,WAAW,EAAE,UAAU,CAAC,iBAAiB;aACzC,WAAW,EAAE,gBAAM,CAAC,UAAU,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,UAAU,CAAC,iBAAiB,CAAC;aAC9F,SAAS,EAAE,gBAAM,CAAC,UAAU,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,UAAU,CAAC,eAAe,CAAC;aAC1F,KAAK,EAAE,UAAU,CAAC,YAAY;aAC9B,WAAW,EAAE,KAAK;aAClB,SAAS,EAAE,eAAe;aAC1B,WAAW,EAAE,EAAE;aACf,MAAM,EAAE,CAAC,CAAC,eAAK,CAAC,OAAO,EAAE,CAAC,GAAG,IAAI,GAAG,UAAU,CAAC,MAAM;UACxD,CAAC;SACF,MAAM,CAAC,OAAO,GAAG,IAAI,uBAAO,EAAE,CAAC;SAC/B,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,UAAU,CAAC,aAAa,CAAC;SAChD,MAAM,CAAC,OAAO,CAAC,EAAE,GAAG,UAAU,CAAC,UAAU,CAAC;SAC1C,MAAM,CAAC,OAAO,CAAC,UAAU,GAAG,UAAU,CAAC,oBAAoB,CAAC;SAE5D,EAAE,EAAC,OAAO,KAAK,MAAM,CAAC,YAAY,CAAC,EAAC;aAChC,MAAM,CAAC,iBAAiB,GAAG,eAAI,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;SACtE,CAAC;SAAC,IAAI,CAAC,CAAC;aACJ,MAAM,CAAC,iBAAiB,GAAG,eAAI,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;SACtE,CAAC;SAED,EAAE,CAAC,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC;aACzB,MAAM,CAAC,WAAW,GAAG,sCAAiB,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC;SAC/F,CAAC;SAED,MAAM,CAAC,WAAW,GAAG,4BAAY,CAAC,8BAA8B,CAAC,MAAM,CAAC,CAAC;SACzE,MAAM,CAAC,MAAM,CAAC;KAClB,CAAC;KAIL,oBAAC;AAAD,EAAC;AAxHY,uCAAa;AAwHzB,EAAC;;;;;;;;;ACpIF,wCAA6B;AAC7B,kDAAqD;AAErD;;;IAGG;AACH;KAAA;KAmBA,CAAC;KAlBG;;OAEE;KACK,iCAAe,GAAtB,UAAuB,YAAY;SAC/B,MAAM,CAAC,WAAC,CAAC,GAAG,CAAC,YAAY,EAAC,UAAC,eAAe;aACtC,IAAI,GAAG,GAAG,IAAI,6BAAU,EAAE,CAAC;aAC3B,GAAG,CAAC,EAAE,GAAG,eAAe,CAAC,EAAE,CAAC;aAC5B,GAAG,CAAC,OAAO,GAAG,eAAe,CAAC,OAAO,CAAC;aACtC,GAAG,CAAC,aAAa,GAAG,eAAe,CAAC,aAAa,CAAC;aAClD,GAAG,CAAC,WAAW,GAAG,eAAe,CAAC,WAAW,CAAC;aAC9C,GAAG,CAAC,cAAc,GAAG,eAAe,CAAC,cAAc,CAAC;aAEpD,MAAM,CAAC,GAAG,CAAC;SACf,CAAC,CAAC,CAAC;KACP,CAAC;KAIL,wBAAC;AAAD,EAAC;AAnBY,+CAAiB;AAmB7B,EAAC;;;;;;;;;AC1BF;;;;;;IAMG;AACH;KAAA;SACI;;;YAGG;SACH,OAAE,GAAG,IAAI,CAAC;SAEV,YAAO,GAAG,IAAI,CAAC;SACf;;;;;YAKG;SACH,gBAAW,GAAG,IAAI,CAAC;SACnB;;;YAGG;SACH,kBAAa,GAAG,IAAI,CAAC;SACrB;;;YAGG;SACH,mBAAc,GAAG,IAAI,CAAC;SAGtB;;YAEG;SACH,aAAQ,GAAG;aACP,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,sBAAsB,GAAG,IAAI,CAAC,WAAW,CAAC;SAC5F,CAAC,CAAC;SAEF;;;;;;YAMG;SACH,mBAAc,GAAG,UAAU,IAAI,EAAE,EAAE,EAAE,GAAG;aAEpC,IAAI,IAAI,GAAG,IAAI,CAAC;aAEhB,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;iBAE3B,IAAI,kBAAkB,GAAG,IAAI,KAAK,EAAE,CAAC;iBAErC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,UAAU;qBACzC,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,WAAW,KAAK,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;yBAC5D,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;qBACxC,CAAC;iBACL,CAAC,CAAC,CAAC;iBAEH,IAAI,CAAC,WAAW,GAAG,kBAAkB,CAAC;iBAEtC,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;qBAC3B,EAAE,EAAE,CAAC;iBACT,CAAC;iBAAC,IAAI;qBAAC,CAAC,OAAO,GAAG,KAAK,UAAU,CAAC;iBAClC,CAAC;qBACG,GAAG,EAAE,CAAC;iBACV,CAAC;aACL,CAAC;SACL,CAAC,CAAC;KACN,CAAC;KAAD,iBAAC;AAAD,EAAC;AAjEY,iCAAU;AAiEtB,EAAC;;;;;;;;;ACxEF,wCAAkC;AAGlC;KAAA;KAaA,CAAC;KAVU,sBAAQ,GAAf,UAAgB,KAAK;SACjB,IAAI,MAAM,GAAG,KAAK,CAAC;SACnB,WAAC,CAAC,IAAI,CAAC,eAAK,CAAC,EAAE,CAAC,iBAAiB,EAAC,UAAC,gBAAgB;aAC/C,EAAE,CAAC,CAAC,gBAAgB,CAAC,WAAW,KAAK,KAAK,CAAC,EAAC;iBACxC,MAAM,GAAC,IAAI,CAAC;aAChB,CAAC;SACL,CAAC,CAAC,CAAC;SACH,MAAM,CAAC,MAAM,CAAC;KAClB,CAAC;KAEL,oBAAC;AAAD,EAAC;AAbY,uCAAa;;;;;;;;;ACH1B,wCAAqD;AAErD;;;GAGE;AACF;KAAA;KA6DA,CAAC;KAzDU,iCAAiB,GAAxB,UAAyB,gBAAgB;SACrC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,UAAC,OAAO;aACpD,IAAI,MAAM,GAAG,EAAE,CAAC;aAChB,WAAC,CAAC,IAAI,CAAC,OAAO,EAAC,UAAC,MAAM;iBAClB,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC;aACjC,CAAC,CAAC,CAAC;aACH,MAAM,CAAC,MAAM,CAAC;SAClB,CAAC,CAAC,CAAC;KACP,CAAC;KAED;;OAEE;KACK,4BAAY,GAAnB,UAAoB,gBAAgB;SAApC,iBA8BC;SA7BG,kEAAkE;SAClE,IAAI,SAAS,GAAG,EAAE,CAAC;SACnB,WAAC,CAAC,IAAI,CAAC,gBAAgB,EAAC,UAAC,WAAW;aAEhC,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,EAAC;iBAC7C,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;iBAChD,IAAI,GAAG,GAAG,yBAAuB,WAAa,CAAC;iBAC/C,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,CAAC,GAAG,eAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;qBACpE,MAAM,CAAC;yBACH,WAAW,EAAG,WAAW;yBACzB,aAAa,EAAG,MAAM,CAAC,IAAI;sBAC9B,CAAC;iBACN,CAAC,CAAC,CAAC;aACP,CAAC;aACD,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,CAAC;SAE/D,CAAC,CAAC,CAAC;SAEH,kBAAkB;SAClB,MAAM,CAAC,YAAE,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAC,OAAO;aAClC,IAAI,MAAM,GAAG,EAAE,CAAC;aAChB,WAAC,CAAC,IAAI,CAAC,OAAO,EAAC,CAAC,eAAK;iBACjB,IAAI,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC;iBACpC,IAAI,aAAa,GAAG,KAAK,CAAC,aAAa,CAAC;iBACxC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,KAAI,CAAC,YAAY,CAAC,aAAa,CAAC,OAAO,EAAC,WAAW,CAAC,CAAC,CAAC;aACjF,CAAC,CAAC,CAAC,CAAC;aACJ,MAAM,CAAC,MAAM,CAAC;SAClB,CAAC,CAAC,CAAC;KAEP,CAAC;KAED;;OAEE;KACK,4BAAY,GAAnB,UAAoB,OAAO,EAAC,WAAW;SACnC,MAAM,CAAC,WAAC,CAAC,GAAG,CAAC,OAAO,EAAG,UAAC,QAAQ;aAC5B,QAAQ,CAAC,WAAW,GAAG,WAAW,CAAC;aACnC,QAAQ,CAAC,IAAI,GAAG,OAAO,CAAC;aACxB,QAAQ,CAAC,SAAS,GAAG,eAAI,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;aAC5D,MAAM,CAAC,QAAQ,CAAC;SACpB,CAAC,CAAC,CAAC;KACP,CAAC;KA1DM,uBAAO,GAAG;SACb,gBAAgB,EAAE,EAAE;MACvB;KA0DL,sBAAC;EAAA;AA7DY,2CAAe;AA6D3B,EAAC","file":"./application.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d2fb014452ec64ee12c2","import { angular, ng, model, moment, _, calendar, Model } from 'entcore';\r\nimport {DiaryController} from './controller';\r\n\r\nng.controllers.push(DiaryController);\r\n\r\n\r\nexport const AngularExtensions = {\r\n    moduleConfigs : [],\r\n    addModuleConfig : function(callBack){\r\n        this.moduleConfigs.push(callBack);\r\n    },\r\n    init: function (module) {\r\n        angular.forEach(this.moduleConfigs,function(moduleConfig){\r\n            moduleConfig.apply(this,[module]);\r\n\r\n        });\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/app.ts","module.exports = entcore;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"entcore\"\n// module id = 1\n// module chunks = 0 1","import { ng, angular, model, moment, _, notify, template } from 'entcore';\r\nimport { syncLessonsAndHomeworks, syncHomeworks} from './tools';\r\n\r\n\r\nimport {Homework} from './model/Homework.model';\r\nimport {Lesson} from './model/Lesson.model';\r\nimport {PedagogicItem} from './model/PedagogicItem.model';\r\nimport {CourseService} from \"./service/courses.service\";\r\nimport {LessonService} from \"./service/lessons.service\";\r\nimport {SecureService} from \"./directives/secure/secure.service\";\r\nimport {AudienceService} from \"./service/audiences.service\";\r\n\r\n\r\n\r\n/**\r\n * Date calendar pattern for url date parsing\r\n * @type {string}\r\n */\r\nconst CAL_DATE_PATTERN = \"YYYY-MM-DD\";\r\n\r\n/**\r\n *\r\n * @param $scope\r\n * @param template\r\n * @param model\r\n * @param route\r\n * @param $location\r\n * @constructor\r\n */\r\n\r\nexport let DiaryController = ng.controller('DiaryController', [\r\n    '$scope', '$rootScope', 'model', 'route', '$location', '$window', 'constants', '$sce',\r\n    function ($scope, $rootScope, model, route, $location, $window,constants,$sce) {\r\n\r\n    model.CourseService = CourseService;\r\n    model.LessonService = LessonService;\r\n    $scope.constants = constants;\r\n    $scope.RIGHTS = constants.RIGHTS;\r\n    $rootScope.model = model;\r\n\r\n    $rootScope.currentRightPanelVisible = undefined ;//= 'test';\r\n\r\n    $rootScope.$on('edit-homework',(_,data)=>{\r\n        window.location.href = window.location.host+'/diary#/editHomeworkView/' + data.id;\r\n        //$scope.openHomeworkView (data);\r\n    });\r\n\r\n\r\n    $scope.currentErrors = [];\r\n    if (!model.filters){\r\n        model.filters = {};\r\n    }\r\n    $scope.data = {\r\n        tabSelected: 'lesson'\r\n    };\r\n\r\n    $scope.tabs = {\r\n        createLesson: 'lesson'\r\n    };\r\n\r\n    $rootScope.redirect = function (path) {\r\n        $location.path(path);\r\n    };\r\n\r\n    $rootScope.trusthtml = function(txt){\r\n        return $sce.trustAsHtml(txt);\r\n    };\r\n\r\n    $rootScope.validationError = function(e) {\r\n        if (typeof e !== 'undefined') {\r\n            notify.error(e.error);\r\n            $rootScope.currentErrors=[];\r\n            $rootScope.currentErrors.push(e);\r\n            $rootScope.$apply();\r\n        }\r\n    };\r\n\r\n    $scope.lessonDescriptionIsReadOnly = false;\r\n    $scope.homeworkDescriptionIsReadOnly = false;\r\n\r\n    $scope.calendarLoaded = false;\r\n    /**\r\n     * Used when refreshing calendar\r\n     * @type {boolean}\r\n     */\r\n    $scope.showCal = false;\r\n    /**\r\n     * If false hides the grid/content of calendar,\r\n     * only remains the days at top\r\n     * @type {boolean}\r\n     */\r\n    $scope.showCalGrid = true;\r\n    // for static access to some global function\r\n    $scope.newLesson = new Lesson();\r\n    $scope.newHomework = new Homework();\r\n    $scope.newPedagogicItem = new PedagogicItem();\r\n\r\n\t// variables for show list\r\n\t$scope.pedagogicLessonsSelected \t= new Array();\r\n\t$scope.pedagogicHomeworksSelected \t= new Array();\r\n\r\n    $scope.getStaticItem = function(itemType) {\r\n        if ($scope.display.showList == true) {\r\n            $scope.newPedagogicItem.type_item = itemType;\r\n            return $scope.newPedagogicItem;\r\n        } else if (itemType === \"lesson\") {\r\n            return $scope.newLesson;\r\n        } else {\r\n            return $scope.newHomework;\r\n        }\r\n    };\r\n\r\n    $scope.confirmPanel = {\r\n        item: undefined\r\n    };\r\n\r\n    $scope.display = {\r\n        showPanel: false,\r\n        showShareLessonPanel: false,\r\n        showShareHomeworkPanel: false,\r\n        showList: false,\r\n        hideHomeworkPanel: false,\r\n        hideCalendar : false\r\n    };\r\n\r\n\r\n\r\n    $scope.lessons = model.lessons;\r\n    $scope.audiences = model.audiences;\r\n    $scope.subjects = model.subjects;\r\n    $scope.homeworkTypes = model.homeworkTypes;\r\n    $scope.homeworks = model.homeworks;\r\n    $scope.homeworksLoad = model.homeworksLoad;\r\n    $scope.childs = model.childs;\r\n    $scope.child = model.child;\r\n    $scope.pedagogicDays = model.pedagogicDays;\r\n\r\n    // Says whether or not current user can edit homework & lesson\r\n    $scope.isLessonHomeworkEditable = model.canEdit();\r\n\r\n    // Says whether or not current user is a teacher\r\n    $scope.isUserTeacher = model.isUserTeacher();\r\n\r\n    // Says whether or not current user is a parent\r\n    $scope.isUserParent = model.isUserParent();\r\n\r\n    $scope.searchForm = model.searchForm;\r\n\r\n    // variable used to track number of call back calls (see publishCB)\r\n    $scope.cbCount = 0;\r\n\r\n    $scope.selectedDueDate = undefined; // date selected in list view. It can allow to init homework on a different due_date.\r\n\r\n    initAudiences();\r\n    route({\r\n        showHistoryView:function(params){\r\n            template.open('main', 'show-history');\r\n        },\r\n        manageVisaView: function (params) {\r\n            template.open('main', 'visa-manager');\r\n        },\r\n        progressionEditLesson:function(params){\r\n          template.open('main', 'progression-edit-lesson');\r\n        },\r\n        progressionManagerView: function (params) {\r\n            template.open('main', 'progression-manager');\r\n        },\r\n        createLessonView: function (params) {\r\n                //$scope.lesson = null;\r\n                $scope.lessonDescriptionIsReadOnly = false;\r\n                $scope.homeworkDescriptionIsReadOnly = false;\r\n                //$scope.openLessonView(null, params);\r\n\r\n                template.open('main', 'main');\r\n                if (SecureService.hasRight(constants.RIGHTS.CREATE_LESSON)){\r\n                  template.open('main-view', 'create-lesson');\r\n              }\r\n        },\r\n        createHomeworkView: function () {\r\n            $scope.homework = null;\r\n            $scope.homeworkDescriptionIsReadOnly = false;\r\n            $scope.openHomeworkView(null);\r\n        },\r\n        editLessonView: function(params) {\r\n            template.open('main', 'main');\r\n            if (SecureService.hasRight(constants.RIGHTS.CREATE_LESSON)){\r\n              template.open('main-view', 'create-lesson');\r\n            }else{\r\n                template.open('main-view', 'view-lesson');\r\n            }\r\n        },\r\n        showLessonView: function(params) {\r\n            template.open('main', 'main');\r\n            template.open('main-view', 'view-lesson');\r\n        },\r\n        editHomeworkView: function(params) {\r\n            loadHomeworkFromRoute(params);\r\n        },\r\n        calendarView: function (params) {\r\n            template.open('main', 'main');\r\n            template.open('main-view', 'calendar');\r\n            template.open('daily-event-details', 'daily-event-details');\r\n            model.selectedViewMode = '/diary/public/js/calendar/calendar-view.template.html';\r\n        },\r\n        listView: function(){\r\n            template.open('main', 'main');\r\n            template.open('main-view', 'calendar');\r\n            model.selectedViewMode = '/diary/public/js/calendar/list-view.template.html';\r\n        },\r\n        mainView: function(){\r\n            if ($scope.display.showList) {\r\n                $scope.goToListView(null);\r\n            } else {\r\n                $scope.goToCalendarView(null);\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    $scope.setLessonDescriptionMode = function(homeworkId) {\r\n        if ($scope.lessonDescriptionIsReadOnly) {\r\n            $scope.lessonDescriptionIsReadOnly = false;\r\n        }\r\n        else {\r\n            $scope.lessonDescriptionIsReadOnly = true;\r\n        }\r\n    };\r\n\r\n\r\n\t/**\r\n     * Permet de switcher entre l'aperçu  et l'édition de la description d'un devoir d'une leçon\r\n     */\r\n\t$scope.changeHomeworkDescriptionMode = function(homeworkId, apercu) {\r\n\t\tvar editor = $('#edit_' + homeworkId);\r\n\t\tvar ro = $('#descr_' + homeworkId);\r\n\t\tvar btnApercu = $('#btn_apercu_' + homeworkId);\r\n\t\tvar btnEdit = $('#btn_edit_' + homeworkId);\r\n\r\n\t\tif (apercu) {\r\n\t\t\teditor.hide();\r\n\t\t\tbtnApercu.hide();\r\n\t\t\tro.show();\r\n\t\t\tbtnEdit.show();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tro.hide();\r\n\t\t\tbtnEdit.hide();\r\n\t\t\teditor.show();\r\n\t\t\tbtnApercu.show();\r\n\t\t}\r\n  };\r\n\r\n    /**\r\n     * Permet d'afficher un aperçu de la description d'une leçon en readonly\r\n     */\r\n    $scope.setLessonDescriptionMode = function() {\r\n        if ($scope.lessonDescriptionIsReadOnly) {\r\n            $scope.lessonDescriptionIsReadOnly = false;\r\n        }\r\n        else {\r\n            $scope.lessonDescriptionIsReadOnly = true;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Permet d'afficher un aperçu de la description d'un TAF en readonly\r\n     */\r\n    $scope.setHomeworkDescriptionMode = function() {\r\n        if ($scope.homeworkDescriptionIsReadOnly) {\r\n            $scope.homeworkDescriptionIsReadOnly = false;\r\n        }\r\n        else {\r\n            $scope.homeworkDescriptionIsReadOnly = true;\r\n        }\r\n    };\r\n\r\n\r\n    // Navigation\r\n    $scope.showList = function() {\r\n        $scope.display.showList = true;\r\n        if($scope.isUserTeacher) {\r\n            model.searchForm.initForTeacher();\r\n        } else {\r\n            model.searchForm.initForStudent();\r\n        }\r\n\r\n        $scope.selectedDueDate = undefined;\r\n        model.pedagogicDays.syncPedagogicItems($scope.openListView, $rootScope.validationError);\r\n    };\r\n\r\n    $scope.openListView = function () {\r\n        if(!$scope.isUserTeacher) {\r\n            model.initSubjects();\r\n        } else {\r\n            model.initSubjects();\r\n        }\r\n        template.open('main', 'main');\r\n        template.open('main-view', 'list-view');\r\n        $scope.$apply();\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * @param pedagogicItem\r\n     * @param newWindow if true will open item detail in new windows else in same window\r\n     */\r\n    $scope.goToItemDetail = function(pedagogicItem, newWindow) {\r\n        var url = \"\";\r\n\r\n        if (pedagogicItem.type_item === 'lesson') {\r\n\r\n            url = pedagogicItem.locked ? \"/showLessonView/\" + pedagogicItem.id + \"/\" : \"/editLessonView/\" + pedagogicItem.id + \"/\";\r\n        } else {\r\n            // open lesson view if homework is attached to a lesson\r\n            if (pedagogicItem.lesson_id) {\r\n                // set default tab to homework tab\r\n                $scope.tabs.createLesson = 'homeworks';\r\n                url = \"/editLessonView/\" + pedagogicItem.lesson_id + \"/\" + pedagogicItem.id;\r\n            } else {\r\n                url = \"/editHomeworkView/\" + pedagogicItem.id;\r\n            }\r\n        }\r\n\r\n        if(newWindow){\r\n            $window.open('/diary#' + url);\r\n        } else {\r\n            $location.url(url);\r\n        }\r\n\r\n    };\r\n\r\n    //list-view interactions\r\n    $scope.selectDay = function(day) {\r\n        model.unselectDays();\r\n        day.selected = true;\r\n        $scope.selectedDueDate = moment(day.dayName, \"dddd DD MMMM YYYY\");\r\n    };\r\n\r\n    $rootScope.back=function(){\r\n      $window.history.back();\r\n    };\r\n\r\n    var loadHomeworkFromRoute = function(params) {\r\n        // try find homework in current week homeworks cache\r\n        var homework = model.homeworks.findWhere({ id: parseInt(params.idHomework)});\r\n\r\n        if (homework != null) {\r\n            $scope.homeworkDescriptionIsReadOnly = false;\r\n            $scope.openHomeworkView(homework);\r\n        }\r\n        // load from db\r\n        else {\r\n            homework = new Homework();\r\n            homework.id = parseInt(params.idHomework);\r\n\r\n            homework.load(function(){\r\n                $scope.homeworkDescriptionIsReadOnly = false;\r\n                $scope.openHomeworkView(homework, params);\r\n            }, function(cbe){\r\n                notify.error(cbe.message);\r\n            });\r\n        }\r\n    };\r\n\r\n\r\n    $scope.openHomeworkView = function(homework, params){\r\n\r\n        if (homework) {\r\n            if (!$scope.homework) {\r\n                $scope.homework = new Homework();\r\n            }\r\n\r\n            $scope.homework.updateData(homework);\r\n            $scope.newItem = {\r\n                date: $scope.homework.date\r\n            };\r\n        } else {\r\n            var dueDate = $scope.selectedDateInTheFuture();\r\n            initHomework(dueDate);\r\n        }\r\n\r\n        $scope.showHomeworksLoad($scope.homework, null);\r\n\r\n        template.open('main', 'main');\r\n        if (!$scope.isLessonHomeworkEditable){\r\n            template.open('main-view', 'view-homework');\r\n        }\r\n        else{\r\n            template.open('main-view', 'create-homework');\r\n            template.open('homeworks-load', 'homeworks-load');\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Switch to main view (list or calendar)\r\n     * @param cb Callback function\r\n     */\r\n    $scope.goToMainView = function (cb) {\r\n        $location.path('/mainView');\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Go to list view\r\n     * @param cb\r\n     */\r\n    $scope.goToListView = function (cb) {\r\n        console.warn('reprecated');\r\n        return;\r\n        /*//TODO delete\r\n        $location.path('/listView');*/\r\n    };\r\n\r\n    /**\r\n     * Switch to calendar view\r\n     * @param firstMonday First monday formatted as DD/MM/YYYY'\r\n     * @param cb Callback function\r\n     */\r\n    $scope.goToCalendarView = function (firstMonday, cb) {\r\n\r\n        var calendarViewPath = '/calendarView';\r\n\r\n        if (typeof firstMonday != 'undefined' && firstMonday != null) {\r\n            calendarViewPath += '/' + firstMonday;\r\n        } else {\r\n            if (model.calendar && model.calendar.week) {\r\n                calendarViewPath += '/' + moment().week(model.calendar.week).weekday(0).format(CAL_DATE_PATTERN);\r\n            } else {\r\n                calendarViewPath += '/' + moment().weekday(0).format(CAL_DATE_PATTERN);\r\n            }\r\n        }\r\n\r\n        $location.path(calendarViewPath);\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Deletes selected items (lessons or homeworks)\r\n     * in calendar view from database\r\n     */\r\n    $scope.deleteSelectedItems = function () {\r\n        var selectedLessons = $scope.getSelectedPedagogicItems('lesson');\r\n        var selectedHomeworks = $scope.getSelectedPedagogicItems('homework');\r\n\r\n        if ((selectedLessons.length + selectedHomeworks.length) === 0) {\r\n            notify.error('daily.nohomeworkorlesson.selected');\r\n            return;\r\n        }\r\n\r\n        var selectHomeworksToBeDeleted = function (selectedHomeworks, selectedLessonsId) {\r\n            return selectedHomeworks.filter(function (homework) {\r\n                return homework.lesson_id == null || !_.contains(selectedLessonsId, homework.lesson_id);\r\n            });\r\n        };\r\n\r\n        var postDelete = function(){\r\n            notify.info('item.deleted');\r\n            $scope.closeConfirmPanel();\r\n            $rootScope.$broadcast('refresh-list');\r\n            $scope.$apply();\r\n        };\r\n\r\n        var deleteHomeworks = function(){\r\n            $scope.getStaticItem('homework').deleteList(homeworksToDelete, postDelete,\r\n                // calback error function\r\n                function (cbe) {notify.error(cbe.message)}\r\n            );\r\n        };\r\n\r\n        // remove pending delete homeworks\r\n        // ever embedded in selected pending delete lessons\r\n        var lessonIds = model.getItemsIds(selectedLessons);\r\n        var homeworksToDelete = selectHomeworksToBeDeleted(selectedHomeworks, lessonIds);\r\n\r\n        // note: associated homeworks are automatically deleted\r\n        // sql delete cascade\r\n        if (selectedLessons.length > 0) {\r\n            $scope.getStaticItem('lesson').deleteList(selectedLessons,\r\n                function () {\r\n                    if (homeworksToDelete.length > 0) {\r\n                        deleteHomeworks();\r\n                    } else {\r\n                        postDelete();\r\n                    }\r\n                },\r\n                // calback error function\r\n                function (cbe) {\r\n                    notify.error(cbe.message)\r\n                }\r\n            );\r\n        } else {\r\n            deleteHomeworks();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Open selected lesson or homework\r\n     */\r\n    $scope.editSelectedItem = function () {\r\n\r\n        var selectedLessons = $scope.getSelectedPedagogicItems('lesson');\r\n        var selectedLesson = selectedLessons.length > 0 ? selectedLessons[0] : null;\r\n\r\n        var selectedHomeworks = $scope.getSelectedPedagogicItems('homework');\r\n        var selectedHomework = selectedHomeworks.length > 0 ? selectedHomeworks[0] : null;\r\n\r\n        if (selectedHomework && selectedLesson) {\r\n            notify.error('Only one homework or lesson must be selected');\r\n            return;\r\n        }\r\n\r\n        if (selectedLesson) {\r\n            $rootScope.redirect('/editLessonView/' + selectedLesson.id + '/');\r\n        } else if (selectedHomework) {\r\n            // open lesson view if homework is attached to a lesson\r\n            if (selectedHomework.lesson_id) {\r\n                // set default tab to homework tab\r\n                $scope.tabs.createLesson = 'homeworks';\r\n                $rootScope.redirect('/editLessonView/' + selectedHomework.lesson_id + '/' + selectedHomework.id);\r\n            } else {\r\n                $rootScope.redirect('/editHomeworkView/' + selectedHomework.id);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Create homework and publishes it\r\n     * @param homework Homework being created\r\n     * @param isPublish\r\n     * @param goMainView\r\n     */\r\n    $scope.createAndPublishHomework = function (homework, isPublish, goMainView) {\r\n        $scope.createOrUpdateHomework(false, function () {\r\n            $scope.publishHomeworkAndGoCalendarView(homework, isPublish);\r\n        });\r\n    };\r\n\r\n\r\n    /**\r\n     * un/Publish selected lessons\r\n     */\r\n    $scope.publishSelectedLessons = function (isPublish) {\r\n        $scope.currentErrors = [];\r\n        var notifyKey = isPublish ? 'item.published' : 'item.unpublished';\r\n        return $scope.publishLessons($scope.getSelectedPedagogicItems('lesson'), isPublish, notifyKey);\r\n    };\r\n\r\n    /**\r\n     * Publishes or unpublishes lesson and go back to main view\r\n     * @param lesson Lesson\r\n     * @param isPublish if true publishes lesson else un-publishes it\r\n     */\r\n    $scope.publishLessonAndGoCalendarView = function (lesson, isPublish) {\r\n        var lessons = [];\r\n        lessons.push(lesson);\r\n        var notifyKey = isPublish ? 'lesson.published' : 'lesson.unpublished';\r\n        return $scope.publishLessons(lessons, isPublish, notifyKey).then(()=>{\r\n            $scope.goToMainView();\r\n        });\r\n    };\r\n\r\n    $scope.publishLesson = function (lesson, isPublish) {\r\n        var lessons = [];\r\n        lessons.push(lesson);\r\n        var notifyKey = isPublish ? 'lesson.published' : 'lesson.unpublished';\r\n        return $scope.publishLessons(lessons, isPublish, notifyKey);\r\n    };\r\n\r\n    /**\r\n     * Publish lessons\r\n     * @param lessons Array of lessons to publish or unpublish\r\n     * @param isPublish if true publishes the lessons else unpublishes them\r\n     * @param cb Callback function\r\n     * which is lesson id to delete\r\n     */\r\n    $scope.publishLessons = function (lessons, isPublish, notifyKey, cb) {\r\n        $scope.currentErrors = [];\r\n        $scope.processingData = true;\r\n\r\n        return model.publishLessons({ids:model.getItemsIds(lessons)}, isPublish, publishCB(lessons, isPublish, notifyKey, cb), function (e) {\r\n            $scope.processingData = false;\r\n            $rootScope.validationError(e);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Publishes or unpublishes homework and go back to main view\r\n     * @param homework Homework\r\n     * @param isPublish if true publishes homework else un-publishes it\r\n     */\r\n    $scope.publishHomeworkAndGoCalendarView = function (homework, isPublish) {\r\n        var homeworks = [];\r\n        homeworks.push(homework);\r\n        var notifyKey = isPublish ? 'item.published' : 'item.unpublished';\r\n        $scope.publishHomeworks(homeworks, isPublish, notifyKey).then(()=>{\r\n            $scope.goToMainView();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Publish or un-publishes homeworks\r\n     * @param homeworks Array of homeworks to publish or unpublish\r\n     * @param isPublish If true publishes lesson else unpublishes it\r\n     * @param cb Callback function\r\n     */\r\n    $scope.publishHomeworks = function (homeworks, isPublish, cb) {\r\n        $scope.currentErrors = [];\r\n        $scope.processingData = true;\r\n\r\n        var notifyKey = isPublish ? 'item.published' : 'item.unpublished';\r\n        return model.publishHomeworks({ids:model.getItemsIds(homeworks)}, isPublish, publishCB(homeworks, isPublish, notifyKey, cb), function (e) {\r\n            $scope.processingData = false;\r\n            $rootScope.validationError(e);\r\n        });\r\n\r\n    };\r\n\r\n    /**\r\n     * Callback method after publishing a lesson, homework or mixed list of items\r\n     * @param list items to publish\r\n     * @param toPublish If true publishes lesson else unpublishes it\r\n     * @param notifyKey i18n key used to notify the user at the end of processing\r\n     * @param cb calback function\r\n     */\r\n    var publishCB = function (list, toPublish, notifyKey, cb?) {\r\n        list.forEach(function (item) {\r\n            item.changeState(toPublish);\r\n            item.selected=false;\r\n        });\r\n\r\n        $scope.cbCount--;\r\n        $scope.closeConfirmPanel();\r\n\r\n        if ($scope.cbCount <= 0 ){\r\n            $scope.cbCount = 0; // can't let cbCount go on negative to impact future calls.\r\n            notify.info(notifyKey);\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * Load homeworks for current lesson being edited\r\n     * @param cb Callback function\r\n     */\r\n    $scope.loadHomeworksForCurrentLesson = function (cb) {\r\n        console.warn(\"deprecated\");\r\n        return;\r\n        /*\r\n        // lesson not yet created do not retrieve homeworks\r\n        if(!$scope.lesson.id){\r\n            return;\r\n        }\r\n\r\n        var needSqlSync = false;\r\n\r\n        // if homeworks ever retrieved from db don't do it again!\r\n        $scope.lesson.homeworks.forEach(function (homework) {\r\n            if (!homework.loaded) {\r\n                needSqlSync = true;\r\n            }\r\n        });\r\n\r\n        // only reload homeworks if necessary\r\n        if (needSqlSync) {\r\n            model.loadHomeworksForLesson($scope.lesson,\r\n\r\n                function () {\r\n                    if (typeof cb !== 'undefined') {\r\n                        cb();\r\n                    }\r\n                    $scope.$apply();\r\n                }, function (e) {\r\n                    $rootScope.validationError(e);\r\n                });\r\n        } else {\r\n            if (typeof cb !== 'undefined') {\r\n                cb();\r\n            }\r\n        }*/\r\n\r\n    };\r\n\r\n    // Date functions\r\n    $scope.formatDate = function(date) {\r\n        return $scope.formatMoment(moment(date));\r\n    };\r\n\r\n    $scope.formatMoment = function(moment) {\r\n        return moment.lang('fr').format('DD/MM/YYYY');\r\n    };\r\n\r\n    $scope.formatTime = function(time) {\r\n        return moment(time).lang('fr').format('H:mm');\r\n    };\r\n\r\n    /**\r\n     * Close confirmation panel\r\n     */\r\n    $scope.closeConfirmPanel = function () {\r\n\r\n        $scope.processingData = false;\r\n        $scope.display.showPanel = false;\r\n        template.close('lightbox');\r\n    };\r\n\r\n    /**\r\n     * Display confirmation panel\r\n     * @param panelContent Html confirm panel file\r\n     * @param item Optional item\r\n     */\r\n    $scope.showConfirmPanel = function (panelContent, item) {\r\n        template.open('lightbox', panelContent);\r\n        $scope.display.showPanel = true;\r\n        $scope.confirmPanel.item = item;\r\n    };\r\n\r\n    $rootScope.showConfirmPanel = $scope.showConfirmPanel;\r\n\r\n\r\n    /**\r\n     * Test in calendar view if there are one lesson\r\n     * or one homework only selected (not both lessons and homeworks)\r\n     * @returns {boolean}\r\n     */\r\n    $scope.isOneHomeworkOrLessonStriclySelected = function () {\r\n        return ($scope.getSelectedPedagogicItems('lesson').length + $scope.getSelectedPedagogicItems('homework').length) == 1;\r\n    };\r\n\r\n\r\n    /**\r\n     * Get selected items from calendar (lessons and homeworks)\r\n     * and tidy them within un/publishable state\r\n     */\r\n    var getPublishableItemsSelected = function () {\r\n\r\n        var publishableSelectedLessons = [];\r\n        var unPublishableSelectedLessons = [];\r\n        var noStateChangeLessons = [];\r\n\r\n        var publishableSelectedHomeworks = [];\r\n        var unPublishableSelectedHomeworks = [];\r\n        var noStateChangeHomeworks = []; // eg.: homework attached to a lesson\r\n\r\n        $scope.getSelectedPedagogicItems('lesson').forEach(function (lesson) {\r\n            if (lesson.isPublishable(true)) {\r\n                publishableSelectedLessons.push(lesson);\r\n            } else if (lesson.isPublishable(false)) {\r\n                unPublishableSelectedLessons.push(lesson);\r\n            } else {\r\n                noStateChangeLessons.push(lesson);\r\n            }\r\n        });\r\n\r\n        // only free homeworks can be published/unpublished\r\n        $scope.getSelectedPedagogicItems('homework').forEach(function (homework) {\r\n            if (homework.isPublishable(true)) {\r\n                publishableSelectedHomeworks.push(homework);\r\n            } else if (homework.isPublishable(false)) {\r\n                unPublishableSelectedHomeworks.push(homework);\r\n            } else {\r\n                noStateChangeHomeworks.push(homework);\r\n            }\r\n        });\r\n\r\n        return {\r\n            publishableSelectedLessons: publishableSelectedLessons,\r\n            unPublishableSelectedLessons: unPublishableSelectedLessons,\r\n            noStateChangeLessons: noStateChangeLessons,\r\n            publishableSelectedHomeworks: publishableSelectedHomeworks,\r\n            unPublishableSelectedHomeworks: unPublishableSelectedHomeworks,\r\n            noStateChangeHomeworks: noStateChangeHomeworks\r\n        };\r\n    };\r\n\r\n    $scope.publishSelectedItems = function (toPublish) {\r\n\r\n        var itemsToBePublished = getPublishableItemsSelected();\r\n        var homeworks = toPublish ? itemsToBePublished.publishableSelectedHomeworks : itemsToBePublished.unPublishableSelectedHomeworks;\r\n        var lessons = toPublish ? itemsToBePublished.publishableSelectedLessons : itemsToBePublished.unPublishableSelectedLessons;\r\n\r\n        var notifyKey = toPublish ? 'item.published' : 'item.unpublished';\r\n        $scope.processingData = true;\r\n        var cbCount = ((lessons.length > 0) ? 1 : 0) + ((homeworks.length > 0) ? 1 : 0);\r\n        $scope.cbCount = cbCount;\r\n\r\n        if (lessons.length > 0) {\r\n            return model.publishLessons({ids: model.getItemsIds(lessons)}, toPublish, publishCB(lessons, toPublish, notifyKey),\r\n                function (cbe) {\r\n                    notify.error(cbe.message);\r\n                })\r\n        }\r\n\r\n        if (homeworks.length > 0) {\r\n            return model.publishHomeworks({ids: model.getItemsIds(homeworks)}, toPublish, publishCB(homeworks, toPublish, notifyKey),\r\n                function (cbe) {\r\n                    notify.error(cbe.message);\r\n                })\r\n        }\r\n    };\r\n\r\n    $scope.getItemsPublishableSelectedCount = function (toPublish) {\r\n\r\n        var itemsSelected = getPublishableItemsSelected();\r\n\r\n        if (toPublish) {\r\n            return itemsSelected.publishableSelectedLessons.length + itemsSelected.publishableSelectedHomeworks.length;\r\n        } else {\r\n            return itemsSelected.unPublishableSelectedLessons.length + itemsSelected.unPublishableSelectedHomeworks.length;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Telles whether it is possible to publish or not selected items.\r\n     * It depends of type of items selected and current state\r\n     * @param toPublish\r\n     * @returns {boolean} true if selected items can be published\r\n     * and are not ever in publish state otherwise false\r\n     */\r\n    $scope.hasPublishableOnlyItemsSelected = function (toPublish) {\r\n        var itemsSelected = getPublishableItemsSelected();\r\n\r\n        var publishableLessons = itemsSelected.publishableSelectedLessons;\r\n        var unpublishableLessons = itemsSelected.unPublishableSelectedLessons;\r\n        var noStateChangeLessons = itemsSelected.noStateChangeLessons;\r\n\r\n        var publishableHomeworks = itemsSelected.publishableSelectedHomeworks;\r\n        var unpublishableHomeworks = itemsSelected.unPublishableSelectedHomeworks;\r\n        var noStateChangeHomeworks = itemsSelected.noStateChangeHomeworks;\r\n\r\n        if (noStateChangeLessons.length > 0 || noStateChangeHomeworks.length > 0) {\r\n            return false;\r\n        }\r\n\r\n        if (toPublish) {\r\n            // nothing selected\r\n            if (publishableLessons.length + publishableHomeworks.length == 0) {\r\n                return false;\r\n            } else {\r\n                var noUnpublishableItems = unpublishableHomeworks.length == 0 && unpublishableLessons.length == 0;\r\n                return (publishableLessons.length > 0 && noUnpublishableItems) || (publishableHomeworks.length > 0 && noUnpublishableItems);\r\n            }\r\n        } else {\r\n            // nothing selected\r\n            if (unpublishableLessons.length + unpublishableHomeworks.length == 0) {\r\n                return false;\r\n            } else {\r\n                var noPublishableItems = publishableLessons.length == 0 && publishableHomeworks.length == 0;\r\n                return (unpublishableLessons.length > 0 && noPublishableItems) || (unpublishableHomeworks.length > 0 && noPublishableItems);\r\n            }\r\n        }\r\n    };\r\n\r\n    var getSelectedHomeworks = function(){\r\n        return model.homeworks.selection();\r\n    };\r\n\r\n    var getSelectedLessons = function(){\r\n        return model.lessons.selection();\r\n    };\r\n\r\n\r\n    $scope.toggleShowHomeworkInLesson = function (homework) {\r\n        homework.expanded = !homework.expanded;\r\n    };\r\n\r\n\r\n    $scope.deleteHomeworkAndCloseConfirmPanel = function (homework, lesson) {\r\n        $scope.deleteHomework(homework, lesson, function(){\r\n            $scope.closeConfirmPanel();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Deletes an homework\r\n     * @param cb Callback function\r\n     * @param homework Homework to be deleted\r\n     * @param lesson Lesson attached to homework (optional)\r\n     */\r\n    $scope.deleteHomework = function (homework, lesson, cb) {\r\n\r\n        homework.delete(lesson, function () {\r\n            notify.info('homework.deleted');\r\n            //$scope.$apply();\r\n\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }, function (e) {\r\n            $rootScope.validationError(e);\r\n        });\r\n    };\r\n\r\n    $scope.hideHomework = function(){\r\n        if ($scope.homework)\r\n        $scope.lesson = null;\r\n        $scope.homework = null;\r\n    };\r\n\r\n    $scope.createOrUpdateHomework = function (goToMainView, cb) {\r\n\r\n        $scope.currentErrors = [];\r\n        if ($scope.newItem) {\r\n            $scope.homework.dueDate = $scope.newItem.date;\r\n        }\r\n\r\n        var postHomeworkSave = function () {\r\n            //$scope.showCal = !$scope.showCal;\r\n            notify.info('homework.saved');\r\n            $scope.homework.audience = model.audiences.findWhere({id: $scope.homework.audience.id});\r\n\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n\r\n            if (goToMainView) {\r\n                $rootScope.back();\r\n                $scope.lesson = null;\r\n                $scope.homework = null;\r\n            }\r\n        };\r\n\r\n        return $scope.homework.save(function () {\r\n            if (this.lesson_id) {\r\n                return syncHomeworks().then(()=>{\r\n                    postHomeworkSave();\r\n                });\r\n            } else {\r\n                return syncLessonsAndHomeworks(postHomeworkSave);\r\n            }\r\n        },function(e) {\r\n            $scope.homework.errorValid = true;\r\n            throw e;\r\n        });\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * Refresh homework load for all homeworks of current lesson\r\n     */\r\n    $scope.refreshHomeworkLoads = function (lesson) {\r\n\r\n        $scope.countdown = lesson.homeworks.all.length;\r\n\r\n        lesson.homeworks.all.forEach(function (homework) {\r\n            model.loadHomeworksLoad(homework, moment(homework.date).format(\"YYYY-MM-DD\"), lesson.audience.id, applyScopeOnFinish);\r\n        });\r\n\r\n    };\r\n\r\n    var applyScopeOnFinish = function(){\r\n        $scope.countdown --;\r\n\r\n        if ($scope.countdown == 0) {\r\n            if(!$scope.$$phase) {\r\n                $scope.$apply();\r\n              }            \r\n        }\r\n    };\r\n\r\n    var decrementCountdown = function (bShowTemplates, cb) {\r\n        $scope.countdown--;\r\n        if ($scope.countdown == 0) {\r\n            $scope.calendarLoaded = true;\r\n            $scope.currentSchool = model.currentSchool;\r\n\r\n            if(bShowTemplates) {\r\n                showTemplates();\r\n            }\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }\r\n    };\r\n\r\n    var showTemplates = function () {\r\n        template.open('main', 'main');\r\n        template.open('main-view', 'calendar');\r\n        template.open('create-lesson', 'create-lesson');\r\n        template.open('create-homework', 'create-homework');\r\n        template.open('daily-event-details', 'daily-event-details');\r\n        template.open('daily-event-item', 'daily-event-item');\r\n        //$scope.$apply();\r\n    };\r\n\r\n    /**\r\n     * Refresh calendar view for current week\r\n     */\r\n    $scope.refreshCalendarCurrentWeek = function(){\r\n        $scope.show(moment(model.calendar.firstDay));\r\n    };\r\n\r\n    $scope.addHomeworkToLesson = function(lesson){\r\n        lesson.addHomework(lesson);\r\n    };\r\n\r\n    $scope.getPedagogicItemSelectedCount = function () {\r\n        return $scope.getSelectedPedagogicItems('lesson').length + $scope.getSelectedPedagogicItems('homework').length;\r\n    };\r\n\r\n    // gets the selected date from pedagogic items but can't be in the past.\r\n    $scope.selectedDateInTheFuture = function (){\r\n        var date = model.selectedPedagogicDate();\r\n        return moment().min(moment(date), moment()).format(\"YYYY-MM-DD\"); // see moment.js doc on min pre 2.7.0 version (highly confusing !)\r\n    };\r\n\r\n\t/**\r\n\t* update pedagogic items selected\r\n\t*/\r\n\t$scope.updatePedagogicItemsSelected = function(itemType){\r\n\t\tvar selectedItems = new Array();\r\n\t\tmodel.pedagogicDays.forEach(function (day) {\r\n\t\t\tselectedItems = selectedItems.concat(day.pedagogicItemsOfTheDay.filter(function (item) {\r\n\t\t\t\t\treturn item && item.type_item === itemType && item.selected;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\tif (itemType === 'homework'){\r\n\t\t\t$scope.pedagogicHomeworksSelected = selectedItems;\r\n\t\t} else {\r\n\t\t\t$scope.pedagogicLessonsSelected = selectedItems;\r\n\t\t}\r\n    };\r\n\r\n\r\n\t/**\r\n\t* get selected pedagogic items from item type\r\n\t*/\r\n\t$scope.getSelectedPedagogicItems = function(itemType){\r\n\r\n        // share from lesson view\r\n        if ($scope.viewedLessonToShare) {\r\n            return $scope.viewedLessonToShare;\r\n        }\r\n        // share from homework view\r\n        else if ($scope.viewedHomeworkToShare) {\r\n            return $scope.viewedHomeworkToShare;\r\n        }\r\n\r\n        // list view\r\n        if ($scope.display.showList == true) {\r\n\t\t\tif (itemType === 'homework') {\r\n                return $scope.pedagogicHomeworksSelected;\r\n            } else {\r\n                return $scope.pedagogicLessonsSelected;\r\n            }\r\n        }\r\n        // calendar view\r\n        else {\r\n            if (itemType === 'homework') {\r\n                return getSelectedHomeworks();\r\n            } else {\r\n                return getSelectedLessons();\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * Init homework object on create\r\n     * @param dueDate if set the dueDate of the homework\r\n     */\r\n    var initHomework = function(dueDate) {\r\n        $scope.homework = model.initHomework(dueDate);\r\n        $scope.newItem = {\r\n            date: $scope.homework.date\r\n        };\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * Minify the homework panel or not\r\n     * If it's minified, will only show one max homework\r\n     * else 3\r\n     */\r\n     //TODO unused?\r\n  /*  $scope.toggleHomeworkPanelMinified = function(){\r\n        $scope.display.bShowHomeworksMinified = model.show.bShowHomeworksMinified;\r\n        model.placeCalendarAndHomeworksPanel(model.show.bShowCalendar, model.show.bShowHomeworks, !model.show.bShowHomeworksMinified);\r\n    };\r\n    */\r\n\r\n    $scope.toggleFilterOnHomework = function () {\r\n        $scope.searchForm.displayHomework = model.searchForm.displayHomework;\r\n        model.searchForm.displayHomework = !model.searchForm.displayHomework;\r\n    };\r\n\r\n    $scope.toggleFilterOnLesson = function () {\r\n        $scope.searchForm.displayLesson = model.searchForm.displayLesson;\r\n        model.searchForm.displayLesson = !model.searchForm.displayLesson;\r\n    };\r\n\r\n    $scope.performPedagogicItemSearch = function () {\r\n        model.performPedagogicItemSearch($scope.searchForm.getSearch(), $scope.isUserTeacher, $scope.openListView, $rootScope.validationError);\r\n    };\r\n\r\n    /*\r\n    $scope.loadMorePreviousLessonsFromLesson = function (currentLesson) {\r\n        model.getPreviousLessonsFromLesson(currentLesson, true, function(){$scope.$apply()}, $rootScope.validationError);\r\n    };\r\n    */\r\n\r\n    /**\r\n     * Load previous lessons data from current lesson being edited\r\n     * @param currentLesson Current lesson being edited\r\n     */\r\n    $scope.loadPreviousLessonsFromLesson = function (currentLesson) {\r\n        model.getPreviousLessonsFromLesson(currentLesson, false, function(){$scope.$apply()}, $rootScope.validationError);\r\n    };\r\n\r\n    $scope.itemTypesDisplayed = function(item){\r\n        if ((item.type_item == \"lesson\" && $scope.searchForm.displayLesson) || (item.type_item == \"homework\" && $scope.searchForm.displayHomework)){\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     * Opens the share lesson panel\r\n     * seee main;html -> getSelectedPedagogicItems\r\n     * @param item\r\n     */\r\n    $scope.openShareLessonPanel = function (viewedLesson) {\r\n\r\n        $scope.viewedHomeworkToShare = null;\r\n\r\n        if (viewedLesson) {\r\n            $scope.viewedLessonToShare = new Array();\r\n            $scope.viewedLessonToShare.push(viewedLesson);\r\n        } else {\r\n            $scope.viewedLessonToShare = null;\r\n        }\r\n\r\n        $scope.display.showShareLessonPanel = true;\r\n    };\r\n\r\n    /**\r\n     * Open the share homework panel\r\n     * see main.html -> getSelectedPedagogicItems\r\n     */\r\n    $scope.openShareHomeworkPanel = function (viewedHomework) {\r\n\r\n        $scope.viewedLessonToShare = null;\r\n\r\n        if (viewedHomework) {\r\n            $scope.viewedHomeworkToShare = new Array();\r\n            $scope.viewedHomeworkToShare.push(viewedHomework);\r\n        }\r\n        else {\r\n            $scope.viewedHomeworkToShare = null;\r\n        }\r\n        $scope.display.showShareHomeworkPanel = true;\r\n    };\r\n\r\n\r\n    /**\r\n     * Display homework load for current homework\r\n     * @param forcedDate Date in millis since 1970-1-1\r\n     * @param homework\r\n     */\r\n    $scope.showHomeworksLoad = function (homework, forcedDate, callback) {\r\n\r\n        var cb ;//= function (){};\r\n\r\n        if (callback){\r\n            if (typeof callback === 'function') {\r\n                cb = callback;\r\n            }\r\n        }\r\n\r\n        var callbackErrorFunc = function () {\r\n            // TODO propagate error to front\r\n        };\r\n\r\n        var date = forcedDate ? forcedDate : homework.date;\r\n        var formattedDate = moment(date).format(\"YYYY-MM-DD\");\r\n\r\n        var audienceId = homework.audience ? homework.audience.id : homework.audienceId;\r\n        model.loadHomeworksLoad(homework, formattedDate, audienceId, cb, callbackErrorFunc);\r\n    };\r\n\r\n    $scope.isHighHomeworkLoad = function(homeworkLoad){\r\n        return homeworkLoad.countLoad > 2;\r\n    };\r\n\r\n    $scope.isLowHomeworkLoad = function(homeworkLoad){\r\n        return homeworkLoad.countLoad == 1;\r\n    };\r\n\r\n    $scope.isMediumHomeworkLoad = function(homeworkLoad){\r\n        return homeworkLoad.countLoad == 2;\r\n    };\r\n\r\n    $scope.isNoHomeworkLoad = function(homeworkLoad){\r\n        return homeworkLoad.countLoad == 0;\r\n    };\r\n\r\n    $scope.displayPreviousLessonsTabAndLoad = function (lesson) {\r\n        console.warn(\"deprecated\");\r\n        return;\r\n        /*$scope.tabs.createLesson = 'previouslessons';\r\n        $scope.loadPreviousLessonsFromLesson(lesson);*/\r\n    };\r\n\r\n    /**\r\n     * Show more previous lessons.\r\n     * By default number of previous lessons is 3.\r\n     * Will increase displayed previous lesson by 3.\r\n     */\r\n     //TODO remove\r\n    $scope.showMorePreviousLessons = function (lesson) {\r\n        console.warn(\"deprecated\");\r\n        return;\r\n       /* const displayStep = 3;\r\n        lesson.previousLessonsDisplayed = lesson.previousLessons.slice(0, Math.min(lesson.previousLessons.length, lesson.previousLessonsDisplayed.length + displayStep));\r\n        */\r\n    };\r\n\r\n\r\n    function initAudiences(cb?){\r\n            model.audiences.all = [];\r\n            //var nbStructures = model.me.structures.length;\r\n\r\n            model.currentSchool = model.me.structures[0];\r\n\r\n            AudienceService.getAudiences(model.me.structures).then((audiences)=>{\r\n                model.audiences.addRange(audiences);\r\n                    model.audiences.trigger('sync');\r\n                    model.audiences.trigger('change');\r\n                    if(typeof cb === 'function'){\r\n                        cb();\r\n                    }\r\n            });\r\n    }\r\n}\r\n]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/controller.ts","import {angular, moment, _, idiom as lang, model } from 'entcore';\r\nimport {PedagogicItem} from \"./model/PedagogicItem.model\";\r\n\r\nexport const DATE_FORMAT = 'YYYY-MM-DD';\r\n\r\n/**\r\n * removes accent from any string\r\n * @param str\r\n * @returns {*}\r\n */\r\nexport const sansAccent = function (str) {\r\n    if (!str) {\r\n        return;\r\n    }\r\n    var accent = [\r\n        /[\\300-\\306]/g, /[\\340-\\346]/g, // A, a\r\n        /[\\310-\\313]/g, /[\\350-\\353]/g, // E, e\r\n        /[\\314-\\317]/g, /[\\354-\\357]/g, // I, i\r\n        /[\\322-\\330]/g, /[\\362-\\370]/g, // O, o\r\n        /[\\331-\\334]/g, /[\\371-\\374]/g, // U, u\r\n        /[\\321]/g, /[\\361]/g, // N, n\r\n        /[\\307]/g, /[\\347]/g // C, c\r\n    ];\r\n    var noaccent = ['A', 'a', 'E', 'e', 'I', 'i', 'O', 'o', 'U', 'u', 'N', 'n', 'C', 'c'];\r\n\r\n\r\n    for (var i = 0; i < accent.length; i++) {\r\n        str = str.replace(accent[i], noaccent[i]);\r\n    }\r\n\r\n    return str;\r\n};\r\n\r\n/**\r\n * Transform sql homework data (table diary.homework)\r\n * to json\r\n * @param sqlHomework\r\n * @returns {{id: *, description: *, audience: *, subjectId: *, subjectLabel: *, type: *, typeId: *, typeLabel: *, teacherId: *, structureId: (*|T), audienceId: *, audienceLabel: *, dueDate: *, date: *, title: *, color: *, startMoment: *, endMoment: *, state: *, is_periodic: boolean, lesson_id: *}}\r\n */\r\nexport const sqlToJsHomework = (sqlHomework) => {\r\n    let homework: any = {\r\n        //for share directive you must have _id\r\n        _id: sqlHomework.id,\r\n        id: sqlHomework.id,\r\n        description: sqlHomework.homework_description,\r\n        audienceId: sqlHomework.audience_id,\r\n        audience: model.audiences.findWhere({id: sqlHomework.audience_id}),\r\n        subject: model.subjects.findWhere({id: sqlHomework.subject_id}),\r\n        subjectId: sqlHomework.subject_id,\r\n        subjectLabel: sqlHomework.subject_label,\r\n        type: model.homeworkTypes.findWhere({id: sqlHomework.homework_type_id}),\r\n        typeId: sqlHomework.homework_type_id,\r\n        typeLabel: sqlHomework.homework_type_label,\r\n        teacherId: sqlHomework.teacher_id,\r\n        structureId: sqlHomework.structureId,\r\n        audienceType: sqlHomework.audience_type,\r\n        audienceLabel: sqlHomework.audience_label,\r\n        // TODO delete dueDate? (seems redondant info vs date field)\r\n        dueDate: moment(sqlHomework.homework_due_date),\r\n        date: moment(sqlHomework.homework_due_date),\r\n        title: sqlHomework.homework_title,\r\n        color: sqlHomework.homework_color,\r\n        startMoment: moment(sqlHomework.homework_due_date),\r\n        endMoment: moment(sqlHomework.homework_due_date),\r\n        state: sqlHomework.homework_state,\r\n        is_periodic: false,\r\n        lesson_id: sqlHomework.lesson_id\r\n    };\r\n\r\n    if (sqlHomework.attachments) {\r\n        homework.attachments = JSON.parse(sqlHomework.attachments);\r\n    }\r\n\r\n    if ('group' === homework.audienceType) {\r\n        homework.audienceTypeLabel = lang.translate('diary.audience.group');\r\n    } else {\r\n        homework.audienceTypeLabel = lang.translate('diary.audience.class');\r\n    }\r\n\r\n    return homework;\r\n};\r\n\r\n\r\n/** Converts sql pedagogic item to js data */\r\nexport const sqlToJsPedagogicItem = (data) => {\r\n    //TODO use service\r\n    var item = new PedagogicItem();\r\n    item.type_item = data.type_item;\r\n    item.id = data.id;\r\n    //for share directive you must have _id\r\n    item._id = data.id;\r\n    item.lesson_id = data.lesson_id;\r\n    item.title = data.title;\r\n    item.subject = data.subject;\r\n    item.audience = data.audience;\r\n    item.start_hour = (data.type_item == \"lesson\") ? moment(data.day).minutes(model.getMinutes(data.start_time)).format(\"HH[h]mm\") : \"\";\r\n    item.end_hour = (data.type_item == \"lesson\") ? moment(data.day).minutes(model.getMinutes(data.end_time)).format(\"HH[h]mm\") : \"\";\r\n    item.type_homework = data.type_homework;\r\n    item.teacher = data.teacher;\r\n    item.description = data.description;\r\n    item.expanded_description = false;\r\n    item.state = data.state;\r\n    item.color = data.color;\r\n    item.getPreviewDescription();\r\n    item.room = data.room;\r\n    item.day = data.day;\r\n    item.turn_in = (data.type_item == \"lesson\") ? \"\" : data.turn_in_type;\r\n    item.selected = false;\r\n    item.locked = data.locked;\r\n\r\n    if (data.day) {\r\n        item.dayFormatted = moment(data.day).format(\"DD/MM/YYYY\");\r\n        item.dayOfWeek = moment(data.day).format(\"dddd\");\r\n    }\r\n    return item;\r\n};\r\n\r\n\r\nexport const syncHomeworks = function (cb?) {\r\n    return model.homeworks.syncHomeworks().then(() => {\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    });\r\n};\r\n\r\nexport const syncLessonsAndHomeworks = function (cb?) {\r\n\r\n    // need sync attached lesson homeworks\r\n    return model.homeworks.syncHomeworks().then(() => {\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    });\r\n};\r\n\r\n\r\n/**\r\n * Convert sql diary.lesson row to js row used in angular model\r\n * @param lesson Sql diary.lesson row\r\n */\r\nexport const sqlToJsLesson = (data) => {\r\n\r\n    console.warn(\"deprecated\");\r\n    return;\r\n    /*var lessonHomeworks = new Array();\r\n\r\n    // only initialize homeworks attached to lesson\r\n    // with only id\r\n    if (data.homework_ids) {\r\n        for (var i = 0; i < data.homework_ids.length; i++) {\r\n            var homework = new Homework();\r\n            homework.id = data.homework_ids[i];\r\n            homework.lesson_id = parseInt(data.lesson_id);\r\n            homework.loaded = false; // means full data from sql not loaded\r\n            lessonHomeworks.push(homework);\r\n        }\r\n    }\r\n\r\n    let lesson: any = {\r\n        //for share directive you must have _id\r\n        _id: data.lesson_id,\r\n        id: data.lesson_id,\r\n        title: data.lesson_title,\r\n        audience: model.audiences.findWhere({id: data.audience_id}),\r\n        audienceId: data.audience_id,\r\n        audienceLabel: data.audience_label,\r\n        audienceType: data.audience_type,\r\n        description: data.lesson_description,\r\n        subject: model.subjects.findWhere({id: data.subject_id}),\r\n        subjectId: data.subject_id,\r\n        subjectLabel: data.subject_label,\r\n        teacherId: data.teacher_display_name,\r\n        teacherName: data.teacher_display_name,\r\n        structureId: data.school_id,\r\n        date: moment(data.lesson_date),\r\n        startTime: data.lesson_start_time,\r\n        endTime: data.lesson_end_time,\r\n        color: data.lesson_color,\r\n        room: data.lesson_room,\r\n        annotations: data.lesson_annotation,\r\n        startMoment: moment(data.lesson_date.split(' ')[0] + ' ' + data.lesson_start_time),\r\n        endMoment: moment(data.lesson_date.split(' ')[0] + ' ' + data.lesson_end_time),\r\n        state: data.lesson_state,\r\n        is_periodic: false,\r\n        homeworks: lessonHomeworks,\r\n        tooltipText: '',\r\n        locked: (!model.canEdit()) ? true : false\r\n    };\r\n\r\n    if ('group' === lesson.audienceType) {\r\n        lesson.audienceTypeLabel = lang.translate('diary.audience.group');\r\n    } else {\r\n        lesson.audienceTypeLabel = lang.translate('diary.audience.class');\r\n    }\r\n\r\n    if (data.attachments) {\r\n        lesson.attachments = _.map(JSON.parse(data.attachments), jsonToJsAttachment);\r\n    }\r\n\r\n\r\n    //var tooltip = getResponsiveLessonTooltipText(lesson);\r\n\r\n    //lesson.tooltipText = tooltip;\r\n    return lesson;*/\r\n};\r\n\r\nexport const jsonToJsAttachment = (data) => {\r\n\r\n    console.warn(\"deprecated\");\r\n    return;\r\n    /*var att = new Attachment();\r\n    att.id = data.id;\r\n    att.user_id = data.user_id;\r\n    att.creation_date = data.creation_date;\r\n    att.document_id = data.document_id;\r\n    att.document_label = data.document_label;\r\n\r\n    return att;*/\r\n};\r\n\r\n/**\r\n * Set lesson tooltip text depending on screen resolution.\r\n * Tricky responsive must be linked to additional.css behaviour\r\n * @param lesson\r\n */\r\nexport const getResponsiveLessonTooltipText = (lesson) => {\r\n\r\n    console.warn(\"deprecated use utils service\");\r\n    return;\r\n    /*var tooltipText = lesson.title + ' (' + lang.translate(lesson.state) + ')';\r\n    var screenWidth = window.innerWidth;\r\n\r\n    // < 900 px display room\r\n    if (screenWidth < 900 && lesson.room) {\r\n        tooltipText += '<br>' + lesson.room;\r\n    }\r\n\r\n    // < 650 px display hour start and hour end\r\n    if (screenWidth < 650) {\r\n        tooltipText += '<br>' + [[lesson.startMoment.format('HH')]] + 'h' + [[lesson.startMoment.format('mm')]];\r\n        tooltipText += ' -> ' + [[lesson.endMoment.format('HH')]] + 'h' + [[lesson.endMoment.format('mm')]];\r\n    }\r\n\r\n    // < 600 px display subjectlabel\r\n    if (screenWidth < 650 && lesson.subjectLabel) {\r\n        tooltipText += '<br>' + lesson.subjectLabel;\r\n    }\r\n\r\n    tooltipText = tooltipText.trim();\r\n\r\n    return tooltipText;*/\r\n};\r\n\r\n/**\r\n * Transform sql homework load data to json like\r\n * @param sqlHomeworkType\r\n */\r\nexport const sqlToJsHomeworkLoad = (sqlHomeworkload) => {\r\n    return {\r\n        countLoad: sqlHomeworkload.countload,\r\n        description: sqlHomeworkload.countload + ' ' + (sqlHomeworkload.countload > 1 ? lang.translate('diary.homework.labels') : lang.translate('diary.homework.label')),\r\n        day: moment(sqlHomeworkload.day).format('dddd').substring(0, 1).toUpperCase(), // 'lundi' -> 'lu' -> 'L'\r\n        numDay: moment(sqlHomeworkload.day).format('DD') // 15\r\n    };\r\n};\r\n\r\n/**\r\n * Transform sql homework type data to json like\r\n * @param sqlHomeworkType\r\n * @returns {{id: *, structureId: (*|T), label: *, category: *}}\r\n */\r\nexport const sqlToJsHomeworkType = (sqlHomeworkType) => {\r\n    return {\r\n        id: sqlHomeworkType.id,\r\n        structureId: sqlHomeworkType.school_id,\r\n        label: sqlHomeworkType.homework_type_label,\r\n        category: sqlHomeworkType.homework_type_category\r\n    };\r\n};\r\n\r\nexport const CONSTANTS = {\r\n    CAL_DATE_PATTERN: \"YYYY-MM-DD\",\r\n    CAL_DATE_PATTERN_NG: \"dd-MM-yyyy\",\r\n    CAL_DATE_PATTERN_SLASH: \"dd/MM/yyyy\",\r\n    LONG_DATE_PATTERN: 'YYYY-MM-DD hh:mm:ss',\r\n    RIGHTS: {\r\n        CREATE_LESSON: 'diary.createLesson',\r\n        VIEW: 'diary.view',\r\n        CREATE_HOMEWORK_FOR_LESSON: 'createHomeworkForLesson',\r\n        CREATE_FREE_HOMEWORK: 'diary.createFreeHomework',\r\n\r\n        MANAGE_MODEL_WEEK: 'diary.manageModelWeek.update',\r\n        MANAGE_HISTORY: 'diary.manageHistory.apply',\r\n        SHOW_HISTORY: 'diary.showHistory.filters',\r\n        VISA_APPLY_VISA: \"diary.visa.applyvisa\",\r\n        VISA_INSPECTOR: \"diary.visa.inspect.filters\",\r\n        VISA_ADMIN: \"diary.visa.admin.filters\",\r\n        MANAGE_INSPECTOR: \"diary.manageInspect.apply\",\r\n        SHOW_OTHER_TEACHER: \"diary.view.otherteacher\"\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/tools.ts","import { model, _ } from 'entcore';\r\nimport http from 'axios';\r\n\r\nexport class PedagogicItem {\r\n    selected:any;\r\n    type_item: any;\r\n    id: any;\r\n    _id: any;\r\n    lesson_id: any;\r\n    title: any;\r\n    subject: any;\r\n    audience: any;\r\n    start_hour: any;\r\n    end_hour: any;\r\n    type_homework: any;\r\n    teacher: any;\r\n    description: any;\r\n    expanded_description: any;\r\n    state: any;\r\n    color: any;\r\n    getPreviewDescription: any;\r\n    room: any;\r\n    day: any;\r\n    turn_in: any;\r\n    locked: any;\r\n    dayFormatted: any;\r\n    dayOfWeek: any;\r\n\r\n    constructor(){\r\n        this.selected = false;\r\n    }\r\n\r\n    deleteModelReferences = function () {\r\n        model.deletePedagogicItemReferences(this.id);\r\n    };\r\n\r\n    changeState = function (toPublish) {\r\n        //if item is a lesson may need to upgrade his related homework\r\n        if (this.type_item === 'lesson') {\r\n            var relatedToLesson = model.pedagogicDays.getItemsByLesson(this.id);\r\n            relatedToLesson.forEach(function (item) {\r\n                item.state = toPublish ? 'published' : 'draft';\r\n            })\r\n        } else {\r\n            this.state = toPublish ? 'published' : 'draft';\r\n        }\r\n    };\r\n\r\n    isPublished = function () {\r\n        return this.state === 'published';\r\n    };\r\n\r\n    descriptionMaxSize = 140;\r\n\r\n    getPreviewDescription = function () {\r\n\r\n        if (this.description) {\r\n            if (this.description.length >= this.descriptionMaxSize) {\r\n                this.preview_description = '<p class=\"itemPreview\">' + $('<div>' + this.description + '</div>').text().substring(0, this.descriptionMaxSize) + '...</p>';\r\n            } else {\r\n                this.preview_description = this.description;\r\n            }\r\n        } else {\r\n            this.preview_description = this.description;\r\n        }\r\n    };\r\n\r\n    isPublishable = function(toPublish){\r\n        return this.id && this.state == (toPublish ? 'draft' : 'published') && (this.lesson_id == null || this.lesson_id == this.id); // id test to detect free homeworks\r\n    };\r\n\r\n    delete = function(cb, cbe) {\r\n\r\n        var url = (this.type_item == \"lesson\") ? '/diary/lesson/' : '/diary/homework/';\r\n        var idToDelete = this.id;\r\n        http.delete(url + idToDelete, this).then(function (b) {\r\n\r\n            model.deletePedagogicItemReferences(idToDelete);\r\n\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }).catch(function (e) {\r\n            if (typeof cbe === 'function') {\r\n                cbe(model.parseError(e));\r\n            }\r\n        });\r\n    };\r\n\r\n    deleteList = function(items, cb, cbe) {\r\n\r\n        // split into two arrays of PedagogicItem, one for the lessons, one for the homeworks\r\n        var itemsByType = []; // array of array(s)\r\n\r\n        if (items.length == 1) {\r\n            itemsByType.push(items);\r\n        } else {\r\n            itemsByType = _.partition(items, function(item) {\r\n                return item.type_item === 'lesson';\r\n            });\r\n        }\r\n\r\n        var countdown = 0;\r\n\r\n        if (itemsByType.length > 0 ) {\r\n            countdown = itemsByType.length;\r\n\r\n            itemsByType.forEach(function (arrayForTypeItem) {\r\n                if (arrayForTypeItem.length > 0) {\r\n                    model.deleteItemList(arrayForTypeItem, arrayForTypeItem[0].type_item, function() {\r\n                        countdown--;\r\n                        if (countdown == 0) {\r\n                            if (typeof cb === 'function') {\r\n                                cb();\r\n                            }\r\n                        }\r\n                    }, cbe);\r\n                } else {\r\n                    countdown--;\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    isFiltered = function () {\r\n        if (model.searchForm.selectedSubject != null) {\r\n            return !(this.subject === model.searchForm.selectedSubject);\r\n        }\r\n        return false;\r\n    };\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/model/PedagogicItem.model.ts","module.exports = require('./lib/axios');\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/index.js\n// module id = 5\n// module chunks = 0","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(utils.merge(defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/axios.js\n// module id = 6\n// module chunks = 0","'use strict';\n\nvar bind = require('./helpers/bind');\nvar isBuffer = require('is-buffer');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && navigator.product === 'ReactNative') {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object' && !isArray(obj)) {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/utils.js\n// module id = 7\n// module chunks = 0","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/bind.js\n// module id = 8\n// module chunks = 0","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/is-buffer/index.js\n// module id = 9\n// module chunks = 0","'use strict';\n\nvar defaults = require('./../defaults');\nvar utils = require('./../utils');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = utils.merge({\n      url: arguments[0]\n    }, arguments[1]);\n  }\n\n  config = utils.merge(defaults, this.defaults, { method: 'get' }, config);\n  config.method = config.method.toLowerCase();\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/Axios.js\n// module id = 10\n// module chunks = 0","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/defaults.js\n// module id = 11\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/process/browser.js\n// module id = 12\n// module chunks = 0","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/normalizeHeaderName.js\n// module id = 13\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\nvar btoa = (typeof window !== 'undefined' && window.btoa && window.btoa.bind(window)) || require('./../helpers/btoa');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n    var loadEvent = 'onreadystatechange';\n    var xDomain = false;\n\n    // For IE 8/9 CORS support\n    // Only supports POST and GET calls and doesn't returns the response headers.\n    // DON'T do this for testing b/c XMLHttpRequest is mocked, not XDomainRequest.\n    if (process.env.NODE_ENV !== 'test' &&\n        typeof window !== 'undefined' &&\n        window.XDomainRequest && !('withCredentials' in request) &&\n        !isURLSameOrigin(config.url)) {\n      request = new window.XDomainRequest();\n      loadEvent = 'onload';\n      xDomain = true;\n      request.onprogress = function handleProgress() {};\n      request.ontimeout = function handleTimeout() {};\n    }\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request[loadEvent] = function handleLoad() {\n      if (!request || (request.readyState !== 4 && !xDomain)) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        // IE sends 1223 instead of 204 (https://github.com/mzabriskie/axios/issues/201)\n        status: request.status === 1223 ? 204 : request.status,\n        statusText: request.status === 1223 ? 'No Content' : request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n          cookies.read(config.xsrfCookieName) :\n          undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/adapters/xhr.js\n// module id = 14\n// module chunks = 0","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  // Note: status is not exposed by XDomainRequest\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/settle.js\n// module id = 15\n// module chunks = 0","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/createError.js\n// module id = 16\n// module chunks = 0","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n  error.request = request;\n  error.response = response;\n  return error;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/enhanceError.js\n// module id = 17\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      }\n\n      if (!utils.isArray(val)) {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/buildURL.js\n// module id = 18\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/parseHeaders.js\n// module id = 19\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    var msie = /(msie|trident)/i.test(navigator.userAgent);\n    var urlParsingNode = document.createElement('a');\n    var originURL;\n\n    /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      var href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n                  urlParsingNode.pathname :\n                  '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })()\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/isURLSameOrigin.js\n// module id = 20\n// module chunks = 0","'use strict';\n\n// btoa polyfill for IE<10 courtesy https://github.com/davidchambers/Base64.js\n\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction E() {\n  this.message = 'String contains an invalid character';\n}\nE.prototype = new Error;\nE.prototype.code = 5;\nE.prototype.name = 'InvalidCharacterError';\n\nfunction btoa(input) {\n  var str = String(input);\n  var output = '';\n  for (\n    // initialize result and counter\n    var block, charCode, idx = 0, map = chars;\n    // if the next str index does not exist:\n    //   change the mapping table to \"=\"\n    //   check if d has no fractional digits\n    str.charAt(idx | 0) || (map = '=', idx % 1);\n    // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n    output += map.charAt(63 & block >> 8 - idx % 1 * 8)\n  ) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n    if (charCode > 0xFF) {\n      throw new E();\n    }\n    block = block << 8 | charCode;\n  }\n  return output;\n}\n\nmodule.exports = btoa;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/btoa.js\n// module id = 21\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n  (function standardBrowserEnv() {\n    return {\n      write: function write(name, value, expires, path, domain, secure) {\n        var cookie = [];\n        cookie.push(name + '=' + encodeURIComponent(value));\n\n        if (utils.isNumber(expires)) {\n          cookie.push('expires=' + new Date(expires).toGMTString());\n        }\n\n        if (utils.isString(path)) {\n          cookie.push('path=' + path);\n        }\n\n        if (utils.isString(domain)) {\n          cookie.push('domain=' + domain);\n        }\n\n        if (secure === true) {\n          cookie.push('secure');\n        }\n\n        document.cookie = cookie.join('; ');\n      },\n\n      read: function read(name) {\n        var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n        return (match ? decodeURIComponent(match[3]) : null);\n      },\n\n      remove: function remove(name) {\n        this.write(name, '', Date.now() - 86400000);\n      }\n    };\n  })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return {\n      write: function write() {},\n      read: function read() { return null; },\n      remove: function remove() {}\n    };\n  })()\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/cookies.js\n// module id = 22\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/InterceptorManager.js\n// module id = 23\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/dispatchRequest.js\n// module id = 24\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/core/transformData.js\n// module id = 25\n// module chunks = 0","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/isCancel.js\n// module id = 26\n// module chunks = 0","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/isAbsoluteURL.js\n// module id = 27\n// module chunks = 0","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/combineURLs.js\n// module id = 28\n// module chunks = 0","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/Cancel.js\n// module id = 29\n// module chunks = 0","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/cancel/CancelToken.js\n// module id = 30\n// module chunks = 0","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/axios/lib/helpers/spread.js\n// module id = 31\n// module chunks = 0","import { model, moment } from 'entcore';\r\nimport http from 'axios';\r\nimport { DATE_FORMAT, sqlToJsHomework } from '../tools';\r\n\r\nexport class Homework {\r\n\r\n    /**\r\n     * used in ui in homework tab in lesson view\r\n     * @type {boolean}\r\n     */\r\n    id: any;\r\n    created: any;\r\n    expanded:any = false;\r\n    type: any;\r\n    title: any;\r\n    date: any;\r\n\r\n    audience: any;\r\n    subject: any;\r\n    audienceType: any;\r\n    color: any;\r\n    state: any;\r\n\r\n    dueDate: any;\r\n    description: any;\r\n    attachments:any;\r\n\r\n    CrudApi:any;\r\n\r\n    constructor(){\r\n        this.expanded = false;\r\n    }\r\n\r\n    /**\r\n     * Delete calendar references of current homework\r\n     */\r\n    deleteModelReferences = function () {\r\n        var idxHomeworkToDelete = model.homeworks.indexOf(this);\r\n\r\n        // delete homework in calendar cache\r\n        if (idxHomeworkToDelete >= 0) {\r\n            model.homeworks.splice(idxHomeworkToDelete, 1);\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * Adds an attachment\r\n     * @param attachment\r\n     */\r\n    addAttachment = function (attachment) {\r\n        this.attachments.push(attachment);\r\n    };\r\n\r\n    /**\r\n     * Removes attachment associated to this lesson\r\n     * @param attachment\r\n     * @param cb\r\n     * @param cbe\r\n     */\r\n    detachAttachment = function (attachment, cb, cbe) {\r\n        attachment.detachFromItem(this.id, 'lesson', cb, cbe);\r\n    };\r\n\r\n\r\n    api = {\r\n        delete: '/diary/homework/:id'\r\n    };\r\n\r\n    save = function(cb, cbe) {\r\n\r\n        var that = this;\r\n        var promise = model.$q().when({});\r\n\r\n        if(!this.subject.id){\r\n            promise = this.subject.save();\r\n        }\r\n\r\n        return promise.then(()=>{\r\n            if (that.id) {\r\n                return that.update(cb, cbe);\r\n            }\r\n            else {\r\n                return that.create(cb, cbe);\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n    /**\r\n     * Returns true if current homework is attached to a lesson\r\n     * @returns {boolean}\r\n     */\r\n    isAttachedToLesson = function() {\r\n        return typeof this.lesson_id !== 'undefined' && this.lesson_id != null;\r\n    };\r\n\r\n    isDraft = function () {\r\n        return this.state === \"draft\";\r\n    };\r\n\r\n    isPublished = function () {\r\n        return !this.isDraft();\r\n    };\r\n\r\n    /**\r\n     * A directly publishable homework must exist in database and not linked to a lesson\r\n     * @param toPublish\r\n     * @returns {*|boolean} true if homework can be published directly\r\n     */\r\n    isPublishable = function (toPublish) {\r\n        return this.id && (toPublish ? this.isDraft() : this.isPublished()) && this.lesson_id == null;\r\n    };\r\n\r\n    changeState = function (toPublish) {\r\n        this.state = toPublish ? 'published' : 'draft';\r\n    };\r\n\r\n    update = function(cb, cbe) {\r\n        var url = '/diary/homework/' + this.id;\r\n\r\n        var homework = this;\r\n        return model.getHttp()({\r\n            method : 'PUT',\r\n            url : url,\r\n            data : homework\r\n        }).then(function(){\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }).catch(function(e) {\r\n            if (cbe){\r\n                cbe();\r\n            }\r\n        });\r\n    };\r\n\r\n    create = function(cb, cbe) {\r\n        var homework = this;\r\n        model.getHttp()({\r\n            method : 'POST',\r\n            url : '/diary/homework',\r\n            data : homework\r\n        }).then(function(result){\r\n            homework.updateData(result.data);\r\n            model.homeworks.pushAll([homework]);\r\n            if(typeof cb === 'function'){\r\n                cb();\r\n            }\r\n            return result.data;\r\n        }).catch(function(e) {\r\n            if (cbe){\r\n                cbe();\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Load homework object from id\r\n     * @param cb Callback function\r\n     * @param cbe Callback on error function\r\n     */\r\n    load = function (cb, cbe) {\r\n\r\n        var homework = this;\r\n\r\n\r\n        http.get('/diary/homework/' + homework.id)\r\n            .then(function (res) {\r\n                homework.updateData(sqlToJsHomework(res.data));\r\n\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n            })\r\n            .catch(function (e) {\r\n                if (typeof cbe === 'function') {\r\n                    cbe(model.parseError(e));\r\n                }\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Deletes a list of homeworks\r\n     * @param homeworks Homeworks to be deleted\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    deleteList = function (homeworks, cb, cbe) {\r\n        model.deleteItemList(homeworks, 'homework', cb, cbe);\r\n    };\r\n\r\n\r\n    /**\r\n     * Deletes the homework\r\n     * @param Optional lesson attached to homework\r\n     * @param cb Callback after delete\r\n     * @param cbe Callback on error\r\n     */\r\n    delete = function (lesson, cb, cbe) {\r\n\r\n        var homework = this;\r\n\r\n        var deleteHomeworkReferences = function () {\r\n\r\n            // delete homework from calendar cache\r\n            model.homeworks.forEach(function (modelHomework) {\r\n                if (modelHomework.id === homework.id) {\r\n                    model.homeworks.remove(modelHomework);\r\n                }\r\n            });\r\n\r\n            if (lesson && lesson.homeworks) {\r\n                lesson.homeworks.remove(homework);\r\n            }\r\n        };\r\n\r\n        if (this.id) {\r\n            http.delete('/diary/homework/' + this.id)\r\n                .then(function (b) {\r\n\r\n                    deleteHomeworkReferences();\r\n\r\n                    if (typeof cb === 'function') {\r\n                        cb();\r\n                    }\r\n                })\r\n                .catch(function (error) {\r\n                    if (typeof cbe === 'function') {\r\n                        cbe(model.parseError(error));\r\n                    }\r\n                });\r\n        } else {\r\n            deleteHomeworkReferences();\r\n\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    toJSON = function () {\r\n\r\n        let json:any = {\r\n            homework_title: this.title,\r\n            subject_id: this.subject.id,\r\n            homework_type_id: this.type.id,\r\n            teacher_id: model.me.userId,\r\n            school_id: this.audience.structureId,\r\n            audience_id: this.audience.id,\r\n            homework_due_date: moment(this.dueDate).format(DATE_FORMAT),\r\n            homework_description: this.description,\r\n            homework_color: this.color,\r\n            homework_state: this.state,\r\n            // used to auto create postgresql diary.audience if needed\r\n            // not this.audience object is originally from neo4j graph (see syncAudiences function)\r\n            audience_type: this.audience.type,\r\n            audience_name: this.audience.name,\r\n            attachments: this.attachments\r\n        };\r\n\r\n        if (this.lesson_id) {\r\n            json.lesson_id = this.lesson_id;\r\n        }\r\n\r\n        /*if (!this.id) {\r\n            created: moment(this.created).format('YYYY-MM-DD HH:mm:ss.SSSSS'); // \"2016-07-05 11:48:22.18671\"\r\n        }*/\r\n\r\n        return json;\r\n    };\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/model/Homework.model.ts","import { model, moment, collection} from 'entcore';\r\nimport { DATE_FORMAT, syncLessonsAndHomeworks } from '../tools';\r\n\r\nimport {Homework} from './Homework.model';\r\nimport {Subject} from './Subject.model';\r\nimport {Audience} from '../model';\r\n\r\nexport class Lesson {\r\n    selected: any;\r\n    homeworks: any;\r\n\r\n\r\n    id:any;\r\n    subject: any;\r\n    audience: any;\r\n    title: any;\r\n    color: any;\r\n    date: any;\r\n    startTime: any;\r\n    endTime: any;\r\n    description: any;\r\n    annotations: any;\r\n    state: any;\r\n    attachments: any;\r\n\r\n    newItem: any;\r\n    room: any;\r\n    audienceType: any;\r\n\r\n\r\n    constructor(data?)\r\n    {\r\n\r\n        this.selected = false;\r\n        //this.collection(Attachment);\r\n        // initialize homeworks collection (see lib.js)\r\n        if(!this.homeworks) {\r\n            collection(Homework);\r\n        }\r\n        this.subject = (data) ? data.subject : new Subject();\r\n        this.audience = (data) ? data.audience : new Audience();\r\n\r\n        /**\r\n         *\r\n         * Attachments\r\n         */\r\n        if (!this.attachments) {\r\n            this.attachments = new Array();\r\n        }\r\n    }\r\n\r\n    api = { delete: '/diary/lesson/:id' };\r\n\r\n    /**\r\n     * Adds an attachment\r\n     * @param attachment\r\n     */\r\n    addAttachment = function (attachment) {\r\n        this.attachments.push(attachment);\r\n    };\r\n\r\n\r\n    /**\r\n     * Delete calendar references of current lesson\r\n     */\r\n    deleteModelReferences = () => {\r\n        var that = this;\r\n        model.lessons.forEach(function (lesson) {\r\n            if (lesson.id === that.id) {\r\n                model.lessons.remove(lesson);\r\n            }\r\n        });\r\n        // delete associated homeworks references\r\n        var lessonHomeworks = model.homeworks.filter(function (homework) {\r\n            return homework && homework.lesson_id === that.id;\r\n        });\r\n\r\n        lessonHomeworks.forEach(function (homework) {\r\n            model.homeworks.remove(homework);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Triggered when lesson item has stopped being dragged in calendar view\r\n     * see angular-app.js scheduleItemEl.on('stopDrag').\r\n     * Will auto-save lesson in db on item move/resize\r\n     * @param cb\r\n     * @param cbe\r\n     */\r\n    calendarUpdate = function (cb, cbe) {\r\n\r\n        // TODO date fields types are kinda messy\r\n        // toJson method needs date fields to be in some specific format\r\n        if (this.beginning) {\r\n            this.date = this.beginning;\r\n            this.startMoment = this.beginning;\r\n            this.endMoment = this.end;\r\n            this.startTime = this.startMoment;\r\n            this.endTime = this.endMoment;\r\n        }\r\n        if (this.id) {\r\n            this.update(function () {\r\n                //model.refresh();\r\n            }, function (error) {\r\n                model.parseError(error);\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Save attached homeworks of lesson\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    saveHomeworks = function (cb, cbe) {\r\n\r\n        var deferred = model.$q().defer();\r\n\r\n        var homeworkSavedCount = 0;\r\n        var homeworkCount = this.homeworks ? this.homeworks.all.length : 0;\r\n        var that = this;\r\n\r\n        // make sure subject and audience of homeworks are\r\n        // same as the lesson\r\n        if (homeworkCount > 0) {\r\n            this.homeworks.forEach(function (homework) {\r\n                homework.lesson_id = that.id;\r\n                // needed fields as in model.js Homework.prototype.toJSON\r\n                homework.audience = that.audience;\r\n                homework.subject = that.subject;\r\n                homework.color = that.color;\r\n                homework.state = that.state;\r\n                homework.save().then(()=>{\r\n                    homeworkSavedCount++;\r\n                    // callback function once all homeworks saved\r\n                    if (homeworkSavedCount === homeworkCount) {\r\n                        if (typeof cb === 'function') {\r\n                            cb();\r\n                        }\r\n                        deferred.resolve();\r\n                    }\r\n                });\r\n\r\n            });\r\n        }else{\r\n            deferred.resolve();\r\n        }\r\n\r\n        return deferred.promise;\r\n    };\r\n\r\n    /**\r\n     * Save lesson and attached homeworks\r\n     * and sync calendar lessons and homeworks cache\r\n     * @param cb\r\n     * @param cbe\r\n     */\r\n    save = function(cb, cbe) {\r\n\r\n\r\n\r\n        // startTime used for db save but startMoment in calendar view\r\n        // startMoment day is given by lesson.date\r\n        this.startMoment = model.getMomentDateTimeFromDateAndMomentTime(this.date, moment(this.startTime));\r\n        this.endMoment = model.getMomentDateTimeFromDateAndMomentTime(this.date, moment(this.endTime));\r\n        var that = this;\r\n        var subjectPromise = model.$q().when();\r\n        var lessonPromise;\r\n        if(!this.subject.id){\r\n            subjectPromise = this.subject.save();\r\n        }\r\n\r\n        return subjectPromise.then(()=>{\r\n            if (that.id) {\r\n                lessonPromise = that.update();\r\n            }\r\n            else {\r\n                lessonPromise = that.create();\r\n            }\r\n\r\n            return lessonPromise.then(()=>{\r\n                return that.saveHomeworks().then(()=>{\r\n                    return syncLessonsAndHomeworks(cb);\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param idHomework\r\n     * @returns {boolean}\r\n     */\r\n    hasHomeworkWithId = function (idHomework) {\r\n\r\n        var found = false;\r\n\r\n        if (!idHomework || !this.homeworks) {\r\n            found = false;\r\n        }\r\n\r\n\r\n        this.homeworks.forEach(function (homework) {\r\n            if (homework.id === idHomework) {\r\n                found = true;\r\n            }\r\n        });\r\n\r\n        return found;\r\n    };\r\n\r\n\r\n    update = function(cb, cbe) {\r\n        var url = '/diary/lesson/' + this.id;\r\n\r\n        var lesson = this;\r\n\r\n        return model.getHttp()({\r\n            method : 'PUT',\r\n            url : url,\r\n            data : lesson\r\n        }).then(function(){\r\n            if(typeof cb === 'function'){\r\n                cb();\r\n            }\r\n        });\r\n    };\r\n\r\n    create = function(cb, cbe) {\r\n        var lesson = this;\r\n\r\n        let subject = model.subjects.all.find((l)=>{ return l.label = lesson.subject.label });\r\n\r\n        let createSubjectPromise = model.$q().when();\r\n\r\n        if (!subject){\r\n            createSubjectPromise = model.createSubject(lesson.subject.label).then((newSubject)=>{\r\n                lesson.subject = newSubject;\r\n            });\r\n        }else{\r\n            lesson.subject = subject;\r\n        }\r\n\r\n        return createSubjectPromise.then(()=>{\r\n            return model.getHttp()({\r\n                method : 'POST',\r\n                url : '/diary/lesson',\r\n                data : lesson\r\n            }).then(function(result){\r\n                lesson.updateData(result.data);\r\n                model.lessons.pushAll([lesson]);\r\n                if(typeof cb === 'function'){\r\n                    cb();\r\n                }\r\n            });\r\n        })\r\n    };\r\n\r\n\r\n    /**\r\n     * Deletes the lesson\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    delete = function (cb, cbe) {\r\n\r\n        var lesson = this;\r\n\r\n        model.getHttp()({\r\n            method : 'DELETE',\r\n            url : '/diary/lesson/' + this.id,\r\n            data : lesson\r\n        }).then(function (b) {\r\n            lesson.deleteModelReferences();\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Deletes a list of lessons\r\n     * @param lessons Lessons to be deleted\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    deleteList = function (lessons, cb, cbe) {\r\n        model.deleteItemList(lessons, 'lesson', cb, cbe);\r\n    };\r\n\r\n    /**\r\n     * Load lesson object from id\r\n     * @param cb Callback function\r\n     * @param cbe Callback on error function\r\n     */\r\n    load = function (loadHomeworks, cb, cbe) {\r\n\r\n        var lesson = this;\r\n\r\n        let url = '/diary/lesson/';\r\n        if (model.getSecureService().hasRight(model.getConstants().RIGHTS.SHOW_OTHER_TEACHER)){\r\n            url = '/diary/lesson/external/';\r\n        }\r\n\r\n\r\n        return model.getHttp()({\r\n            method : 'GET',\r\n            url : url + lesson.id\r\n        }).then(function (result) {\r\n            lesson.updateData(model.LessonService.mapLesson(result.data));\r\n\r\n            if (loadHomeworks) {\r\n                model.loadHomeworksForLesson(lesson, cb, cbe);\r\n            }else{\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    };\r\n\r\n    /**\r\n     * Publishes the lesson\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    publish = function (cb, cbe) {\r\n\r\n        var jsonLesson = new Lesson();\r\n        jsonLesson.id = this.id;\r\n        jsonLesson.audience.structureId = this.structureId;\r\n\r\n        return model.getHttp()({\r\n            method : 'POST',\r\n            url : '/diary/lesson/publish',\r\n            data : jsonLesson\r\n        }).then(function () {\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * JSON object corresponding to sql diary.lesson table columns\r\n     */\r\n    toJSON = function () {\r\n\r\n        let json:any = {\r\n            lesson_id: this.id,\r\n            subject_id: this.subject.id,\r\n            school_id: this.audience.structureId,\r\n            // TODO missing teacher_id\r\n            audience_id: this.audience.id,\r\n            lesson_title: this.title,\r\n            lesson_color: this.color,\r\n            lesson_date: moment(this.date).format(DATE_FORMAT),\r\n            lesson_start_time: moment(this.startTime).format('HH:mm'),\r\n            lesson_end_time: moment(this.endTime).format('HH:mm'),\r\n            lesson_description: this.description,\r\n            lesson_annotation: this.annotations,\r\n            lesson_state: this.state,\r\n            // start columns not in lesson table TODO move\r\n            audience_type: this.audience.type,\r\n            audience_name: this.audience.name,\r\n            attachments: this.attachments\r\n        };\r\n\r\n        if (this.room) {\r\n            json.lesson_room = this.room;\r\n        }\r\n\r\n        return json;\r\n    };\r\n\r\n    addHomework = function (cb) {\r\n        let date = moment.isMoment(this.startTime) ? this.startTime : (this.startMoment ? this.startMoment : moment());\r\n        let dueDate = date.second(0);\r\n        var homework = model.initHomework(dueDate,this);\r\n        this.homeworks.push(homework);\r\n    };\r\n\r\n    deleteHomework = function (homework) {\r\n\r\n        homework.delete();\r\n\r\n        homework = new Homework();\r\n        homework.dueDate = this.date;\r\n        homework.type = model.homeworkTypes.first();\r\n        this.homeworks.push(homework);\r\n    };\r\n\r\n    isDraft = function () {\r\n        return this.state === \"draft\";\r\n    };\r\n\r\n    isPublished = function () {\r\n        return !this.isDraft();\r\n    };\r\n\r\n    isPublishable = function(toPublish){\r\n        return this.id && this.state == (toPublish ? 'draft' : 'published')\r\n    };\r\n\r\n    /**\r\n     * Change state of current and associated homeworks\r\n     * @param isPublished\r\n     */\r\n    changeState = function (isPublished) {\r\n        this.state = isPublished ? 'published' : 'draft';\r\n        let that = this;\r\n        // change state of associated homeworks\r\n        this.homeworks.forEach(function (homework) {\r\n            var lessonHomework = homework;\r\n            homework.state = isPublished ? 'published' : 'draft';\r\n\r\n            var found = false;\r\n        });\r\n\r\n        // change state of homeworks cache in calendar for current week\r\n        model.homeworks.all.filter((h)=>{return h.lesson_id = that.id}).forEach((homeworkCache) =>{\r\n            homeworkCache.state = that.state;\r\n        });\r\n\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/model/Lesson.model.ts","import { model } from 'entcore';\r\n\r\nexport class Subject {\r\n\r\n    id:any;\r\n    school_id: any;\r\n    label: any;\r\n    teacher_id: any;\r\n    original_subject_id: any;\r\n\r\n    constructor() {}\r\n\r\n    /**\r\n     * Saves the subject to databases.\r\n     * It's auto-created if it does not exists in database\r\n     * @param cb\r\n     * @param cbe\r\n     */\r\n    save = function(cb, cbe){\r\n        if(this.id) {\r\n            // not implemented yet at this stage/ not needed\r\n        }\r\n        else {\r\n            return this.create(cb, cbe);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Creates a subject\r\n     * @param cb Callback function\r\n     * @param cbe Callback on error function\r\n     */\r\n    create = function (cb, cbe) {\r\n        var subject = this;\r\n\r\n        if (!this.school_id ){\r\n            this.school_id = model.me.structures[0];\r\n        }\r\n\r\n        return model.getHttp()({\r\n            method : 'POST',\r\n            url : '/diary/subject',\r\n            data : subject\r\n        }).then(function (result) {\r\n            //subject.updateData(subject);\r\n            subject.updateData(result.data);\r\n            model.subjects.all.push(subject);\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n            return subject;\r\n        });\r\n    };\r\n\r\n\r\n    toJSON = function () {\r\n\r\n        return {\r\n            id: this.id,\r\n            school_id: this.school_id,\r\n            subject_label: this.label,\r\n            teacher_id: this.teacher_id,\r\n            original_subject_id:this.originalsubjectid\r\n        };\r\n    };\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/model/Subject.model.ts","import { angular, model, moment, _, idiom as lang, Model, calendar } from 'entcore';\r\nimport { Collection } from 'entcore-toolkit'\r\nimport http from 'axios';\r\nimport { DATE_FORMAT, sansAccent, sqlToJsPedagogicItem, sqlToJsHomework, sqlToJsHomeworkType, sqlToJsHomeworkLoad } from './tools';\r\n\r\nimport { Homework } from './model/Homework.model';\r\nimport { Lesson } from './model/Lesson.model';\r\nimport { PedagogicDay } from './model/PedagogicDay.model';\r\nimport { Child } from './model/Child.model';\r\nimport { Subject } from './model/Subject.model';\r\nimport { SearchForm } from './model/SearchForm.model';\r\n\r\n/**\r\n * Model from table\r\n * diary.lesson_has_attachment\r\n * @constructor\r\n */\r\nexport function LessonAttachment() {}\r\nexport function Audience() {};\r\nexport function HomeworksLoad(){}\r\nexport function HomeworkType(){}\r\n\r\n\r\n/**\r\n * Default color of lesson and homeworks\r\n * @type {string}\r\n */\r\nconst DEFAULT_ITEM_COLOR = '#CECEF6';\r\n\r\n/**\r\n * Default state of lesson or homework when created\r\n * @type {string}\r\n */\r\nconst DEFAULT_STATE = 'draft';\r\n\r\n\r\n/**\r\n * Get school ids of current authenticated user as string\r\n * seperated with ':'\r\n * @returns {string} schoolid_1:schoolid_2:...\r\n */\r\nexport function getUserStructuresIdsAsString () {\r\n    var structureIds = \"\";\r\n\r\n    model.me.structures.forEach(function (structureId) {\r\n        structureIds += structureId + \":\";\r\n    });\r\n\r\n    return structureIds;\r\n};\r\n\r\n\r\nmodel.build = function () {\r\n\r\n    calendar.startOfDay = 8;\r\n    calendar.endOfDay = 19;\r\n    calendar.dayHeight = 65;\r\n    /*model.calendar = new calendar.Calendar({\r\n        week: moment().week()\r\n    });\r\n    */\r\n\r\n    // keeping start/end day values in cache so we can detect dropped zones (see ng-extensions.js)\r\n    // note: model.calendar.startOfDay does not work in console.\r\n    model.startOfDay = calendar.startOfDay;\r\n    model.endOfDay = calendar.endOfDay;\r\n\r\n    this.makeModels([HomeworkType, Audience, Subject, Lesson, Homework, PedagogicDay, Child]);\r\n    Model.prototype.inherits(Lesson, calendar.ScheduleItem); // will allow to bind item.selected for checkbox\r\n\r\n    this.searchForm = new SearchForm(false);\r\n    this.currentSchool = {};\r\n\r\n    this.collection(Lesson, {\r\n        loading: false,\r\n        syncLessons: function (cb, cbe) {\r\n            console.warn(\"deprecated\");\r\n            return;\r\n            /*var that = this;\r\n            if (that.loading)\r\n                return;\r\n\r\n            var lessons = [];\r\n            var start = moment(model.calendar.dayForWeek).day(1).format(DATE_FORMAT);\r\n            var end = moment(model.calendar.dayForWeek).day(1).add(1, 'week').format(DATE_FORMAT);\r\n\r\n            model.lessons.all.splice(0, model.lessons.all.length);\r\n\r\n            var urlGetLessons = '/diary/lesson/' + getUserStructuresIdsAsString() + '/' + start + '/' + end + '/';\r\n\r\n            if (model.isUserParent() && model.child) {\r\n                urlGetLessons += model.child.id;\r\n            } else {\r\n                urlGetLessons += '%20';\r\n            }\r\n\r\n            that.loading = true;\r\n            model.getHttp()({\r\n                method : 'GET',\r\n                url : urlGetLessons\r\n            }).then(function (data) {\r\n                lessons = lessons.concat(data);\r\n                that.addRange(\r\n                    _.map(lessons, function (lesson) {\r\n                        return sqlToJsLesson(lesson);\r\n                    })\r\n                );\r\n                if(typeof cb === 'function'){\r\n                    cb();\r\n                }\r\n                that.loading = false;\r\n            },function (e) {\r\n                if (typeof cbe === 'function') {\r\n                    cbe(model.parseError(e));\r\n                }\r\n                that.loading = false;\r\n            });*/\r\n        }, pushAll: function (datas) {\r\n\r\n            if (datas) {\r\n                this.all = _.union(this.all, datas);\r\n            }\r\n        }, behaviours: 'diary'\r\n    });\r\n\r\n    this.collection(Subject, {\r\n        loading: false,\r\n        syncSubjects: function (cb, cbe) {\r\n            console.warn(\"deprecated\");\r\n            return;\r\n            /*\r\n            this.all = [];\r\n            var that = this;\r\n            if (that.loading)\r\n                return;\r\n\r\n            that.loading = true;\r\n\r\n            if (model.isUserTeacher()) {\r\n                http().get('/diary/subject/initorlist').done(function (data) {\r\n                if (data ===\"\"){\r\n                data = [];\r\n                }\r\n                    model.subjects.addRange(data);\r\n                    if (typeof cb === 'function') {\r\n                        cb();\r\n                    }\r\n                    that.loading = false;\r\n                }.bind(that))\r\n                    .error(function (e) {\r\n                        if (typeof cbe === 'function') {\r\n                            cbe(model.parseError(e));\r\n                        }\r\n                        that.loading = false;\r\n                    });\r\n            } else {\r\n                http().get('/diary/subject/list/' + getUserStructuresIdsAsString()).done(function (data) {\r\n                    model.subjects.addRange(data);\r\n                    if (typeof cb === 'function') {\r\n                        cb();\r\n                    }\r\n                    that.loading = false;\r\n                }.bind(that))\r\n                    .error(function (e) {\r\n                        if (typeof cbe === 'function') {\r\n                            cbe(model.parseError(e));\r\n                        }\r\n                        that.loading = false;\r\n                    });\r\n            }*/\r\n\r\n        }\r\n    });\r\n\r\n    this.collection(Audience, {\r\n        loading: false,\r\n        syncAudiences: function (cb, cbe) {\r\n            console.warn(\"deprecated\");\r\n            return;\r\n            /*this.all = [];\r\n            var nbStructures = model.me.structures.length;\r\n            var that = this;\r\n            if (that.loading)\r\n                return;\r\n\r\n            model.currentSchool = model.me.structures[0];\r\n            that.loading = true;\r\n\r\n            model.getAudienceService().getAudiences(model.me.structures).then((audiences)=>{\r\n                this.addRange(structureData.classes);\r\n                // TODO get groups\r\n                nbStructures--;\r\n                if (nbStructures === 0) {\r\n                    this.trigger('sync');\r\n                    this.trigger('change');\r\n                    if(typeof cb === 'function'){\r\n                        cb();\r\n                    }\r\n                }\r\n\r\n                that.loading = false;\r\n            });\r\n            */\r\n            /*model.me.structures.forEach(function (structureId) {\r\n                http().get('/userbook/structure/' + structureId).done(function (structureData) {\r\n                    structureData.classes = _.map(structureData.classes, function (audience) {\r\n                        audience.structureId = structureId;\r\n                        audience.type = 'class';\r\n                        audience.typeLabel = lang.translate('diary.audience.class');\r\n                        return audience;\r\n                    });\r\n                    this.addRange(structureData.classes);\r\n                    // TODO get groups\r\n                    nbStructures--;\r\n                    if (nbStructures === 0) {\r\n                        this.trigger('sync');\r\n                        this.trigger('change');\r\n                        if(typeof cb === 'function'){\r\n                            cb();\r\n                        }\r\n                    }\r\n\r\n                    that.loading = false;\r\n                }.bind(that))\r\n                .error(function (e) {\r\n                    if (typeof cbe === 'function') {\r\n                        cbe(model.parseError(e));\r\n                    }\r\n                    that.loading = false;\r\n                });\r\n            });*/\r\n        }\r\n    });\r\n\r\n    this.collection(HomeworkType, {\r\n        loading: false,\r\n        syncHomeworkTypes: function (cb, cbe) {\r\n\r\n            var homeworkTypes = [];\r\n            var that = this;\r\n\r\n            if (that.loading)\r\n                return;\r\n\r\n            model.homeworkTypes.all.splice(0, model.homeworkTypes.all.length);\r\n\r\n            var url = '/diary/homeworktype/initorlist';\r\n\r\n            var urlGetHomeworkTypes = url;\r\n\r\n            that.loading = true;\r\n            return model.getHttp()({\r\n                method: 'GET',\r\n                url: urlGetHomeworkTypes\r\n            }).then(function (result) {\r\n\r\n                homeworkTypes = homeworkTypes.concat(result.data);\r\n                that.addRange(\r\n                    _.map(homeworkTypes, sqlToJsHomeworkType)\r\n                );\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n                that.loading = false;\r\n                return homeworkTypes;\r\n            }).catch(function (e) {\r\n                that.loading = false;\r\n                throw e;\r\n            });\r\n\r\n        }, pushAll: function (datas) {\r\n            if (datas) {\r\n                this.all = _.union(this.all, datas);\r\n            }\r\n        }, behaviours: 'diary'\r\n    });\r\n\r\n    this.collection(Homework, {\r\n        loading: false,\r\n        syncHomeworks: function (cb, cbe) {\r\n\r\n            var homeworks = [];\r\n            var start = moment(model.calendar.dayForWeek).day(1).format(DATE_FORMAT);\r\n            var end = moment(model.calendar.dayForWeek).day(1).add(1, 'week').format(DATE_FORMAT);\r\n            var that = this;\r\n\r\n            if (that.loading)\r\n                return;\r\n\r\n            model.homeworks.all.splice(0, model.homeworks.all.length);\r\n\r\n            var urlGetHomeworks = '/diary/homework/' + getUserStructuresIdsAsString() + '/' + start + '/' + end + '/';\r\n\r\n            if (model.isUserParent() && model.child) {\r\n                urlGetHomeworks += model.child.id;\r\n            } else {\r\n                urlGetHomeworks += '%20';\r\n            }\r\n\r\n\r\n            that.loading = true;\r\n            return model.getHttp()({\r\n                method: 'GET',\r\n                url: urlGetHomeworks\r\n            }).then(function (result) {\r\n                homeworks = homeworks.concat(result.data);\r\n                that.addRange(\r\n                    _.map(homeworks, sqlToJsHomework)\r\n                );\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n                that.loading = false;\r\n                return homeworks;\r\n            }).catch(function (e) {\r\n                that.loading = false;\r\n                throw e;\r\n            });\r\n\r\n        }, pushAll: function (datas) {\r\n            if (datas) {\r\n                this.all = _.union(this.all, datas);\r\n            }\r\n        }, behaviours: 'diary'\r\n    });\r\n\r\n    this.collection(PedagogicDay, {\r\n        reset: function () {\r\n            model.pedagogicDays.selectAll();\r\n            model.pedagogicDays.removeSelection();\r\n        },\r\n        syncPedagogicItems: function (cb, cbe) {\r\n            var params = model.searchForm.getSearch();\r\n            model.performPedagogicItemSearch(params, model.isUserTeacher(), cb, cbe);\r\n        },\r\n        pushAll: function (datas) {\r\n            if (datas) {\r\n                this.all = _.union(this.all, datas);\r\n            }\r\n        },\r\n        getItemsByLesson: function (lessonId) {\r\n            var items = [];\r\n\r\n            model.pedagogicDays.forEach(function (day) {\r\n                var relatedToLesson = _.filter(day.pedagogicItemsOfTheDay, function (item) {\r\n                    return item.lesson_id == lessonId;\r\n                });\r\n                items = _.union(items, relatedToLesson);\r\n            });\r\n\r\n            return items;\r\n        }\r\n    });\r\n\r\n    /**\r\n     *\r\n     */\r\n    this.collection(Child, {\r\n        reset: function () {\r\n            // n.b: childs not 'children' since collection function adds a 's'\r\n            model.childs.selectAll();\r\n            model.childs.removeSelection();\r\n        },\r\n        syncChildren: function (cb, cbe) {\r\n            model.listChildren(cb, cbe);\r\n        }, pushAll: function (datas) {\r\n            if (datas) {\r\n                this.all = _.union(this.all, datas);\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n\r\nmodel.getHttp = function(){\r\n    return  angular.element($('html')).injector().get(\"$http\");\r\n};\r\n\r\nmodel.$q = function(){\r\n    return  angular.element($('html')).injector().get(\"$q\");\r\n};\r\n\r\nmodel.getSecureService = function(){\r\n    return angular.injector(['ng','app']).get(\"SecureService\");\r\n};\r\n\r\nmodel.getUtilsService = function(){\r\n    return angular.element($('html')).injector().get(\"UtilsService\");\r\n};\r\n\r\nmodel.getConstants = function(){\r\n    return angular.injector(['ng','app']).get(\"constants\");\r\n};\r\n\r\nmodel.homeworksPerDayDisplayed = 1;\r\n/**\r\n * Says whether or not current user can edit an homework\r\n * @returns {*|boolean}\r\n */\r\nmodel.canEdit = function () {\r\n    return model.me.type == \"ENSEIGNANT\";\r\n};\r\n\r\n/**\r\n * Says whether or not current user is a teacher\r\n * @returns {*|boolean}\r\n */\r\nmodel.isUserTeacher = function () {\r\n    return model.me.type == \"ENSEIGNANT\";\r\n};\r\n\r\n\r\n/**\r\n * Says whether or not current user is a teacher\r\n * @returns {*|boolean}\r\n */\r\nmodel.isUserParent = function () {\r\n    return model.me.type == \"PERSRELELEVE\";\r\n};\r\n\r\n\r\n\r\n/**\r\n * Publishes or un publishes a list of homeworks\r\n * @param itemArray Array of homeworks to publish or unpublish\r\n */\r\nmodel.publishHomeworks = function (itemArray, isPublish, cb, cbe) {\r\n\r\n    var url = isPublish ? \"/diary/publishHomeworks\" : \"/diary/unPublishHomeworks\";\r\n\r\n    return model.getHttp()({\r\n            method : 'POST',\r\n            url : url,\r\n            data : itemArray\r\n    }).then(function (r) {\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return r.data;\r\n    });\r\n};\r\n\r\n\r\n\r\nmodel.deleteItemList = function (items, itemType, cb, cbe) {\r\n    var url = (itemType == \"lesson\") ? '/diary/deleteLessons' : '/diary/deleteHomeworks';\r\n\r\n    var itemArray = {ids:model.getItemsIds(items)};\r\n\r\n    return http.delete(url, {data: itemArray}).then(function (b) {\r\n\r\n        items.forEach(function (item) {\r\n            item.deleteModelReferences();\r\n        });\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    }).catch(function (error) {\r\n        if (typeof cbe === 'function') {\r\n            cbe(model.parseError(error));\r\n        }\r\n    });\r\n}\r\n\r\nmodel.deletePedagogicItemReferences = function(itemId) {\r\n    model.pedagogicDays.forEach(function (day) {\r\n        day.pedagogicItemsOfTheDay = _.reject(day.pedagogicItemsOfTheDay, function (item) {\r\n            return !item || item.lesson_id == itemId || item.id == itemId;\r\n        });\r\n        day.resetCountValues();\r\n    });\r\n\r\n    model.pedagogicDays.all = _.filter(model.pedagogicDays.all, function(day){\r\n        return day.numberOfItems() > 0;\r\n    });\r\n\r\n    model.initSubjects();\r\n};\r\n\r\nmodel.unselectDays = function (){\r\n    model.pedagogicDays.forEach(function (day) {\r\n        day.selected = undefined;\r\n    });\r\n};\r\n\r\n// gets the selected date from pedagogic items\r\nmodel.selectedPedagogicDate = function (){\r\n    var selectedDay = _.findWhere(model.pedagogicDays.all, {selected : true});\r\n    if (selectedDay) {\r\n        return moment(selectedDay.dayName, \"dddd DD MMMM YYYY\").format(\"YYYY-MM-DD\");\r\n    } else {\r\n        return moment();\r\n    }\r\n};\r\n\r\n/**\r\n * Given a moment which contain reliable time data,\r\n * return a moment time with this time and the date specified.\r\n * @param date Date\r\n * @param momentTime Moment date\r\n * @returns {*}\r\n */\r\nmodel.getMomentDateTimeFromDateAndMomentTime = function (date, momentTime) {\r\n    var dateMoment = moment(date);\r\n\r\n    momentTime.set('year', dateMoment.get('year'));\r\n    momentTime.set('month', dateMoment.get('month'));\r\n    momentTime.set('date', dateMoment.get('date'));\r\n\r\n    return momentTime;\r\n};\r\n\r\n\r\n/**\r\n * Publishes or un publishes a list of lessons\r\n * @param cb Callback\r\n * @param cbe Callback on error\r\n */\r\nmodel.publishLessons = function (itemArray, isPublish, cb, cbe) {\r\n\r\n    var url = isPublish ? \"/diary/publishLessons\" : \"/diary/unPublishLessons\";\r\n\r\n    return model.getHttp()({\r\n            method : 'POST',\r\n            url : url,\r\n            data : itemArray\r\n    }).then(function (r) {\r\n        var updateLessons = new Array();\r\n\r\n        // update lesson cache\r\n        // bad code but collection does not seem to update on state change\r\n        // so have to delete and add modified lessons ...\r\n        model.lessons.forEach(function(lessonModel){\r\n            if(itemArray.ids.indexOf(lessonModel.id) != -1){\r\n\r\n                lessonModel.changeState(isPublish);\r\n                lessonModel.selected=false;\r\n                lessonModel.tooltipText = model.getUtilsService().getResponsiveLessonTooltipText(lessonModel);\r\n            }\r\n        });\r\n\r\n        model.lessons.addRange(updateLessons);\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return r.data;\r\n    });\r\n};\r\n\r\nmodel.getMinutes = function (time) {\r\n\r\n    return (parseInt(time.split(':')[0]) * 60) + (parseInt(time.split(':')[1]));\r\n};\r\n\r\nmodel.parseError = function(e) {\r\n    let error:any = {};\r\n    try {\r\n        error = JSON.parse(e.responseText);\r\n    }\r\n    catch (err) {\r\n        error.error = \"diary.error.unknown\";\r\n    }\r\n    error.status = e.status;\r\n\r\n    return error;\r\n};\r\n\r\n/**\r\n *\r\n * @param items Collection of items (lessons or homeworks)\r\n * @returns {Array} Array of id of the items\r\n */\r\nmodel.getItemsIds = function (items) {\r\n    return _.toArray(_.pluck(items, 'id'));\r\n};\r\n\r\n/**\r\n * Loads homework load data for current week of homework\r\n * @param homework\r\n * @param cb\r\n * @param cbe\r\n */\r\nmodel.loadHomeworksLoad = function (homework, date, audienceId, cb, cbe) {\r\n\r\n    return model.getHttp()({\r\n        method : 'GET',\r\n        url : '/diary/homework/load/'+ date + '/' + audienceId\r\n    }).then(function (result) {\r\n        var sqlHomeworksLoads = result.data;\r\n        homework.weekhomeworksload = [];\r\n\r\n        sqlHomeworksLoads.forEach(function (homeworkLoad) {\r\n            homework.weekhomeworksload.push(sqlToJsHomeworkLoad(homeworkLoad));\r\n        });\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return sqlHomeworksLoads;\r\n    });\r\n};\r\n\r\n\r\n/**\r\n * Get homeworks linked to a lesson\r\n *\r\n * @param lesson\r\n * @param cb Callback\r\n * @param cbe Callback on error\r\n */\r\nmodel.loadHomeworksForLesson = function (lesson, cb, cbe) {\r\n\r\n    if (!lesson.id) {\r\n        return;\r\n    }\r\n    let url = '/diary/homework/list/';\r\n    if(model.getSecureService().hasRight(model.getConstants().RIGHTS.SHOW_OTHER_TEACHER)){\r\n        url = '/diary/homework/external/list/';\r\n    }\r\n    return model.getHttp()({\r\n        method : 'GET',\r\n        url : url + lesson.id\r\n    }).then(function (result) {\r\n        var sqlHomeworks = result.data;\r\n        lesson.homeworks = new Collection(Homework);\r\n        sqlHomeworks.forEach(function (sqlHomework) {\r\n            lesson.homeworks.push(sqlToJsHomework(sqlHomework));\r\n        });\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return sqlHomeworks;\r\n    });\r\n};\r\n\r\n\r\n/**\r\n * On window resize compute lesson tooltips (responsive design)\r\n */\r\n/*window.addEventListener('resize', function(event){\r\n\r\n    model.lessons.forEach(function (lesson) {\r\n        lesson.tooltipText = getResponsiveLessonTooltipText(lesson);\r\n    });\r\n});*/\r\n\r\n\r\n/**\r\n * Returns default audience of connected user.\r\n * @returns {*}\r\n */\r\nmodel.getDefaultAudience = function(){\r\n    var defaultAudience = null;\r\n\r\n    if(model.me.classes && model.me.classes.length > 0){\r\n        defaultAudience = model.audiences.findWhere({id: model.me.classes[0]});\r\n    }\r\n\r\n    if(!defaultAudience){\r\n        defaultAudience = model.audiences.first();\r\n    }\r\n\r\n    return defaultAudience;\r\n};\r\n\r\nmodel.showHomeworkPanel = true;\r\n\r\n/**\r\n * Init homework object on created.\r\n * Set default attribute values\r\n * @param homework\r\n * @param cb Callback function\r\n * @param cbe Callback function on error\r\n * @returns {*}\r\n */\r\nmodel.initHomework = function (dueDate, lesson) {\r\n\r\n    var homework = new Homework();\r\n\r\n    homework.created = new Date();\r\n    homework.expanded = true;\r\n    homework.type = model.homeworkTypes.first();\r\n    homework.title = homework.type.label;\r\n    homework.date = (dueDate) ? dueDate : moment().minute(0).second(0);\r\n\r\n    // create homework attached to lesson\r\n    if (lesson) {\r\n        homework.audience = lesson.audience;\r\n        homework.subject = lesson.subject;\r\n        homework.audienceType = homework.audience.type;\r\n        homework.color = lesson.color;\r\n        homework.state = lesson.state;\r\n    }\r\n    // free homework\r\n    else {\r\n        homework.audience = {}; //sets the default audience to undefined\r\n        homework.subject = model.subjects.first();\r\n        homework.audienceType = homework.audience.type;\r\n        homework.color = DEFAULT_ITEM_COLOR;\r\n        homework.state = DEFAULT_STATE;\r\n    }\r\n\r\n    model.loadHomeworksLoad(homework, moment(homework.date).format(DATE_FORMAT), homework.audience.id);\r\n\r\n    return homework;\r\n};\r\n\r\n\r\n/**\r\n * Init lesson\r\n * @returns {Lesson}\r\n */\r\nmodel.initLesson = function (timeFromCalendar, selectedDate) {\r\n    let lesson = new Lesson();\r\n\r\n    lesson.audience = {}; //sets the default audience to undefined\r\n    lesson.subject = model.subjects.first();\r\n    lesson.audienceType = lesson.audience.type;\r\n    lesson.color = DEFAULT_ITEM_COLOR;\r\n    lesson.state = DEFAULT_STATE;\r\n    lesson.title = lang.translate('diary.lesson.label');\r\n\r\n    let newItem:any;\r\n\r\n    if(timeFromCalendar) {\r\n        newItem = model.calendar.newItem;\r\n\r\n        // force to HH:00 -> HH:00 + 1 hour\r\n        newItem.beginning = newItem.beginning.second(0);\r\n        newItem.date = newItem.beginning;\r\n        if (!newItem.beginning.isBefore(newItem.end)){\r\n          newItem.end = moment(newItem.beginning);\r\n          newItem.end.minute(0).second(0).add(1, 'hours');\r\n        }\r\n        if (newItem.audience){\r\n            lesson.audience = newItem.audience;\r\n            lesson.audienceType = lesson.audience.type;\r\n        }\r\n\r\n        if (newItem.room){\r\n            lesson.room = newItem.room;\r\n        }\r\n\r\n        if (newItem.subject){\r\n            lesson.subject = newItem.subject;\r\n        }\r\n\r\n    }\r\n    // init start/end time to now (HH:00) -> now (HH:00) + 1 hour or selectedDate ->\r\n    else {\r\n        var itemDate = (selectedDate) ? moment(selectedDate): moment();\r\n\r\n        newItem = {\r\n            date: itemDate,\r\n            beginning: moment().minute(0).second(0),\r\n            end: moment().minute(0).second(0).add(1, 'hours')\r\n        };\r\n    }\r\n\r\n    lesson.newItem = newItem;\r\n    lesson.startTime = newItem.beginning;\r\n    lesson.endTime = newItem.end;\r\n    lesson.date = newItem.date;\r\n\r\n    return lesson;\r\n};\r\n\r\n\r\n/**\r\n * Load previous lessons from current one\r\n * Attached homeworks to lessons are also loaded\r\n * @param lesson\r\n * @param useDeltaStep\r\n * @param cb Callback function\r\n * @param cbe Callback on error function\r\n */\r\nmodel.getPreviousLessonsFromLesson = function (lesson, useDeltaStep, cb, cbe) {\r\n\r\n    console.warn(\"deprecated\");\r\n    return;\r\n\r\n\r\n    // if (useDeltaStep) {\r\n    //     if (lesson.allPreviousLessonsLoaded) {\r\n    //         return;\r\n    //     }\r\n    // }/* else if (lesson.previousLessonsLoaded || lesson.previousLessonsLoading == true) {\r\n    //     return;\r\n    // }*/\r\n    //\r\n    // if (!useDeltaStep) {\r\n    //     lesson.allPreviousLessonsLoaded = false;\r\n    // }\r\n    //\r\n    // var defaultCount = 6;\r\n    //\r\n    // var idx_start = 0;\r\n    // var idx_end = idx_start + defaultCount;\r\n    //\r\n    // if (useDeltaStep) {\r\n    //     idx_start += defaultCount;\r\n    //     idx_end += defaultCount;\r\n    // }\r\n    //\r\n    // var params = {};\r\n    //\r\n    // params.offset = idx_start;\r\n    // params.limit = idx_end;\r\n    //\r\n    // if (lesson.id) {\r\n    //     params.excludeLessonId = lesson.id;\r\n    // }\r\n    //\r\n    // // tricky way to detect if string date or moment date ...\r\n    // // 12:00:00\r\n    // if (lesson.endTime.length === 8) {\r\n    //     params.endDateTime = lesson.date.format(DATE_FORMAT) + ' ' + lesson.endTime;\r\n    // } else {\r\n    //     params.endDateTime = lesson.date.format(DATE_FORMAT) + ' ' + moment(lesson.endTime).format(\"HH:mm\");\r\n    // }\r\n    //\r\n    // var clonedLessonMoment = moment(new Date(lesson.date));\r\n    // //params.startDate = clonedLessonMoment.add(-2, 'month').format(DATE_FORMAT);\r\n    // params.subject = lesson.subject.id;\r\n    // params.audienceId = lesson.audience.id;\r\n    // params.returnType = 'lesson'; // will allow get lessons first, then homeworks later\r\n    // params.homeworkLinkedToLesson = \"true\";\r\n    // params.sortOrder = \"DESC\";\r\n    //\r\n    // if (!lesson.previousLessons) {\r\n    //     lesson.previousLessons = new Array();\r\n    // }\r\n    // lesson.previousLessonsDisplayed = new Array();\r\n    //\r\n    // lesson.previousLessonsLoading = true;\r\n    // http().postJson('/diary/pedagogicItems/list', params).done(function (items) {\r\n    //\r\n    //     // all lessons loaded\r\n    //     if (items.length < defaultCount) {\r\n    //         lesson.allPreviousLessonsLoaded = true;\r\n    //     }\r\n    //\r\n    //     var previousLessonsAndHomeworks = _.map(items, sqlToJsPedagogicItem);\r\n    //\r\n    //     var groupByItemType = _.groupBy(previousLessonsAndHomeworks, 'type_item');\r\n    //\r\n    //     var previousLessons = groupByItemType.lesson;\r\n    //\r\n    //     if (previousLessons) {\r\n    //         var previousLessonIds = new Array();\r\n    //\r\n    //         previousLessons.forEach(function (lesson) {\r\n    //             previousLessonIds.push(lesson.id);\r\n    //         });\r\n    //\r\n    //\r\n    //         // load linked homeworks of previous lessons\r\n    //         var paramsHomeworks = {};\r\n    //         paramsHomeworks.returnType = 'homework';\r\n    //         paramsHomeworks.homeworkLessonIds = previousLessonIds;\r\n    //\r\n    //         http().postJson('/diary/pedagogicItems/list', paramsHomeworks).done(function (items2) {\r\n    //\r\n    //             var previousHomeworks = _.map(items2, sqlToJsPedagogicItem);\r\n    //\r\n    //             previousLessons.forEach(function (lesson) {\r\n    //                 lesson.homeworks = _.where(previousHomeworks, {lesson_id: lesson.id});\r\n    //             });\r\n    //\r\n    //             lesson.previousLessons = lesson.previousLessons.concat(previousLessons);\r\n    //             lesson.previousLessonsLoaded = true;\r\n    //             lesson.previousLessonsLoading = false;\r\n    //             lesson.previousLessonsDisplayed = lesson.previousLessons;\r\n    //\r\n    //             if (typeof cb === 'function') {\r\n    //                 cb();\r\n    //             }\r\n    //         });\r\n    //     } else {\r\n    //         lesson.previousLessons = new Array();\r\n    //         lesson.previousLessonsLoaded = true;\r\n    //         lesson.previousLessonsLoading = false;\r\n    //         lesson.previousLessonsDisplayed = lesson.previousLessons;\r\n    //         if (typeof cb === 'function') {\r\n    //             cb();\r\n    //         }\r\n    //     }\r\n    //\r\n    // }).error(function (e) {\r\n    //     if (typeof cbe === 'function') {\r\n    //         cbe(model.parseError(e));\r\n    //     }\r\n    // });\r\n};\r\n\r\n\r\nmodel.performPedagogicItemSearch = function (params, isTeacher, cb, cbe) {\r\n\r\n    // global quick search panel\r\n    if (params.isQuickSearch) {\r\n        if (params.returnType === 'lesson') {\r\n            model.pedagogicDaysQuickSearchLesson = new Array();\r\n        } else {\r\n            model.pedagogicDaysQuickSearchHomework = new Array();\r\n        }\r\n    }\r\n    // 'classical' view list\r\n    else {\r\n        model.pedagogicDays.reset();\r\n    }\r\n\r\n    return model.getHttp()({\r\n        method : 'POST',\r\n        url : '/diary/pedagogicItems/list',\r\n        data : params\r\n    }).then( (result) => {\r\n        var items = result.data;\r\n        var pedagogicItemsFromDB = _.map(items, sqlToJsPedagogicItem);\r\n\r\n        var days = _.groupBy(pedagogicItemsFromDB, 'day');\r\n\r\n        var pedagogicDays = [];\r\n\r\n        var aDayIsSelected = false;\r\n\r\n        for (var day in days) {\r\n            if (days.hasOwnProperty(day)) {\r\n                var pedagogicDay = new PedagogicDay();\r\n                pedagogicDay.selected = false;\r\n                pedagogicDay.dayName = moment(day).format(\"dddd DD MMMM YYYY\");\r\n                pedagogicDay.shortName = pedagogicDay.dayName.substring(0,2);\r\n                pedagogicDay.shortDate = moment(day).format(\"DD/MM\");\r\n                pedagogicDay.pedagogicItemsOfTheDay = days[day];\r\n\r\n                var countItems = _.groupBy(pedagogicDay.pedagogicItemsOfTheDay, 'type_item');\r\n\r\n                pedagogicDay.nbLessons = (countItems['lesson']) ? countItems['lesson'].length : 0;\r\n                pedagogicDay.nbHomeworks = (countItems['homework']) ? countItems['homework'].length : 0;\r\n\r\n                //select default day\r\n                if (isTeacher) {\r\n                    if (!aDayIsSelected) {\r\n                        pedagogicDay.selected = true;\r\n                        aDayIsSelected = true;\r\n                    }\r\n                } else {\r\n                    if (pedagogicDay.nbHomeworks > 0 && !aDayIsSelected) {\r\n                        pedagogicDay.selected = true;\r\n                        aDayIsSelected = true;\r\n                    }\r\n                }\r\n                pedagogicDays.push(pedagogicDay);\r\n            }\r\n        }\r\n\r\n        if (pedagogicDays[0] && !aDayIsSelected) {\r\n            pedagogicDays[0].selected = true;\r\n        }\r\n\r\n        // global quick search panel\r\n        if (params.isQuickSearch) {\r\n            if (params.returnType === 'lesson') {\r\n                model.pedagogicDaysQuickSearchLesson = model.pedagogicDaysQuickSearchLesson.concat(pedagogicDays);\r\n            } else {\r\n                model.pedagogicDaysQuickSearchHomework = model.pedagogicDaysQuickSearchHomework.concat(pedagogicDays);\r\n            }\r\n        } else {\r\n            model.pedagogicDays.pushAll(pedagogicDays);\r\n        }\r\n\r\n        model.initSubjects();\r\n\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return pedagogicDays;\r\n    });\r\n};\r\n\r\n/**\r\n * List children of current authenticated user (if parent)\r\n * @param cb Callback function\r\n * @param cbe Callback error function\r\n */\r\nmodel.listChildren = function (cb, cbe) {\r\n\r\n    // no children - abort\r\n    if (!model.me.childrenIds || model.me.childrenIds.length == 0) {\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n        return;\r\n    }\r\n\r\n    \r\n\r\n    return model.getHttp()({\r\n        method : 'GET',\r\n        url : '/diary/children/list'\r\n    }).then(function (result) {\r\n        model.childs.removeAll();\r\n            model.childs.addRange(result.data);\r\n\r\n            if(model.childs.all.length > 0) {\r\n                model.child = model.childs.all[0];\r\n                model.child.selected = true;\r\n            }\r\n\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        });\r\n};\r\n\r\n//builds the set of different subjects encountered in the pedagogic items of the list\r\nmodel.initSubjects = function () {\r\n\r\n    var subjects = [];\r\n\r\n    model.pedagogicDays.forEach(function(pedagogicDay) {\r\n        pedagogicDay.pedagogicItemsOfTheDay.forEach(function(pedagogicItem) {\r\n          if (!pedagogicItem){\r\n            return;\r\n          }\r\n            var subjectName = pedagogicItem.subject;\r\n            if (!_.contains(subjects, subjectName)) {\r\n                subjects.push(subjectName);\r\n            }\r\n        });\r\n    });\r\n\r\n    model.searchForm.subjects = subjects;\r\n};\r\n\r\n/**\r\n * Find subject by id\r\n * @param subjectId\r\n * @returns {null} Subject with id set\r\n */\r\nmodel.findSubjectById = function(subjectId){\r\n\r\n    var subjectMatch = null;\r\n\r\n    model.subjects.all.forEach(function (subject) {\r\n\r\n        if(subject.id == subjectId){\r\n            subjectMatch = subject;\r\n        }\r\n    });\r\n\r\n    return subjectMatch;\r\n};\r\n\r\n/**\r\n * Find subjects matching label user inputed.\r\n * @param label Label subject (might be partial, not case sensitive)\r\n */\r\nmodel.findSubjectsByLabel = function (label) {\r\n\r\n    var subjectsFound = new Array();\r\n\r\n    if (label.length > 0) {\r\n        var labelLowerCaseNoAccent = sansAccent(label).toLowerCase();\r\n\r\n        model.subjects.all.forEach(function (subject) {\r\n            var labelSubjectLowerCaseNoAccent = sansAccent(subject.label.toLowerCase());\r\n\r\n            if (labelSubjectLowerCaseNoAccent.indexOf(labelLowerCaseNoAccent) != -1) {\r\n                subjectsFound.push(subject);\r\n            }\r\n        });\r\n    }\r\n\r\n    return subjectsFound;\r\n};\r\n\r\n\r\n/**\r\n * Creates new subject\r\n */\r\nmodel.createSubject = function(label, cb, cbe){\r\n\r\n    var subject = new Subject();\r\n    subject.label = label;\r\n    return subject.save(cb, cbe);\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/model.ts","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n__export(require(\"./dist\"));\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/index.js\n// module id = 36\n// module chunks = 0","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n__export(require(\"./minicast\"));\r\n__export(require(\"./eventer\"));\r\n__export(require(\"./selection\"));\r\n__export(require(\"./crud\"));\r\n__export(require(\"./provider\"));\r\n__export(require(\"./autosaver\"));\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/index.js\n// module id = 37\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nfunction mapToArray(map) {\r\n    var result = [];\r\n    map.forEach(function (item) {\r\n        result.push(item);\r\n    });\r\n    return result;\r\n}\r\nvar Mix = (function () {\r\n    function Mix() {\r\n    }\r\n    Mix.extend = function (obj, mixin, casts) {\r\n        var _loop_1 = function () {\r\n            var value = mixin[property];\r\n            if (casts && casts[property] && value) {\r\n                var castItem = casts[property];\r\n                var cast_1;\r\n                if (castItem instanceof Function) {\r\n                    cast_1 = {\r\n                        type: castItem,\r\n                        deps: []\r\n                    };\r\n                }\r\n                else {\r\n                    cast_1 = {\r\n                        type: castItem.type,\r\n                        single: castItem.single,\r\n                        deps: castItem.deps ? castItem.deps : []\r\n                    };\r\n                }\r\n                var doCast_1 = function (v) {\r\n                    var instance = new ((_a = cast_1.type).bind.apply(_a, [void 0].concat(cast_1.deps)))();\r\n                    if (instance.mixin)\r\n                        instance.mixin(v);\r\n                    else\r\n                        Mix.extend(instance, v);\r\n                    return instance;\r\n                    var _a;\r\n                };\r\n                if (value instanceof Array && cast_1.single) {\r\n                    obj[property] = [];\r\n                    value.forEach(function (v) {\r\n                        obj[property].push(doCast_1(v));\r\n                    });\r\n                }\r\n                else {\r\n                    obj[property] = doCast_1(value);\r\n                }\r\n            }\r\n            else if (!value || typeof value !== 'object' || value instanceof Array) {\r\n                obj[property] = value;\r\n            }\r\n            else {\r\n                if (obj[property] instanceof TypedArray) {\r\n                    obj[property].load(value);\r\n                }\r\n                else {\r\n                    if (!obj[property]) {\r\n                        obj[property] = {};\r\n                    }\r\n                    this_1.extend(obj[property], value);\r\n                }\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        for (var property in mixin) {\r\n            _loop_1();\r\n        }\r\n        if (obj && obj.fromJSON) {\r\n            obj.fromJSON(mixin);\r\n        }\r\n    };\r\n    Mix.castAs = function (className, obj, params) {\r\n        if (params === void 0) { params = {}; }\r\n        var newObj = new className(params);\r\n        this.extend(newObj, obj);\r\n        return newObj;\r\n    };\r\n    Mix.castArrayAs = function (className, arr, params) {\r\n        if (params === void 0) { params = {}; }\r\n        var newArr = [];\r\n        arr.forEach(function (item) {\r\n            newArr.push(Mix.castAs(className, item, params));\r\n        });\r\n        return newArr;\r\n    };\r\n    return Mix;\r\n}());\r\nexports.Mix = Mix;\r\nvar TypedArray = (function (_super) {\r\n    __extends(TypedArray, _super);\r\n    function TypedArray(className, mixin) {\r\n        if (mixin === void 0) { mixin = {}; }\r\n        var _this = _super.call(this) || this;\r\n        _this.className = className;\r\n        _this.mixin = mixin;\r\n        return _this;\r\n    }\r\n    TypedArray.prototype.push = function () {\r\n        var _this = this;\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i - 0] = arguments[_i];\r\n        }\r\n        items.forEach(function (item) {\r\n            if (!(item instanceof _this.className)) {\r\n                item = Mix.castAs(_this.className, item);\r\n            }\r\n            for (var prop in _this.mixin) {\r\n                item[prop] = _this.mixin[prop];\r\n            }\r\n            Array.prototype.push.call(_this, item);\r\n        });\r\n        return this.length;\r\n    };\r\n    TypedArray.prototype.load = function (data) {\r\n        var _this = this;\r\n        data.forEach(function (item) {\r\n            _this.push(item);\r\n        });\r\n    };\r\n    TypedArray.prototype.asArray = function () {\r\n        return mapToArray(this);\r\n    };\r\n    TypedArray.prototype.toJSON = function () {\r\n        return mapToArray(this);\r\n    };\r\n    return TypedArray;\r\n}(Array));\r\nexports.TypedArray = TypedArray;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/minicast.js\n// module id = 38\n// module chunks = 0","\"use strict\";\r\nvar Eventer = (function () {\r\n    function Eventer() {\r\n        this.events = new Map();\r\n    }\r\n    Eventer.prototype.trigger = function (eventName, data) {\r\n        if (this.events[eventName]) {\r\n            this.events[eventName].forEach(function (f) { return f(data); });\r\n        }\r\n    };\r\n    Eventer.prototype.on = function (eventName, cb) {\r\n        if (!this.events[eventName]) {\r\n            this.events[eventName] = [];\r\n        }\r\n        this.events[eventName].push(cb);\r\n    };\r\n    Eventer.prototype.off = function (eventName, cb) {\r\n        if (!this.events[eventName]) {\r\n            return;\r\n        }\r\n        if (cb === undefined) {\r\n            this.events[eventName] = [];\r\n            return;\r\n        }\r\n        var index = this.events[eventName].indexOf(cb);\r\n        if (index !== -1) {\r\n            this.events[eventName].splice(index, 1);\r\n        }\r\n    };\r\n    Eventer.prototype.once = function (eventName, cb) {\r\n        var _this = this;\r\n        var callback = function (data) {\r\n            cb(data);\r\n            _this.off(eventName, callback);\r\n        };\r\n        this.on(eventName, callback);\r\n    };\r\n    return Eventer;\r\n}());\r\nexports.Eventer = Eventer;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/eventer.js\n// module id = 39\n// module chunks = 0","\"use strict\";\r\nvar Selection = (function () {\r\n    function Selection(arr) {\r\n        this.arr = arr;\r\n        this.selectedElements = [];\r\n    }\r\n    Object.defineProperty(Selection.prototype, \"all\", {\r\n        get: function () {\r\n            return this.arr;\r\n        },\r\n        set: function (all) {\r\n            this.arr = all;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Selection.prototype.filter = function (filter) {\r\n        return this.arr.filter(filter);\r\n    };\r\n    Selection.prototype.push = function (item) {\r\n        this.arr.push(item);\r\n    };\r\n    Selection.prototype.addRange = function (arr) {\r\n        for (var i = 0; i < arr.length; i++) {\r\n            this.all.push(arr[i]);\r\n        }\r\n    };\r\n    Object.defineProperty(Selection.prototype, \"colLength\", {\r\n        get: function () {\r\n            return this.arr.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Selection.prototype, \"length\", {\r\n        get: function () {\r\n            return this.selected.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Selection.prototype.forEach = function (func) {\r\n        this.arr.forEach(func);\r\n    };\r\n    Selection.prototype.selectAll = function () {\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            this.arr[i].selected = true;\r\n        }\r\n    };\r\n    Selection.prototype.select = function (filter) {\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            this.arr[i].selected = filter(this.arr[i]);\r\n        }\r\n    };\r\n    Selection.prototype.deselect = function (filter) {\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            this.arr[i].selected = !filter(this.arr[i]);\r\n        }\r\n    };\r\n    Selection.prototype.deselectAll = function () {\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            this.arr[i].selected = false;\r\n        }\r\n    };\r\n    Selection.prototype.removeSelection = function () {\r\n        var newArr = [];\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            if (!this.arr[i].selected) {\r\n                newArr.push(this.arr[i]);\r\n            }\r\n        }\r\n        this.arr.splice(0, this.arr.length);\r\n        for (var i = 0; i < newArr.length; i++) {\r\n            this.arr.push(newArr[i]);\r\n        }\r\n    };\r\n    Selection.prototype.updateSelected = function () {\r\n        for (var i = 0; i < this.arr.length; i++) {\r\n            var index = this.selectedElements.indexOf(this.arr[i]);\r\n            if (this.arr[i].selected && index === -1) {\r\n                this.selectedElements.push(this.arr[i]);\r\n            }\r\n            else if (!this.arr[i].selected && index !== -1) {\r\n                this.selectedElements.splice(index, 1);\r\n            }\r\n        }\r\n        for (var i = 0; i < this.selectedElements.length; i++) {\r\n            var index = this.arr.indexOf(this.selectedElements[i]);\r\n            if (index === -1) {\r\n                this.selectedElements.splice(index, 1);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(Selection.prototype, \"selected\", {\r\n        // a specific array is maintained to avoid references breaking all the time\r\n        get: function () {\r\n            this.updateSelected();\r\n            return this.selectedElements;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Selection;\r\n}());\r\nexports.Selection = Selection;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/selection.js\n// module id = 40\n// module chunks = 0","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n__export(require(\"./abstract.crud\"));\r\n__export(require(\"./crud\"));\r\n__export(require(\"./abstract.collection\"));\r\n__export(require(\"./collection\"));\r\n__export(require(\"./abstract.model\"));\r\n__export(require(\"./model\"));\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/index.js\n// module id = 41\n// module chunks = 0","\"use strict\";\r\nvar minicast_1 = require(\"../minicast\");\r\nvar AbstractCrud = (function () {\r\n    function AbstractCrud(api, model, initialCast, childrenCasts, customMixin) {\r\n        this.api = api;\r\n        this.model = model;\r\n        this.initialCast = initialCast;\r\n        this.childrenCasts = childrenCasts;\r\n        this.customMixin = customMixin;\r\n    }\r\n    AbstractCrud.prototype.parseApi = function (api, parameters) {\r\n        var _this = this;\r\n        if (typeof api === 'function') {\r\n            api = api();\r\n        }\r\n        return api.split(/(:[a-zA-Z0-9_.]+)/)\r\n            .map(function (fragment) {\r\n            return fragment.charAt(0) === ':' ?\r\n                parameters && parameters[fragment.substr(1)] ||\r\n                    _this.model[fragment.substr(1)] ||\r\n                    _this[fragment.substr(1)] ||\r\n                    fragment :\r\n                fragment;\r\n        }).join('');\r\n    };\r\n    AbstractCrud.prototype.defaultMixin = function (payload) {\r\n        var _this = this;\r\n        if (payload instanceof Array && this.model instanceof Array) {\r\n            this.model = [];\r\n            var model_1 = this.model; //fix type inference\r\n            payload.forEach(function (item) {\r\n                var instance = {};\r\n                if (_this.initialCast) {\r\n                    if (_this.initialCast instanceof Function) {\r\n                        instance = new _this.initialCast();\r\n                    }\r\n                    else {\r\n                        instance = new ((_a = _this.initialCast.type).bind.apply(_a, [void 0].concat(_this.initialCast.deps)))();\r\n                    }\r\n                }\r\n                minicast_1.Mix.extend(instance, item, _this.childrenCasts);\r\n                model_1.push(instance);\r\n                var _a;\r\n            });\r\n        }\r\n        else {\r\n            minicast_1.Mix.extend(this.model, payload, this.childrenCasts);\r\n        }\r\n    };\r\n    AbstractCrud.prototype.create = function (item, opts) {\r\n        var _this = this;\r\n        if (opts === void 0) { opts = {}; }\r\n        if (!this.api.create) {\r\n            throw '[Crud][Api] \"create\" route is undefined';\r\n        }\r\n        return this.http.post(this.parseApi(this.api.create, item), item || this.model, opts)\r\n            .then(function (response) {\r\n            if (_this.model instanceof Array) {\r\n                _this.model.push(item);\r\n            }\r\n            return response;\r\n        });\r\n    };\r\n    AbstractCrud.prototype.sync = function (opts) {\r\n        var _this = this;\r\n        if (opts === void 0) { opts = {}; }\r\n        if (!this.api.sync) {\r\n            throw '[Crud][Api] \"sync\" route is undefined';\r\n        }\r\n        return this.http.get(this.parseApi(this.api.sync), opts)\r\n            .then(function (response) {\r\n            (_this.customMixin || _this.defaultMixin).bind(_this)(response.data);\r\n            return response;\r\n        });\r\n    };\r\n    AbstractCrud.prototype.update = function (item, opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        if (!this.api.update) {\r\n            throw '[Crud][Api] \"update\" route is undefined';\r\n        }\r\n        return this.http.put(this.parseApi(this.api.update, item), item || this.model, opts);\r\n    };\r\n    AbstractCrud.prototype.delete = function (item, opts) {\r\n        var _this = this;\r\n        if (opts === void 0) { opts = {}; }\r\n        if (!this.api.delete) {\r\n            throw '[Crud][Api] \"delete\" route is undefined';\r\n        }\r\n        return this.http.delete(this.parseApi(this.api.delete, item), opts)\r\n            .then(function (response) {\r\n            if (_this.model instanceof Array) {\r\n                _this.model.splice(_this.model.indexOf(item), 1);\r\n            }\r\n            return response;\r\n        });\r\n    };\r\n    return AbstractCrud;\r\n}());\r\nexports.AbstractCrud = AbstractCrud;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.crud.js\n// module id = 42\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar axios_1 = require(\"axios\");\r\nvar abstract_crud_1 = require(\"./abstract.crud\");\r\nvar Crud = (function (_super) {\r\n    __extends(Crud, _super);\r\n    function Crud() {\r\n        var _this = _super.apply(this, arguments) || this;\r\n        _this.http = axios_1.default;\r\n        return _this;\r\n    }\r\n    return Crud;\r\n}(abstract_crud_1.AbstractCrud));\r\nexports.Crud = Crud;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/crud.js\n// module id = 43\n// module chunks = 0","module.exports = require('./lib/axios');\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/index.js\n// module id = 44\n// module chunks = 0","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(utils.merge(defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/axios.js\n// module id = 45\n// module chunks = 0","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  typeof document.createElement -> undefined\n */\nfunction isStandardBrowserEnv() {\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined' &&\n    typeof document.createElement === 'function'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object' && !isArray(obj)) {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/utils.js\n// module id = 46\n// module chunks = 0","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/bind.js\n// module id = 47\n// module chunks = 0","'use strict';\n\nvar defaults = require('./../defaults');\nvar utils = require('./../utils');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = utils.merge({\n      url: arguments[0]\n    }, arguments[1]);\n  }\n\n  config = utils.merge(defaults, this.defaults, { method: 'get' }, config);\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/Axios.js\n// module id = 48\n// module chunks = 0","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar PROTECTION_PREFIX = /^\\)\\]\\}',?\\n/;\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      data = data.replace(PROTECTION_PREFIX, '');\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMehtodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/defaults.js\n// module id = 49\n// module chunks = 0","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/normalizeHeaderName.js\n// module id = 50\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\nvar btoa = (typeof window !== 'undefined' && window.btoa && window.btoa.bind(window)) || require('./../helpers/btoa');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n    var loadEvent = 'onreadystatechange';\n    var xDomain = false;\n\n    // For IE 8/9 CORS support\n    // Only supports POST and GET calls and doesn't returns the response headers.\n    // DON'T do this for testing b/c XMLHttpRequest is mocked, not XDomainRequest.\n    if (process.env.NODE_ENV !== 'test' &&\n        typeof window !== 'undefined' &&\n        window.XDomainRequest && !('withCredentials' in request) &&\n        !isURLSameOrigin(config.url)) {\n      request = new window.XDomainRequest();\n      loadEvent = 'onload';\n      xDomain = true;\n      request.onprogress = function handleProgress() {};\n      request.ontimeout = function handleTimeout() {};\n    }\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request[loadEvent] = function handleLoad() {\n      if (!request || (request.readyState !== 4 && !xDomain)) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        // IE sends 1223 instead of 204 (https://github.com/mzabriskie/axios/issues/201)\n        status: request.status === 1223 ? 204 : request.status,\n        statusText: request.status === 1223 ? 'No Content' : request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED'));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n          cookies.read(config.xsrfCookieName) :\n          undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        if (request.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/adapters/xhr.js\n// module id = 51\n// module chunks = 0","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  // Note: status is not exposed by XDomainRequest\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response\n    ));\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/settle.js\n// module id = 52\n// module chunks = 0","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n @ @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, response);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/createError.js\n// module id = 53\n// module chunks = 0","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n @ @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n  error.response = response;\n  return error;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/enhanceError.js\n// module id = 54\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      }\n\n      if (!utils.isArray(val)) {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/buildURL.js\n// module id = 55\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/parseHeaders.js\n// module id = 56\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    var msie = /(msie|trident)/i.test(navigator.userAgent);\n    var urlParsingNode = document.createElement('a');\n    var originURL;\n\n    /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      var href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n                  urlParsingNode.pathname :\n                  '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })()\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/isURLSameOrigin.js\n// module id = 57\n// module chunks = 0","'use strict';\n\n// btoa polyfill for IE<10 courtesy https://github.com/davidchambers/Base64.js\n\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction E() {\n  this.message = 'String contains an invalid character';\n}\nE.prototype = new Error;\nE.prototype.code = 5;\nE.prototype.name = 'InvalidCharacterError';\n\nfunction btoa(input) {\n  var str = String(input);\n  var output = '';\n  for (\n    // initialize result and counter\n    var block, charCode, idx = 0, map = chars;\n    // if the next str index does not exist:\n    //   change the mapping table to \"=\"\n    //   check if d has no fractional digits\n    str.charAt(idx | 0) || (map = '=', idx % 1);\n    // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n    output += map.charAt(63 & block >> 8 - idx % 1 * 8)\n  ) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n    if (charCode > 0xFF) {\n      throw new E();\n    }\n    block = block << 8 | charCode;\n  }\n  return output;\n}\n\nmodule.exports = btoa;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/btoa.js\n// module id = 58\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n  (function standardBrowserEnv() {\n    return {\n      write: function write(name, value, expires, path, domain, secure) {\n        var cookie = [];\n        cookie.push(name + '=' + encodeURIComponent(value));\n\n        if (utils.isNumber(expires)) {\n          cookie.push('expires=' + new Date(expires).toGMTString());\n        }\n\n        if (utils.isString(path)) {\n          cookie.push('path=' + path);\n        }\n\n        if (utils.isString(domain)) {\n          cookie.push('domain=' + domain);\n        }\n\n        if (secure === true) {\n          cookie.push('secure');\n        }\n\n        document.cookie = cookie.join('; ');\n      },\n\n      read: function read(name) {\n        var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n        return (match ? decodeURIComponent(match[3]) : null);\n      },\n\n      remove: function remove(name) {\n        this.write(name, '', Date.now() - 86400000);\n      }\n    };\n  })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return {\n      write: function write() {},\n      read: function read() { return null; },\n      remove: function remove() {}\n    };\n  })()\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/cookies.js\n// module id = 59\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/InterceptorManager.js\n// module id = 60\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/dispatchRequest.js\n// module id = 61\n// module chunks = 0","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/core/transformData.js\n// module id = 62\n// module chunks = 0","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/isCancel.js\n// module id = 63\n// module chunks = 0","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/isAbsoluteURL.js\n// module id = 64\n// module chunks = 0","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/combineURLs.js\n// module id = 65\n// module chunks = 0","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/Cancel.js\n// module id = 66\n// module chunks = 0","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/cancel/CancelToken.js\n// module id = 67\n// module chunks = 0","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/~/axios/lib/helpers/spread.js\n// module id = 68\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar abstract_crud_1 = require(\"./abstract.crud\");\r\nvar minicast_1 = require(\"../minicast\");\r\nvar AbstractCollection = (function (_super) {\r\n    __extends(AbstractCollection, _super);\r\n    function AbstractCollection(api, initialCast, childrenCasts) {\r\n        var _this = _super.call(this, api, null, initialCast, childrenCasts) || this;\r\n        _this.data = [];\r\n        _this.model = _this.data;\r\n        _this.customMixin = _this.mixin;\r\n        return _this;\r\n    }\r\n    AbstractCollection.prototype.mixin = function (data) {\r\n        var _this = this;\r\n        if (!data || !(data instanceof Array)) {\r\n            throw \"[Crud][Collection] An Array payload is expected.\";\r\n        }\r\n        this.data = [];\r\n        data.forEach(function (item) {\r\n            var instance = {};\r\n            if (_this.initialCast) {\r\n                if (_this.initialCast instanceof Function) {\r\n                    instance = new _this.initialCast();\r\n                }\r\n                else {\r\n                    instance = new ((_a = _this.initialCast.type).bind.apply(_a, [void 0].concat(_this.initialCast.deps)))();\r\n                }\r\n            }\r\n            minicast_1.Mix.extend(instance, item, _this.childrenCasts);\r\n            _this.data.push(instance);\r\n            var _a;\r\n        });\r\n    };\r\n    return AbstractCollection;\r\n}(abstract_crud_1.AbstractCrud));\r\nexports.AbstractCollection = AbstractCollection;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.collection.js\n// module id = 69\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar axios_1 = require(\"axios\");\r\nvar abstract_collection_1 = require(\"./abstract.collection\");\r\nvar Collection = (function (_super) {\r\n    __extends(Collection, _super);\r\n    function Collection(api, initialCast, childrenCasts) {\r\n        var _this = _super.call(this, api, initialCast, childrenCasts) || this;\r\n        _this.http = axios_1.default;\r\n        return _this;\r\n    }\r\n    return Collection;\r\n}(abstract_collection_1.AbstractCollection));\r\nexports.Collection = Collection;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/collection.js\n// module id = 70\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar abstract_crud_1 = require(\"./abstract.crud\");\r\nvar minicast_1 = require(\"../minicast\");\r\nvar AbstractModel = (function (_super) {\r\n    __extends(AbstractModel, _super);\r\n    function AbstractModel(api, childrenCasts) {\r\n        var _this = _super.call(this, api, null, null, childrenCasts) || this;\r\n        _this.model = _this;\r\n        _this.customMixin = _this.mixin;\r\n        return _this;\r\n    }\r\n    AbstractModel.prototype.mixin = function (data) {\r\n        if (!data || !(data instanceof Object)) {\r\n            throw \"[Crud][Collection] An Object payload is expected.\";\r\n        }\r\n        minicast_1.Mix.extend(this, data, this.childrenCasts);\r\n    };\r\n    return AbstractModel;\r\n}(abstract_crud_1.AbstractCrud));\r\nexports.AbstractModel = AbstractModel;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/abstract.model.js\n// module id = 71\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar axios_1 = require(\"axios\");\r\nvar abstract_model_1 = require(\"./abstract.model\");\r\nvar Model = (function (_super) {\r\n    __extends(Model, _super);\r\n    function Model(api, childrenCasts) {\r\n        var _this = _super.call(this, api, childrenCasts) || this;\r\n        _this.http = axios_1.default;\r\n        return _this;\r\n    }\r\n    return Model;\r\n}(abstract_model_1.AbstractModel));\r\nexports.Model = Model;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/crud/model.js\n// module id = 72\n// module chunks = 0","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments)).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\r\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar eventer_1 = require(\"./eventer\");\r\nvar minicast_1 = require(\"./minicast\");\r\nvar axios_1 = require(\"axios\");\r\n/*\r\n * Tool to manage a single list provider used by multiple objects (to avoid multiple call to a same path)\r\n * Usage :\r\n * let provider = new Provider<T>(path, MyClass);\r\n * function a(){\r\n *    //get data from provider\r\n *    let data = await provider.data();\r\n * }\r\n *\r\n * function b(){\r\n *    let data = await provider.data();\r\n *    //get data when a refresh happens\r\n *    provider.on('refresh', (newData) => data = newData));\r\n * }\r\n *\r\n * //force provider refresh (after data invalidation)\r\n * setTimeout(() => provider.refresh(), 50000);\r\n *\r\n * a();\r\n * b();\r\n*/\r\nvar Provider = (function () {\r\n    function Provider(path, className) {\r\n        this.path = path;\r\n        this.className = className;\r\n        this._data = [];\r\n        this.eventer = new eventer_1.Eventer();\r\n    }\r\n    Provider.prototype.data = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(!this.isSynced && !this.syncing))\r\n                            return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.sync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!this.syncing)\r\n                            return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this.syncDone()];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4: return [2 /*return*/, this._data];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Provider.prototype.syncDone = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                        _this.eventer.once('sync', function () { return resolve(); });\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    Provider.prototype.sync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.syncing = true;\r\n                        return [4 /*yield*/, axios_1.default.get(this.path)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        this._data = minicast_1.Mix.castArrayAs(this.className, response.data);\r\n                        this.isSynced = true;\r\n                        this.eventer.trigger('sync');\r\n                        this.syncing = false;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Provider.prototype.refresh = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.isSynced = false;\r\n                        return [4 /*yield*/, this.sync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.eventer.trigger('refresh');\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Provider.prototype.push = function (data) {\r\n        this._data.push(data);\r\n    };\r\n    Provider.prototype.remove = function (data) {\r\n        var index = this._data.indexOf(data);\r\n        this._data.splice(index, 1);\r\n    };\r\n    return Provider;\r\n}());\r\nexports.Provider = Provider;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/provider.js\n// module id = 73\n// module chunks = 0","\"use strict\";\r\nvar axios_1 = require(\"axios\");\r\nvar autosaved = [];\r\nvar loopStarted = false;\r\nvar token;\r\nvar loop = function () {\r\n    autosaved.forEach(function (item) {\r\n        if (item._backup !== JSON.stringify(item.model)) {\r\n            if (item.fn) {\r\n                item.fn();\r\n            }\r\n            else {\r\n                axios_1.default[item.method](item.path, item.model);\r\n            }\r\n            item._backup = JSON.stringify(item.model);\r\n        }\r\n    });\r\n    loopStarted = true;\r\n    token = setTimeout(loop, 500);\r\n};\r\nvar Autosave = (function () {\r\n    function Autosave() {\r\n    }\r\n    Autosave.watch = function (path, model, method) {\r\n        if (method === void 0) { method = 'put'; }\r\n        if (autosaved.findIndex(function (e) { return e.model === model && e.path === path; }) !== -1) {\r\n            return;\r\n        }\r\n        var autosave;\r\n        if (typeof path === 'string') {\r\n            autosave = {\r\n                model: model,\r\n                path: path,\r\n                method: method\r\n            };\r\n        }\r\n        else {\r\n            autosave = {\r\n                model: model,\r\n                fn: path,\r\n                method: method\r\n            };\r\n        }\r\n        autosaved.push(autosave);\r\n        if (!loopStarted) {\r\n            loop();\r\n        }\r\n    };\r\n    Autosave.unwatch = function (model) {\r\n        var index = autosaved.findIndex(function (e) { return e.model === model; });\r\n        autosaved.splice(index, 1);\r\n        if (autosaved.length === 0) {\r\n            this.unwatchAll();\r\n        }\r\n    };\r\n    Autosave.unwatchAll = function () {\r\n        autosaved = [];\r\n        clearTimeout(token);\r\n        loopStarted = false;\r\n    };\r\n    return Autosave;\r\n}());\r\nexports.Autosave = Autosave;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/CGI/dev/cahier-de-textes/~/entcore-toolkit/dist/autosaver.js\n// module id = 74\n// module chunks = 0","import { _, moment } from 'entcore';\r\n\r\nexport class PedagogicDay {\r\n    selected = false;\r\n    dayName = moment().format(\"dddd DD MMMM YYYY\");\r\n    shortName = this.dayName.substring(0,2);\r\n    shortDate = moment().format(\"DD/MM\");\r\n    pedagogicItemsOfTheDay = [];\r\n    nbLessons = 0;\r\n    nbHomeworks = 0;\r\n\r\n    constructor() { }\r\n\r\n    numberOfItems = function () {\r\n        return this.nbLessons + this.nbHomeworks;\r\n    };\r\n\r\n    resetCountValues = function () {\r\n        var countItems = _.groupBy(this.pedagogicItemsOfTheDay, 'type_item');\r\n        this.nbLessons = (countItems['lesson']) ? countItems['lesson'].length : 0;\r\n        this.nbHomeworks = (countItems['homework']) ? countItems['homework'].length : 0;\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/model/PedagogicDay.model.ts","export class Child  {\r\n    id; //String\r\n    displayName; //String\r\n    classId; //String\r\n    className; //String\r\n    selected = false;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/model/Child.model.ts","import {model, moment} from 'entcore';\r\nimport { DATE_FORMAT } from '../tools';\r\n\r\nexport class SearchForm {\r\n\r\n    startDate = {};\r\n    endDate = {};\r\n    publishState = {};\r\n    returnType = {};\r\n    displayLesson = {};\r\n    displayHomework = {};\r\n    audienceId = {};\r\n    subjects = [];\r\n    selectedSubject = null;\r\n    subjectsFilters = [];\r\n    /**\r\n     * If true search result will be stored in model.quickSearchPedagogicDays instead of model.pedagogicDays\r\n     * @type {boolean}\r\n     */\r\n    isQuickSearch:any;\r\n    /**\r\n     * Custom pedagogic days array.\r\n     * Avoid conflicting with model.pedagogicDays)\r\n     * @type {Array}\r\n     */\r\n    customPedagogicDaysArray;\r\n\r\n    constructor(isQuickSearch) {\r\n        this.isQuickSearch = isQuickSearch;\r\n    }\r\n\r\n    initForTeacher = function () {\r\n        this.publishState = \"\";\r\n        this.returnType = \"both\";\r\n        var period = moment(model.calendar.dayForWeek).day(1);\r\n        this.startDate = period.format(DATE_FORMAT);\r\n        this.endDate = period.add(15, 'days').format(DATE_FORMAT);\r\n        this.displayLesson = true;\r\n        this.displayHomework = true;\r\n        this.audienceId = \"\";\r\n    };\r\n\r\n    initForStudent = function () {\r\n        this.publishState = \"published\";\r\n        this.returnType = \"both\";\r\n        var period = moment(model.calendar.dayForWeek).day(1);\r\n        this.startDate = period.format(DATE_FORMAT);\r\n        this.endDate = period.add(15, 'days').format(DATE_FORMAT);\r\n        this.displayLesson = false;\r\n        this.displayHomework = true;\r\n    };\r\n\r\n    getSearch = function () {\r\n\r\n        let params:any = {};\r\n        params.startDate = this.startDate;\r\n        params.endDate = this.endDate;\r\n        params.publishState = this.publishState;\r\n        params.returnType = this.returnType;\r\n\r\n        if (model.isUserParent()) {\r\n            params.audienceId = model.child.classId;\r\n        }\r\n        return params;\r\n    };\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/model/SearchForm.model.ts","import { moment, model, _, $q, $http} from 'entcore';\r\nimport { CONSTANTS} from '../tools';\r\nimport {SubjectService} from \"./subject.service\";\r\n\r\n/*\r\n* Course service as class\r\n* used to manipulate Course model\r\n*/\r\nexport class CourseService {\r\n\r\n   static getMergeCourses(structureId, teacherId, firstDayOfWeek){\r\n        return $q.all([\r\n            this.getScheduleCourses(structureId, teacherId, firstDayOfWeek),\r\n            SubjectService.getStructureSubjectsAsMap(structureId)\r\n        ]).then(results =>{\r\n            let courses = results[0];\r\n            let subjects = results[1];\r\n            return this.mappingCourses(courses,subjects);\r\n        });\r\n    }\r\n\r\n    static mappCourse(course){\r\n        course.date = moment(course.startDate);\r\n        course.date.week(model.calendar.week);\r\n\r\n        course.startMoment = this.recalc(moment(course.startDate));\r\n        course.endMoment = this.recalc(moment(course.endDate));\r\n\r\n        course.startTime = moment(course.startDate).format('HH:mm:ss');\r\n        course.endTime = moment(course.endDate).format('HH:mm:ss');\r\n\r\n        course.calendarType = \"shadow\";\r\n        course.locked=true;\r\n        course.is_periodic =false;\r\n        course.notShowOnCollision=true;\r\n    }\r\n\r\n    static recalc(date){\r\n        // multi week gestion\r\n        //https://groups.google.com/forum/#!topic/entcore/ne1ODPHQabE\r\n        let diff = date.diff(model.mondayOfWeek,'days');\r\n        if ( diff < 0 ||  diff > 6){\r\n            let weekDay = date.weekday();\r\n            date.dayOfYear(model.mondayOfWeek.dayOfYear());\r\n            date.weekday(weekDay);\r\n        }\r\n        return date;\r\n    }\r\n\r\n    static mappingCourses(courses,subjects){\r\n        _.each(courses,course =>{\r\n            course.subject = subjects[course.subjectId];\r\n            this.mappCourse(course);\r\n        });\r\n        return courses;\r\n    }\r\n\r\n    static getScheduleCourses(structureId, teacherId, firstDayOfWeek) {\r\n        let begin = moment(firstDayOfWeek).format(CONSTANTS.CAL_DATE_PATTERN);\r\n        let end = moment(firstDayOfWeek).add(6, 'd').format(CONSTANTS.CAL_DATE_PATTERN);\r\n\r\n        let url = `/directory/timetable/courses/${structureId}/${begin}/${end}`;\r\n        let config = {\r\n            params : {\r\n                teacherId : teacherId\r\n            }\r\n        };\r\n        return $http.get(url,config).then(result =>{\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/service/courses.service.ts","import {AngularExtensions} from '../app';\r\nimport {_, $http } from 'entcore';\r\nimport {Subject} from \"../model/Subject.model\";\r\nimport {UtilsService} from \"./utils.service\";\r\n\r\n/*\r\n * Subject service as class\r\n * used to manipulate Subject model\r\n */\r\nexport class SubjectService {\r\n    static context = {\r\n        subjectPromise: []\r\n    };\r\n    /*\r\n    *   Get all subject from a structureId as map\r\n    *   used to map a course from the subject id\r\n    */\r\n    static getStructureSubjectsAsMap(structureId){\r\n        return this.getStructureSubjects(structureId).then((result)=>{\r\n            let subjects = result;\r\n            let results = {};\r\n            _.each(subjects,subject=>{\r\n                results[subject.subjectId] = subject;\r\n            });\r\n            return results;\r\n        });\r\n    }\r\n\r\n    /*\r\n    *   Get all subject from a structureId\r\n    *   used to map a course from the subject id\r\n    */\r\n    static getStructureSubjects(structureId){\r\n        if (!this.context.subjectPromise[structureId]){\r\n            var url = `/directory/timetable/subjects/${structureId}`;\r\n            this.context.subjectPromise[structureId] = $http.get(url).then(result =>{\r\n                return result.data;\r\n            });\r\n        }\r\n        return this.context.subjectPromise[structureId];\r\n    }\r\n\r\n\r\n    /*\r\n    *   get subjects created by the teacher\r\n    *   used to edit a lesson\r\n    */\r\n    static getCustomSubjects(isTeacher){\r\n        let urlGetSubjects = '';\r\n        if (isTeacher) {\r\n            urlGetSubjects = '/diary/subject/initorlist';\r\n        }else{\r\n            urlGetSubjects = '/diary/subject/list/' + UtilsService.getUserStructuresIdsAsString();\r\n        }\r\n\r\n        return $http.get(urlGetSubjects).then((result)=>{\r\n            return result.data;\r\n        });\r\n    }\r\n\r\n    /*\r\n    * map original subject to diary subject\r\n    */\r\n    static mapToDiarySubject(subject){\r\n        let result = new Subject();\r\n\r\n        result.id = null;\r\n        result.school_id = subject.school_id;\r\n        result.label = subject.subjectLabel;\r\n        result.originalsubjectid = subject.subjectId;\r\n        result.teacher_id = subject.teacher_id;\r\n        return result;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/service/subject.service.ts","import {_, model, idiom as lang} from 'entcore';\r\n\r\n/*\r\n * Utils service as class\r\n * used to manipulate Utils model\r\n */\r\nexport class UtilsService {\r\n\r\n   static getUserStructuresIdsAsString() {\r\n        var structureIds = \"\";\r\n\r\n        model.me.structures.forEach(function(structureId) {\r\n            structureIds += structureId + \":\";\r\n        });\r\n\r\n        return structureIds;\r\n    }\r\n\r\n    /**\r\n     * Set lesson tooltip text depending on screen resolution.\r\n     * Tricky responsive must be linked to additional.css behaviour\r\n     * @param lesson\r\n     */\r\n    static getResponsiveLessonTooltipText(lesson) {\r\n        var tooltipText = lesson.title + ' (' + lang.translate(lesson.state) + ')';\r\n        var screenWidth = window.innerWidth;\r\n\r\n        // < 900 px display room\r\n        if (screenWidth < 900 && lesson.room) {\r\n            tooltipText += '<br>' + lesson.room;\r\n        }\r\n\r\n        // < 650 px display hour start and hour end\r\n        if (screenWidth < 650) {\r\n            tooltipText += '<br>' + [\r\n                [lesson.startMoment.format('HH')]\r\n            ] + 'h' + [\r\n                [lesson.startMoment.format('mm')]\r\n            ];\r\n            tooltipText += ' -> ' + [\r\n                [lesson.endMoment.format('HH')]\r\n            ] + 'h' + [\r\n                [lesson.endMoment.format('mm')]\r\n            ];\r\n        }\r\n\r\n        // < 600 px display subjectlabel\r\n        if (screenWidth < 650 && lesson.subjectLabel) {\r\n            tooltipText += '<br>' + lesson.subjectLabel;\r\n        }\r\n\r\n        tooltipText = tooltipText.trim();\r\n\r\n        return tooltipText;\r\n    }\r\n\r\n\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/service/utils.service.ts","import {_, idiom as lang, moment, model, $http} from 'entcore';\r\nimport { Homework } from '../model/Homework.model';\r\nimport { Subject } from '../model/Subject.model';\r\nimport { CONSTANTS } from '../tools';\r\nimport {UtilsService} from \"./utils.service\";\r\nimport {AttachmentService} from \"./attachment.service\";\r\n\r\n\r\n/*\r\n * Lesson service as class\r\n * used to manipulate Lesson model\r\n */\r\nexport class LessonService {\r\n\r\n    static getLessons(userStructuresIds,mondayOfWeek,isUserParent,childId, fromDate, toDate) {\r\n\r\n        var start = moment(mondayOfWeek).day(1).format(CONSTANTS.CAL_DATE_PATTERN);\r\n        var end = moment(mondayOfWeek).day(1).add(1, 'week').format(CONSTANTS.CAL_DATE_PATTERN);\r\n\r\n        if (fromDate){\r\n            start = fromDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n            end = toDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n        }\r\n\r\n        var urlGetLessons = `/diary/lesson/${userStructuresIds}/${start}/${end}/`;\r\n\r\n        if (isUserParent && childId) {\r\n            urlGetLessons += childId;\r\n        } else {\r\n            urlGetLessons += '%20';\r\n        }\r\n\r\n        return $http.get(urlGetLessons).then((result)=>{\r\n            return this.mappLessons(result.data);\r\n        });\r\n    }\r\n\r\n    static getOtherLessons(userStructuresIds,mondayOfWeek,teacher,audience, fromDate, toDate) {\r\n\r\n        var start = moment(mondayOfWeek).day(1).format(CONSTANTS.CAL_DATE_PATTERN);\r\n        var end = moment(mondayOfWeek).day(1).add(1, 'week').format(CONSTANTS.CAL_DATE_PATTERN);\r\n        if (fromDate){\r\n            start = fromDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n            end = toDate.format(CONSTANTS.CAL_DATE_PATTERN);\r\n        }\r\n        let type = teacher ? \"teacher\" : \"audience\";\r\n        let id = teacher ? teacher.key : audience.key;\r\n\r\n        var urlGetLessons = `/diary/lesson/external/${userStructuresIds}/${start}/${end}/${type}/${id}`;\r\n\r\n        return $http.get(urlGetLessons).then((result)=>{\r\n            return this.mappLessons(result.data);\r\n        });\r\n    }\r\n\r\n    /*\r\n    *   Map lesson\r\n    */\r\n    static mappLessons(lessons){\r\n        return _.map(lessons,(lessonData) =>{\r\n            return this.mapLesson(lessonData);\r\n        });\r\n    }\r\n\r\n    /*\r\n    *  Map one lesson\r\n    */\r\n    static mapLesson(lessonData){\r\n        var lessonHomeworks = [];\r\n\r\n        // only initialize homeworks attached to lesson\r\n        // with only id\r\n        if (lessonData.homework_ids) {\r\n            for (var i = 0; i < lessonData.homework_ids.length; i++) {\r\n                var homework = new Homework();\r\n                homework.id = lessonData.homework_ids[i];\r\n                homework.lesson_id = parseInt(lessonData.lesson_id);\r\n                homework.loaded = false; // means full lessonData from sql not loaded\r\n                lessonHomeworks.push(homework);\r\n            }\r\n        }\r\n\r\n        var lesson:any =  {\r\n            //for share directive you must have _id\r\n            _id:  lessonData.lesson_id,\r\n            id: lessonData.lesson_id,\r\n            title: lessonData.lesson_title,\r\n            audience: model.audiences.findWhere({id: lessonData.audience_id}),\r\n            audienceId: lessonData.audience_id,\r\n            audienceLabel: lessonData.audience_label,\r\n            audienceType: lessonData.audience_type,\r\n            description: lessonData.lesson_description,\r\n            subject: model.subjects.findWhere({id: lessonData.subject_id}),\r\n            subjectId: lessonData.subject_id,\r\n            subjectLabel: lessonData.subject_label,\r\n            teacherName: lessonData.teacher_display_name,\r\n            structureId: lessonData.school_id,\r\n            date: moment(lessonData.lesson_date),\r\n            startTime: lessonData.lesson_start_time,\r\n            endTime: lessonData.lesson_end_time,\r\n            color: lessonData.lesson_color,\r\n            room: lessonData.lesson_room,\r\n            annotations: lessonData.lesson_annotation,\r\n            startMoment: moment(lessonData.lesson_date.split(' ')[0] + ' ' + lessonData.lesson_start_time),\r\n            endMoment: moment(lessonData.lesson_date.split(' ')[0] + ' ' + lessonData.lesson_end_time),\r\n            state: lessonData.lesson_state,\r\n            is_periodic: false,\r\n            homeworks: lessonHomeworks,\r\n            tooltipText: '',\r\n            locked: (!model.canEdit()) ? true : lessonData.locked\r\n        };\r\n        lesson.subject = new Subject();\r\n        lesson.subject.label = lessonData.subject_label;\r\n        lesson.subject.id = lessonData.subject_id;\r\n        lesson.subject.teacher_id = lessonData.teacher_display_name;\r\n\r\n        if('group' === lesson.audienceType){\r\n            lesson.audienceTypeLabel = lang.translate('diary.audience.group');\r\n        } else {\r\n            lesson.audienceTypeLabel = lang.translate('diary.audience.class');\r\n        }\r\n\r\n        if (lessonData.attachments) {\r\n            lesson.attachments = AttachmentService.mappAttachement(JSON.parse(lessonData.attachments));\r\n        }\r\n\r\n        lesson.tooltipText = UtilsService.getResponsiveLessonTooltipText(lesson);\r\n        return lesson;\r\n    }\r\n\r\n\r\n\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/service/lessons.service.ts","import {  _ } from 'entcore';\r\nimport {Attachment} from '../model/Attachment.model';\r\n\r\n/*\r\n * Attachement service as class\r\n * used to manipulate Attachement model\r\n */\r\nexport class AttachmentService  {\r\n    /*\r\n    *   Mapp homeworks\r\n    */\r\n    static mappAttachement(attachements){\r\n        return _.map(attachements,(attachementData) =>{\r\n            var att = new Attachment();\r\n            att.id = attachementData.id;\r\n            att.user_id = attachementData.user_id;\r\n            att.creation_date = attachementData.creation_date;\r\n            att.document_id = attachementData.document_id;\r\n            att.document_label = attachementData.document_label;\r\n\r\n            return att;\r\n        });\r\n    }\r\n\r\n\r\n\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/service/attachment.service.ts","/**\r\n }\r\n }\r\n * Model of attachment from\r\n * table diary.attachment (DB)\r\n * @constructor\r\n */\r\nexport class Attachment {\r\n    /**\r\n     * Attachment id as in diary.attachment table\r\n     * @type {number}\r\n     */\r\n    id = null;\r\n\r\n    user_id = null;\r\n    /**\r\n     * Id of stored document within the document module\r\n     * (see mongodb -> Documents table)\r\n     * E.G: \"b88a3c42-7e4f-4e1c-ab61-11c8872ef795\"\r\n     * @type {string}\r\n     */\r\n    document_id = null;\r\n    /***\r\n     * Creation date\r\n     * @type {null}\r\n     */\r\n    creation_date = null;\r\n    /**\r\n     * Filename of attachment\r\n     * @type {string}\r\n     */\r\n    document_label = null;\r\n\r\n\r\n    /**\r\n     * Download the attachment\r\n     */\r\n    download = function () {\r\n        window.location.href = window.location.host + '/workspace/document/' + this.document_id;\r\n    };\r\n\r\n    /**\r\n     * Detach attachment to a lesson\r\n     * Attachment link will be detached to back end on lesson save\r\n     * @param item Lesson or homework\r\n     * @param cb Callback\r\n     * @param cbe Callback on error\r\n     */\r\n    detachFromItem = function (item, cb, cbe) {\r\n\r\n        var that = this;\r\n\r\n        if (item && item.attachments) {\r\n\r\n            var udpatedAttachments = new Array();\r\n\r\n            item.attachments.forEach(function (attachment) {\r\n                if (attachment && attachment.document_id !== that.document_id) {\r\n                    udpatedAttachments.push(attachment);\r\n                }\r\n            });\r\n\r\n            item.attachments = udpatedAttachments;\r\n\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            } else (typeof cbe === 'function')\r\n            {\r\n                cbe();\r\n            }\r\n        }\r\n    };\r\n};\n\n\n// WEBPACK FOOTER //\n// ./ts/model/Attachment.model.ts","import { model, _} from 'entcore';\r\n\r\n\r\nexport class SecureService {\r\n\r\n\r\n    static hasRight(right){\r\n        let result = false;\r\n        _.each(model.me.authorizedActions,(authorizedAction)=>{\r\n            if (authorizedAction.displayName === right){\r\n                result=true;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/directives/secure/secure.service.ts","import { _, idiom as lang, $http, $q} from 'entcore';\r\n\r\n/*\r\n* Audience service as class\r\n* used to manipulate Audience model\r\n*/\r\nexport class AudienceService {\r\n    static context = {\r\n        processesPromise: []\r\n    }\r\n    static getAudiencesAsMap(structureIdArray){\r\n        return this.getAudiences(structureIdArray).then((classes)=>{\r\n            let result = {};\r\n            _.each(classes,(classe)=>{\r\n                result[classe.name] = classe;\r\n            });\r\n            return result;\r\n        });\r\n    }\r\n\r\n    /*\r\n    * get classes for all structureIds\r\n    */\r\n    static getAudiences(structureIdArray) {\r\n        //cache the promises, this datas will not change in a uniq session\r\n        let processes = [];\r\n        _.each(structureIdArray,(structureId)=>{\r\n\r\n            if (!this.context.processesPromise[structureId]){\r\n                this.context.processesPromise[structureId] = [];\r\n                let url = `/userbook/structure/${structureId}`;\r\n                this.context.processesPromise[structureId] = $http.get(url).then((result)=>{\r\n                    return {\r\n                        structureId : structureId,\r\n                        structureData : result.data\r\n                    };\r\n                });\r\n            }\r\n            processes.push(this.context.processesPromise[structureId]);\r\n\r\n        });\r\n\r\n        //execute promises\r\n        return $q.all(processes).then((results) => {\r\n            let result = [];\r\n            _.each(results,(datas=>{\r\n                let structureId = datas.structureId;\r\n                let structureData = datas.structureData;\r\n                result = result.concat(this.mapAudiences(structureData.classes,structureId));\r\n            }));\r\n            return result;\r\n        });\r\n\r\n    }\r\n\r\n    /*\r\n    *   map an Audience\r\n    */\r\n    static mapAudiences(classes,structureId){\r\n        return _.map(classes,  (audience) =>{\r\n            audience.structureId = structureId;\r\n            audience.type = 'class';\r\n            audience.typeLabel = lang.translate('diary.audience.class');\r\n            return audience;\r\n        });\r\n    }\r\n\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/service/audiences.service.ts"],"sourceRoot":""}