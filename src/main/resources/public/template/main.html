<div class="row">
    <div class="twelve cell">

        <div class="seven cell">
            <app-title class="zero-mobile">
                <h1 class="application-title">
                    <i18n>diary.title</i18n></span>
                </h1>
            </app-title>

        </div>

        <div class="contextual-buttons five cell">
            <button ng-if="isPersonnel() || isTeacher()" ng-click="createSession">
                <i18n>cdt.schedule.create</i18n>
            </button>
            <button ng-click="createHomework()">
                Cr√©er Homework 2 z
            </button>
        </div>
    </div>
    <div class="clear"></div>
</div>

<article class="row twelve" ng-if="isRelative() || isTeacher()">
    <div ng-if="structures.all.length > 1">
        <select ng-model="structure"
                ng-change="switchStructure(structure)"
                ng-options="structure as structure.name for structure in structures.all"></select>
    </div>
    <div ng-if="isTeacher()">
        <h4>
            <i18n>cdt.timetable.of.group</i18n>
            <select ng-model="params.group"
                    ng-change="params.user = null; getTimetable()"
                    ng-options="group as group.name for group in structure.groups.all">
                <option value="" disabled selected>[[translate('utils.group.choose.one')]]</option>
            </select>
            <i class="refused-icon" ng-click="getTeacherTimetable()"></i>
        </h4>
    </div>
    <div ng-if="isRelative() && structure.students.all.length > 0">
        <h4 ng-if="structure.students.all.length === 1"><i18n>cdt.timetable.of</i18n> [[currentStudent.displayName]]</h4>
        <div ng-if="structure.students.all.length > 1">
            <h4>
                <i18n>cdt.timetable.of</i18n>
                <select id="students-list"
                        ng-model="currentStudent"
                        ng-change="params.group = getStudentGroup(currentStudent); getTimetable();"
                        ng-options="student as student.displayName for student in structure.students.all">
                    <option value="" disabled selected>[[translate('cdt.student.choose')]]</option>
                </select>
            </h4>
        </div>
    </div>
</article>
<article class="cell two twelve-mobile" ng-if="isPersonnel()">
    <div ng-if="structures.all.length > 1">
        <label for="structure-list"><i18n>utils.structures</i18n></label>
        <select ng-model="structure"
                id="structure-list"
                class="twelve"
                ng-change="switchStructure(structure)"
                ng-options="structure as structure.name for structure in structures.all">
            <option value="" disabled selected>[[translate('utils.structure.choose.one')]]</option>
        </select>
    </div>
    <div>
        <label for="user-list">
            <div><i18n>utils.teachers</i18n></div>
            <select ng-model="params.user"
                    id="user-list"
                    class="twelve"
                    ng-change="params.group = null; getTimetable()"
                    ng-options="teacher as teacher.displayName for teacher in structure.teachers.all">
                <option value="" disabled selected>[[translate('utils.teacher.choose.one')]]</option>
            </select>
        </label>
    </div>
    <div>
        <label for="group-list"><i18n>utils.groups</i18n></label>
        <select ng-model="params.group"
                id="group-list"
                class="twelve"
                ng-change="params.user = null; getTimetable()"
                ng-options="group as group.name for group in structure.groups.all">
            <option value="" disabled selected>[[translate('utils.group.choose.one')]]</option>
        </select>
    </div>
</article>
<div id="calendar-view" class="cell horizontal-spacing twelve-mobile" ng-class="{twelve: !isPersonnel(), ten: isPersonnel()}">
    <div class="loader" ng-if="calendarLoader.show">
        <div>
            <p><i class="spinner"></i></p>
            <h4><i18n>cdt.calendar.loading</i18n></h4>
        </div>
    </div>
    <calendar
            display-template="calendar/course-item"
            items="structure.courses.all">
    </calendar>
</div>
</div> 