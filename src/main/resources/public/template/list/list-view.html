<div ng-controller="manageListController" class="row" workflow="diary.listView"
     ng-class="isAChildOrAParent ? (!$parent.isMobile() ? 'remove-margin-left' : '') : ''">
    <div class="main-header" ng-class="{'padding-bottom-list': !isCounselorUser()}">
        <!-- Title -->
        <h1 class="cell title-area-complete padding-right-xlg">
            <!-- module image -->
            <img ng-if="!isCounselorUser()" ng-src="/diary/public/img/uni-cahierdetexte.png" alt=""/>

            <!-- module title name -->
            <i18n>diary.title</i18n>

            <!-- name structure -->
            <span ng-if="!isCounselorUser()" class="structure-title main ellipsis-multiline-two">
                [[structure.name]]
            </span>
        </h1>

        <!-- teacher search bar -->
        <div workflow="diary.diarySearch" class="cell padding-left-xlg margin-right-lg four">
            <div class="cell twelve search-input">
                <async-autocomplete data-ng-disabled="false"
                                    data-ng-model="autocomplete.teacher"
                                    data-ng-change="selectTeacher"
                                    data-options="autocomplete.teacherOptions"
                                    data-on-search="filterTeacherOptions"
                                    data-placeholder="diary.search.teacher"
                                    data-search="autocomplete.teacher">
                </async-autocomplete>
            </div>
            <div class="cell twelve main-header-result-search"
                 ng-show="autocomplete.teachersSelected[0] && autocomplete.teachersSelected[0].displayName !== ''">
                <ul class="cell twelve search-input-ul">
                    <li>
                        [[autocomplete.teachersSelected[0].displayName]]
                        <i class="close" data-ng-click="removeTeacher(autocomplete.teachersSelected[0])"></i>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Classes/groups search bar -->
        <div workflow="diary.diarySearch" class="cell padding-left-xlg four">
            <div class="cell twelve search-input">
                <async-autocomplete data-ng-disabled="false"
                                    data-ng-model="autocomplete.class"
                                    data-ng-change="selectClass"
                                    data-options="autocomplete.classOptions"
                                    data-on-search="filterClassOptions"
                                    data-placeholder="diary.search.group"
                                    data-search="autocomplete.class">
                </async-autocomplete>
            </div>
            <div class="cell twelve main-header-result-search"
                 ng-show="autocomplete.classesSelected[0] && autocomplete.classesSelected[0].displayName !== ''">
                <ul class="cell twelve search-input-ul">
                    <li>
                        [[autocomplete.classesSelected[0].displayName]]
                        <i class="close" data-ng-click="removeClass(autocomplete.classesSelected[0])"></i>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- content sidebar -->
    <div class="cell three twelve-mobile" static-include="/diary/public/template/main/sidebar.html"></div>

    <!-- content -->
    <div class="cell nine twelve-mobile sidebar-article">
        <!-- date filter -->
        <article class="twelve row list-view-date-picker" ng-if="display.listView">
            <i18n>period.from</i18n>
            <date-picker ng-model="filters.startDate" ng-change="syncPedagogicItems();"
                         class="no-margin date-picker-sm">
            </date-picker>
            <i18n>to</i18n>
            <date-picker ng-model="filters.endDate" ng-change="syncPedagogicItems();"
                         class="no-margin date-picker-sm"></date-picker>
        </article>

        <!-- list pedagogic day -->
        <div class="list-view">
            <div ng-show="hasPedagogicDayToDisplay(pedagogicDays, display) && (display.sessionList || display.homeworks)"
                 class="timeline-story vertical-spacing row">
                <div ng-if="!containsOnlyCourses(pedagogicDay)"
                     ng-repeat="pedagogicDay in pedagogicDays"
                     class="twelve cell event-row timeline-story">

                    <div ng-if="!containsOnlyCourses(pedagogicDay)">

                        <!-- title-->
                        <div class="cell date-field text-right">
                            <span class="label">
                                [[pedagogicDay.fullDayName]]
                            </span>
                        </div>

                        <!-- round -->
                        <div class="event cell">
                            <div>
                                <span class="round"
                                      ng-class="{'[[pedagogicDay.color]]': true}">
                                    <span class="white-text">
                                        [[getNbHomework(pedagogicDay)]]
                                    </span>
                                </span>
                            </div>
                        </div>

                        <!-- content inside arrow if displayed -->
                        <div ng-show="pedagogicDay.displayed" class="cell ten twelve-mobile">
                            <div ng-repeat="pedagogicItem in pedagogicDay.pedagogicItems">
                                <!-- content list pedagogic item case session list is view -->
                                <div ng-if="display.sessionList"
                                     static-include="/diary/public/template/list/list-pedagogic-item.html"></div>

                                <!-- content list pedagogic homeworkOnly case session list is not view -->
                                <div ng-if="display.homeworks"
                                     static-include="/diary/public/template/list/list-pedagogic-item-homeworkOnly.html"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--  empty state no pedagogicDay with at least one pedagogicitem != Course -->
            <div ng-show="!hasPedagogicDayToDisplay(pedagogicDays, display) && (display.sessionList || display.homeworks)">
                <div class="row">
                    <div ng-class="!$parent.isMobile() ? 'nine' : ''" class="empty-content">
                        <div ng-class="!$parent.isMobile() ? 'eight' : ''" class="description">
                            <span class="orange-bar bar"></span>
                                <i18n ng-show="!display.sessionList && display.homeworks">diary.empty.viewlist.homework</i18n>
                                <i18n ng-show="display.sessionList && !display.homeworks">diary.empty.viewlist.session</i18n>
                                <i18n ng-show="(!display.sessionList && !display.homeworks) || (display.sessionList && display.homeworks)">diary.empty.on.period</i18n>
                            <span class="green-bar bar"></span>
                        </div>
                        <img data-ng-src="/diary/public/img/skate-green.svg" class="four" src="/presences/public/img/skate-green.svg">
                    </div>
                </div>
            </div>

            <!--  empty state none filter is selected -->
            <div ng-show="!display.sessionList && !display.homeworks">
                <div class="row">
                    <div ng-class="!$parent.isMobile() ? 'nine' : ''" class="empty-content">
                        <div ng-class="!$parent.isMobile() ? 'eight' : ''" class="description">
                            <span class="orange-bar bar"></span>
                            <i18n>diary.filter.none</i18n>
                            <span class="green-bar bar"></span>
                        </div>
                        <img data-ng-src="/diary/public/img/skate-green.svg" class="four" src="/presences/public/img/skate-green.svg">
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
