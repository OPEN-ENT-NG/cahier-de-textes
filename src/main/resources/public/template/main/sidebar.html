<div class="sidebar ">


    <button workflow="diary.readVisa" class="twelve padding-sm" ng-click="goTo('/visas')">
        <i18n>visa.manage.button.goTo</i18n>
    </button>
    <button class="twelve padding-sm" ng-click="goTo('/progressions/view')">
        <i18n>progression.manage.button.goTo</i18n>
    </button>
    <section id="display-section" class="cell twelve">

        <div>
            <h5 class="large cell eleven">
                <i18n>sidebar.display_mode</i18n> :
            </h5>
            <!-- Legend -->
            <i class="large help one cell margin-top-Botton-md" ng-if="!display.listView"
                   tooltip="[[translate('help')]]" ng-click="setLegendLightboxVisible(true)"></i>
        </div>

        <label class="cell twelve text-xl margin-bottom-md" ng-if="hasBothViewMode()">
            <i tooltip="calendar"
               class="margin-sm"
               ng-class="display.listView ? 'opacity-icon' : 'selected'"
               ng-click="changeViewCalendar()">&#xe8b3;</i>
            <i tooltip="list"
               class="margin-sm"
               ng-class="display.listView ? 'selected' : 'opacity-icon'"
               ng-click="changeViewList()"
               ng-model="display.listView">&#xe8b8;</i>

        </label>

        <div class="row margin-bottom-md" ng-if="display.listView">
            <i18n>period.from</i18n>
            <date-picker ng-model="filters.startDate" ng-change="syncPedagogicItems();"
                         class="date-picker-sm"></date-picker>
            <br/>
            <i18n>to</i18n>
            <date-picker ng-model="filters.endDate" ng-change="syncPedagogicItems();"
                         class="date-picker-sm"></date-picker>
        </div>

        <div class="row margin-bottom-md" ng-show="!display.listView">
            <div ng-click="display.homeworks = !display.homeworks">
                <label class="checkbox">
                    <input type="checkbox" ng-model="display.homeworks"/>
                    <span class="small pointer"><i18n>homeworks</i18n></span>
                </label>
            </div>
            <div class="row margin-bottom-md" ng-show="!display.listView">
                <div ng-click="display.sessions = !display.sessions">
                    <label class="checkbox">
                        <input type="checkbox" ng-model="display.sessions">
                        <span class="small pointer"><i18n>session</i18n></span>
                    </label>
                </div>
            </div>
            <div ng-if="structures.all.length > 1">
                <select ng-model="structure"
                        id="structure-list"
                        class="twelve"
                        ng-change="switchStructure(structure)"
                        ng-options="structure as structure.name for structure in structures.all">
                    <option value="" disabled selected>[[translate('utils.structure.choose.one')]]</option>
                </select>
            </div>


            <!-- Access Own Data -->

            <!-- Access Child Data -->
            <div workflow="diary.accessChildData">
                <select ng-model="params.child"
                        class="twelve"
                        ng-change="params.group = null;params.user = null;syncPedagogicItems()"
                        ng-options="child as child.displayName for child in structure.students.all track by child.id">
                    <option value="" disabled selected>[[translate('student.choose')]]</option>
                </select>
            </div>

            <!-- Access External Data -->
            <div workflow="diary.accessExternalData">
                <div class="row display-inline-block">
                    <label class="cell twelve small" for="user-list">
                        <select ng-model="params.user"
                                id="user-list"
                                class="twelve"
                                ng-change="params.group = null;syncPedagogicItems()"
                                ng-options="teacher as teacher.displayName for teacher in structure.teachers.all track by teacher.id">
                            <option value="" disabled selected>[[translate('utils.teacher.choose.one')]]</option>
                        </select>
                    </label>
                </div>
                <div class="row display-inline-block">
                    <label class="cell twelve small" for="user-list">
                        <select ng-model="params.group"
                                id="group-list"
                                class="twelve"
                                ng-change="params.user = null;syncPedagogicItems()"
                                ng-options="audience as audience.name for audience in structure.audiences.all track by audience.id">
                            <option value="" disabled selected>[[translate('utils.group.choose.one')]]</option>
                        </select>
                    </label>
                </div>
            </div>
    </section>
<section  ng-show="!display.listView" ng-if="progressions.all.length > 0">
    <div class="row">
        <h5 class="large" ng-click="display.progression = !display.progression">
            <i18n>progression</i18n>
            <i ng-class="display.progression ? 'up-open' : 'down-open'" class="right-magnet"></i>
        </h5>
    </div>
    <div ng-show="display.progression" >
        <table >
            <div ng-repeat="progression in progressions.all track by $index">
                <p class="progression-item-scrollable six"  lvl-draggable="true" >[[progression.title]]</p>
            </div>
        </table>
    </div>
</section>

    <!-- Legend -->
    <section class="row" ng-show="!display.listView">
        <div class="row">
            <h5 class="large" ng-click="display.legend = !display.legend">
                <i18n>legend</i18n>
                <i ng-class="display.legend ? 'up-open' : 'down-open'" class="right-magnet"></i>
            </h5>
        </div>
        <div class="row small" ng-show="display.legend">
            <div>
                <span class="help-color-bloc" style="background-color: lightgrey"></span>
                <span><i18n>session.official</i18n></span>
            </div>
            <div>
                <span class="help-color-bloc" style="background-color: green"></span>
                <span><i18n>session.officialUpdate</i18n></span>
            </div>
            <div>
                <span class="help-color-bloc" style="background-color: grey"></span>
                <span><i18n>session.punctual</i18n></span>
            </div>
            <div>
                <i>&#xe904;</i>
                <span><i18n>session.not.published</i18n></span>
            </div>
            <div>
                <i>&#xe80d;</i>
                <span><i18n>homework</i18n></span>
            </div>
            <div>
                <i>&#xe86f;</i>
                <span><i18n>session</i18n></span>
            </div>
        </div>
    </section>

    <section id="add-section" class="row" ng-if="hasAtLeastOneCreateRight()">
        <div class="cell twelve ">
            <h5 class="large" ng-click="display.add = !display.add">
                <i18n>utils.add</i18n>
                <i ng-class="display.add ? 'up-open' : 'down-open'" class="right-magnet"></i>
            </h5>
            <div class="row" ng-show="display.add">
                <div class="twelve cell small">
                    <button workflow="diary.manageHomework" class="twelve padding-sm cancel" ng-click="goTo('/homework/create/')">
                        <i18n>homework</i18n>
                    </button>
                    <br/>
                    <button workflow="diary.manageSession" class="twelve padding-sm cancel" ng-click="goTo('/session/create/')">
                        <i18n>session</i18n>
                    </button>
                </div>
            </div>
        </div>
    </section>


</div>
<lightbox show="legendLightboxIsVisible" on-close="setLegendLightboxVisible(false);">
    <container template="infoBulleTemplate"></container>
</lightbox>